
<div class="h-full w-full overflow-y-hidden">
    <!-- Breadcrumb -->
    <nav class="flex shadow px-5 py-3 text-gray-700 borde bg-white dark:bg-slate-800 " aria-label="Breadcrumb">
    <ol class="inline-flex items-center space-x-1 md:space-x-2 rtl:space-x-reverse">
        <li class="inline-flex items-center">
            <a [routerLink]="['/dashboards/inventaris']"
                class="inline-flex items-center text-sm font-medium text-gray-700 hover:text-blue-600 dark:text-gray-400 dark:hover:text-white">
                Inventaris
            </a>
        </li>
        <li>
            <div class="flex items-center">
                <svg class="rtl:rotate-180 block w-3 h-3 mx-1 text-gray-400 " aria-hidden="true"
                    xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 6 10">
                    <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                        d="m1 9 4-4-4-4" />
                </svg>
                <a
                    class="ms-1 text-sm font-medium text-gray-700 hover:text-blue-600 md:ms-2 dark:text-gray-400 dark:hover:text-white">Detail
                    Inventaris</a>
            </div>
        </li>
    </ol>
    </nav>

    <div>
    <!-- Kartu Pertama -->
    <div class="mt-8 mx-4">
        <fuse-card class="shadow-md border-[1px] width-full">
            <div class="flex flex-row p-6 gap-6 flex-auto">
                <!-- Kiri: Informasi -->
                <div class="flex-1">
                    <h2 class="text-2xl font-semibold mb-6 text-center">Detail Informasi Barang</h2>
                    <table class="table-auto w-full">
                        <tr>
                            <td class="px-4 py-2 font-bold">Tanggal Barang</td>
                            <td class="px-4 py-2">{{ barangData?.tanggal_pembelian | date:'dd MMMM yyyy, HH:mm':'Asia/Jakarta' }}</td>
                        </tr>
                        <tr>
                            <td class="px-4 py-2 font-bold">Nama Barang</td>
                            <td class="px-4 py-2">{{ barangData?.nama_barang }}</td>
                        </tr>
                        <tr>
                            <td class="px-4 py-2 font-bold">Nama Divisi</td>
                            <td class="px-4 py-2">{{ barangData?.kategori_nama }}</td>
                        </tr>
                        <tr>
                            <td class="px-4 py-2 font-bold">Harga Pembelian</td>
                            <td class="px-4 py-2">{{ barangData?.harga_pembelian | currency:'IDR ' }}</td>
                        </tr>
                        <tr>
                            <td class="px-4 py-2 font-bold">Barang Tersedia</td>
                            <td class="px-4 py-2">{{ barangData?.qty_tersedia }}</td>
                        </tr>
                        <tr>
                            <td class="px-4 py-2 font-bold">Barang Terpakai</td>
                            <td class="px-4 py-2">{{ barangData?.qty_terpakai }}</td>
                        </tr>
                        <tr>
                            <td class="px-4 py-2 font-bold">Total  Barang</td>
                            <td class="px-4 py-2">{{ barangData?.qty_barang }}</td>
                        </tr>
                        <tr>
                            <td class="px-4 py-2 font-bold">Total Harga</td>
                            <td class="px-4 py-2">{{ barangData?.total_nilai | currency:'IDR ' }}</td>
                        </tr>
                        <tr>
                            <td class="px-4 py-2 font-bold">Penempatan</td>
                            <td class="px-4 py-2">{{ barangData?.nama_gudang}}</td>
                        </tr>
                    </table>
                </div>
                <!-- Kanan: Gambar -->
                <div class="flex-1 flex justify-center items-center">
                    <img
                        [src]="barangData?.upload_nota"
                        alt="Nota Pembelian"
                        class="max-w-full max-h-[400px] object-contain rounded border"
                    />
                </div>
            </div>
        </fuse-card>
    </div>

    <!-- Kartu Kedua -->
    <div class="mt-8 mx-4">
        <fuse-card class="shadow-md border-[1px] width-full">
            <div class="p-6 w-full">
                <h2 class="text-xl font-semibold mb-4">Riwayat Sebaran Barang</h2>
                <input type="text" [disabled]="isLoading" matInput (keyup)="applySearchFilter($event.target.value)"
                    class="block p-2 ps-10 text-sm text-gray-900 border border-gray-300 rounded-lg bg-gray-50 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500"
                    placeholder="Cari Divisi">

                <!-- Tombol di pojok kanan atas -->
                <div class="flex justify-end mb-4">
                    <a [disabled]="isLoading || barangData?.qty_tersedia === 0 || barangData?.qty_tersedia === 'Barang Sudah Terpakai Semua'"
                       (click)="checkQtyBeforeSubmit()"
                       mat-flat-button
                       [color]="'primary'">
                        <mat-icon class="icon-size-5" [svgIcon]="'person_add_alt_1'"></mat-icon>
                        <span class="block ml-2">Tambahkan Distribusi Barang</span>
                    </a>
                </div>


                <!-- Tabel Riwayat Barang dengan MatTable -->
                <div class="overflow-auto">
                    <table mat-table [dataSource]="dataSource" matSort class="w-full">
                        <!-- Column Definitions -->
                        <ng-container matColumnDef="barang">
                            <th mat-header-cell *matHeaderCellDef mat-sort-header>Nama Barang</th>
                            <td mat-cell *matCellDef="let element">{{ element.barang }}</td>
                        </ng-container>

                        <ng-container matColumnDef="user">
                            <th mat-header-cell *matHeaderCellDef mat-sort-header>Nama User</th>
                            <td mat-cell *matCellDef="let element">{{ element.user }}</td>
                        </ng-container>

                        <ng-container matColumnDef="qty_barang">
                            <th mat-header-cell *matHeaderCellDef mat-sort-header>Qty</th>
                            <td mat-cell *matCellDef="let element">{{ element.qty_barang }}</td>
                        </ng-container>

                        <ng-container matColumnDef="posisi_awal">
                            <th mat-header-cell *matHeaderCellDef mat-sort-header>Posisi Awal</th>
                            <td mat-cell *matCellDef="let element">{{ element.posisi_awal }}</td>
                        </ng-container>

                        <ng-container matColumnDef="posisi_akhir">
                            <th mat-header-cell *matHeaderCellDef mat-sort-header>Posisi Akhir</th>
                            <td mat-cell *matCellDef="let element">{{ element.posisi_akhir }}</td>
                        </ng-container>

                        <!-- Header and Footer -->
                        <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
                        <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
                    </table>

                    <!-- Paginasi -->
                    <mat-paginator [length]="dataSource.data.length" [pageSize]="5" [pageSizeOptions]="[5, 10, 25]" showFirstLastButtons></mat-paginator>
                </div>
            </div>
        </fuse-card>
    </div>


</div>

</div>
