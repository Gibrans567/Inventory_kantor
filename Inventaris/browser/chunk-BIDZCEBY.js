import{a as fi}from"./chunk-ZXBU2DMU.js";import{a as pi}from"./chunk-T2PL5IIJ.js";import{a as ci,b as mi,c as di,d as ui}from"./chunk-W7CNA4V5.js";import{a as ai,b as li,c as si}from"./chunk-BRBHI7BQ.js";import{a as Gt,d as Kt}from"./chunk-6NIFNVKK.js";import{a as zt,c as Bt}from"./chunk-K6SJV66T.js";import"./chunk-JIIP3X5D.js";import{a as Qt,b as Ut}from"./chunk-3LDMUN2X.js";import{a as Xt,b as Yt,c as Wt,d as Jt}from"./chunk-6GRHLUW6.js";import{c as Ht}from"./chunk-MFWW5XDS.js";import{e as $t}from"./chunk-YCUPTL4E.js";import{f as At}from"./chunk-DCIWF3NK.js";import"./chunk-N64NHRQD.js";import{b as Nt}from"./chunk-N34H76JM.js";import"./chunk-WCPJYO2Z.js";import{a as oi,b as ri}from"./chunk-AOYF6QNZ.js";import"./chunk-XKTUJYVS.js";import{d as le,e as se}from"./chunk-BNZ6GVUN.js";import{a as Fe,d as Pt,e as De,i as oe,j as re}from"./chunk-BVYLKFEF.js";import"./chunk-PPHX6Q7S.js";import{A as Ae,B as ze,a as Zt,b as Le,c as ei,d as q,f as Ve,g as Re,l as Oe,n as ti,o as qe,p as ii,q as ni,r as je,z as Ne}from"./chunk-EMGI2SSV.js";import{a as ae,c as Q,d as Te,e as O}from"./chunk-DPACH7O6.js";import{b as F,c as D}from"./chunk-IIOR2V55.js";import{D as Rt,E as Ot,K as qt,N as jt}from"./chunk-SFWQ4JHW.js";import"./chunk-DITXZIYA.js";import"./chunk-PTSJDPUO.js";import"./chunk-G5ULN3RC.js";import{f as Vt,g as ke,h as be,i as Ie}from"./chunk-HZDJ65MY.js";import{c as Tt,i as Lt}from"./chunk-OAD3FQTP.js";import{A as Dt,d as tt,h as Z,l as kt,m as It,r as Ee,u as Ft}from"./chunk-MFIY2XVS.js";import{$a as Ye,$b as p,Bb as s,Bc as he,Ca as bt,Cc as wt,Ea as Xe,Ec as St,F as Ue,Ga as Me,H as ue,Ha as b,Hb as we,Ia as fe,Ib as f,J as $,Ja as N,Kb as G,Lb as V,Mb as R,N as mt,Nb as r,Oa as gt,Ob as a,Oc as Et,Pb as d,Tb as w,U as dt,X as H,Y as M,Zb as h,_ as j,_a as vt,a as ot,ab as We,ac as Ct,ba as Ge,bc as Se,c as xe,ca as ye,db as o,dc as X,eb as v,ec as Y,f as B,fa as ut,fc as W,g as L,gc as ie,ha as pe,hc as c,ia as C,ic as J,jb as Je,jc as y,lb as Ke,n as te,na as E,o as P,p as rt,pa as pt,pb as _t,qc as yt,r as at,rb as Ze,rc as k,s as de,sb as xt,sc as Mt,tc as K,u as lt,uc as et,wa as ft,x as st,xa as ht,y as ct,ya as _,z as Ce,za as x,zb as g,zc as ne}from"./chunk-ULGM77ZI.js";import{i as Qe}from"./chunk-7EPSDV5K.js";var hi=["gray","red","orange","yellow","green","teal","blue","indigo","purple","pink"],ce={gray:{text:"text-gray-500",bg:"bg-gray-500",combined:"text-gray-800 bg-gray-100"},red:{text:"text-red-500",bg:"bg-red-500",combined:"text-red-800 bg-red-100"},orange:{text:"text-orange-500",bg:"bg-orange-500",combined:"text-orange-800 bg-orange-100"},yellow:{text:"text-yellow-500",bg:"bg-yellow-500",combined:"text-yellow-800 bg-yellow-100"},green:{text:"text-green-500",bg:"bg-green-500",combined:"text-green-800 bg-green-100"},teal:{text:"text-teal-500",bg:"bg-teal-500",combined:"text-teal-800 bg-teal-100"},blue:{text:"text-blue-500",bg:"bg-blue-500",combined:"text-blue-800 bg-blue-100"},indigo:{text:"text-indigo-500",bg:"bg-indigo-500",combined:"text-indigo-800 bg-indigo-100"},purple:{text:"text-purple-500",bg:"bg-purple-500",combined:"text-purple-800 bg-purple-100"},pink:{text:"text-pink-500",bg:"bg-pink-500",combined:"text-pink-800 bg-pink-100"}};var I=(()=>{class t{constructor(e){this._httpClient=e,this.selectedMailChanged=new L(null),this._category=new L(null),this._filters=new L(null),this._folders=new L(null),this._labels=new L(null),this._mails=new L(null),this._mailsLoading=new L(!1),this._mail=new L(null),this._pagination=new L(null)}get category$(){return this._category.asObservable()}get filters$(){return this._filters.asObservable()}get folders$(){return this._folders.asObservable()}get labels$(){return this._labels.asObservable()}get mails$(){return this._mails.asObservable()}get mailsLoading$(){return this._mailsLoading.asObservable()}get mail$(){return this._mail.asObservable()}get pagination$(){return this._pagination.asObservable()}getFilters(){return this._httpClient.get("api/apps/mailbox/filters").pipe(j(e=>{this._filters.next(e)}))}getFolders(){return this._httpClient.get("api/apps/mailbox/folders").pipe(j(e=>{this._folders.next(e)}))}getLabels(){return this._httpClient.get("api/apps/mailbox/labels").pipe(j(e=>{this._labels.next(e)}))}getMailsByFilter(e,n="1"){return this._mailsLoading.next(!0),this._httpClient.get("api/apps/mailbox/mails",{params:{filter:e,page:n}}).pipe(j(i=>{this._category.next({type:"filter",name:e}),this._mails.next(i.mails),this._pagination.next(i.pagination),this._mailsLoading.next(!1)}),H(i=>i.mails===null?P({message:"Requested page is not available!",pagination:i.pagination}):te(i)))}getMailsByFolder(e,n="1"){return this._mailsLoading.next(!0),this._httpClient.get("api/apps/mailbox/mails",{params:{folder:e,page:n}}).pipe(j(i=>{this._category.next({type:"folder",name:e}),this._mails.next(i.mails),this._pagination.next(i.pagination),this._mailsLoading.next(!1)}),H(i=>i.mails===null?P({message:"Requested page is not available!",pagination:i.pagination}):te(i)))}getMailsByLabel(e,n="1"){return this._mailsLoading.next(!0),this._httpClient.get("api/apps/mailbox/mails",{params:{label:e,page:n}}).pipe(j(i=>{this._category.next({type:"label",name:e}),this._mails.next(i.mails),this._pagination.next(i.pagination),this._mailsLoading.next(!1)}),H(i=>i.mails===null?P({message:"Requested page is not available!",pagination:i.pagination}):te(i)))}getMailById(e){return this._mails.pipe($(1),de(n=>{let i=n.find(l=>l.id===e)||null;return this._mail.next(i),i}),H(n=>n?te(n):P("Could not found mail with id of "+e+"!")))}updateMail(e,n){return this._httpClient.patch("api/apps/mailbox/mail",{id:e,mail:n}).pipe(j(()=>{this.getFolders().subscribe()}))}resetMail(){return te(!0).pipe($(1),j(()=>{this._mail.next(null)}))}addLabel(e){return this.labels$.pipe($(1),H(n=>this._httpClient.post("api/apps/mailbox/label",{label:e}).pipe(de(i=>(this._labels.next([...n,i]),i)))))}updateLabel(e,n){return this.labels$.pipe($(1),H(i=>this._httpClient.patch("api/apps/mailbox/label",{id:e,label:n}).pipe(de(l=>{let u=i.findIndex(S=>S.id===e);return i[u]=l,this._labels.next(i),l}))))}deleteLabel(e){return this.labels$.pipe($(1),H(n=>this._httpClient.delete("api/apps/mailbox/label",{params:{id:e}}).pipe(de(i=>{let l=n.findIndex(u=>u.id===e);return n.splice(l,1),this._labels.next(n),i}))))}static{this.\u0275fac=function(n){return new(n||t)(pe(Tt))}}static{this.\u0275prov=ye({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var Fi=["infoDetailsPanelOrigin"],Di=["infoDetailsPanel"],Ti=()=>["./../"],Li=t=>({"text-red-600 dark:text-red-500":t}),Vi=t=>({"text-orange-500 dark:text-red-400":t});function Ri(t,m){if(t&1){let e=w();r(0,"div",36),h("click",function(){let i=_(e).$implicit,l=p(2);return x(l.toggleLabel(i))}),r(1,"mat-checkbox",37),c(2),a()()}if(t&2){let e=m.$implicit,n=p(2);o(),s("color","primary")("checked",n.mail.labels.includes(e.id))("disableRipple",!0),o(),y(" ",e.title," ")}}function Oi(t,m){if(t&1){let e=w();r(0,"button",38),h("click",function(){_(e);let i=p(2);return x(i.toggleUnread(!1))}),d(1,"mat-icon",10),r(2,"span"),c(3,"Mark as read"),a()()}t&2&&(o(),s("svgIcon","heroicons_outline:envelope-open"))}function qi(t,m){if(t&1){let e=w();r(0,"button",38),h("click",function(){_(e);let i=p(2);return x(i.toggleUnread(!0))}),d(1,"mat-icon",10),r(2,"span"),c(3,"Mark as unread"),a()()}t&2&&(o(),s("svgIcon","heroicons_outline:envelope"))}function ji(t,m){if(t&1){let e=w();r(0,"button",38),h("click",function(){_(e);let i=p(2);return x(i.moveToFolder("spam"))}),d(1,"mat-icon",10),r(2,"span"),c(3,"Spam"),a()()}t&2&&(o(),s("svgIcon","heroicons_outline:exclamation-triangle"))}function Ni(t,m){if(t&1){let e=w();r(0,"button",38),h("click",function(){_(e);let i=p(2);return x(i.moveToFolder("inbox"))}),d(1,"mat-icon",10),r(2,"span"),c(3,"Not spam"),a()()}t&2&&(o(),s("svgIcon","heroicons_outline:exclamation-triangle"))}function Ai(t,m){if(t&1){let e=w();r(0,"button",38),h("click",function(){_(e);let i=p(2);return x(i.moveToFolder("trash"))}),d(1,"mat-icon",10),r(2,"span"),c(3,"Delete"),a()()}t&2&&(o(),s("svgIcon","heroicons_outline:trash"))}function zi(t,m){if(t&1&&(r(0,"div",39),c(1),a()),t&2){let e=m.$implicit,n=p(3);s("ngClass",n.labelColors[e.color].combined),o(),y(" ",e.title," ")}}function Bi(t,m){if(t&1&&(r(0,"div",19),V(1,zi,2,2,"div",39,G),ne(3,"fuseFindByKey"),a()),t&2){let e=p(2);o(),R(wt(3,0,e.mail.labels,"id",e.labels))}}function Pi(t,m){t&1&&c(0,"other")}function $i(t,m){t&1&&c(0,"others")}function Hi(t,m){if(t&1&&(r(0,"div")(1,"span",40),c(2,"and"),a(),r(3,"span",29),c(4),a(),r(5,"span",41),g(6,Pi,1,0,"ng-template",42)(7,$i,1,0,"ng-template",43),a()()),t&2){let e=p(2);o(4),J(e.mail.ccCount+e.mail.bccCount),o(),s("ngPlural",e.mail.ccCount+e.mail.bccCount)}}function Qi(t,m){if(t&1&&(r(0,"div",45)(1,"div",46),c(2," cc: "),a(),r(3,"div",47),c(4),a()()),t&2){let e=p(3);o(4),y(" ",e.mail.cc.join(`,
`)," ")}}function Ui(t,m){if(t&1&&(r(0,"div",45)(1,"div",46),c(2," bcc: "),a(),r(3,"div",47),c(4),a()()),t&2){let e=p(3);o(4),y(" ",e.mail.bcc.join(`,
`)," ")}}function Gi(t,m){if(t&1&&(r(0,"div",44)(1,"div",45)(2,"div",46),c(3," from: "),a(),r(4,"div",47),c(5),a()(),r(6,"div",45)(7,"div",46),c(8," to: "),a(),r(9,"div",47),c(10),a()(),g(11,Qi,5,1,"div",45)(12,Ui,5,1,"div",45),r(13,"div",45)(14,"div",46),c(15," date: "),a(),r(16,"div",47),c(17),ne(18,"date"),a()(),r(19,"div",45)(20,"div",46),c(21," subject: "),a(),r(22,"div",47),c(23),a()()()),t&2){let e=p(2);o(5),y(" ",e.mail.from.contact," "),o(5),y(" ",e.mail.to," "),o(),f(e.mail.cc?11:-1),o(),f(e.mail.bcc?12:-1),o(5),y(" ",he(18,6,e.mail.date,"EEEE, MMMM d, y - hh:mm a")," "),o(6),y(" ",e.mail.subject," ")}}function Xi(t,m){if(t&1&&d(0,"img",52),t&2){let e=p().$implicit;s("src","images/apps/mailbox/"+e.preview,We)}}function Yi(t,m){if(t&1&&(r(0,"div",53)(1,"div",57),c(2),a()()),t&2){let e=p().$implicit;o(2),y(" ",e.type.split("/")[1].trim().toUpperCase()," ")}}function Wi(t,m){if(t&1&&(r(0,"div",51),g(1,Xi,1,1,"img",52)(2,Yi,3,1,"div",53),r(3,"div",54)(4,"div",55),c(5),a(),r(6,"div",56),c(7),ne(8,"number"),a()()()),t&2){let e=m.$implicit;o(),f(e.type.startsWith("image/")?1:-1),o(),f(e.type.startsWith("application/")?2:-1),o(2),s("title",e.name),o(),y(" ",e.name," "),o(),s("title",e.size),o(),y(" ",he(8,6,e.size/1e3,"1.0-2")," KB ")}}function Ji(t,m){if(t&1&&(r(0,"div",33)(1,"div",48),d(2,"mat-icon",31),r(3,"div",49),c(4),a()(),r(5,"div",50),V(6,Wi,9,9,"div",51,G),a()()),t&2){let e=p(2);o(2),s("svgIcon","heroicons_solid:paper-clip"),o(2),y(" ",e.mail.attachments.length," Attachments "),o(2),R(e.mail.attachments)}}function Ki(t,m){if(t&1){let e=w();r(0,"div",35)(1,"button",58),h("click",function(){_(e);let i=p(2);return x(i.reply())}),d(2,"mat-icon",31),r(3,"span",59),c(4,"Reply"),a()(),r(5,"button",58),h("click",function(){_(e);let i=p(2);return x(i.replyAll())}),d(6,"mat-icon",31),r(7,"span",59),c(8,"Reply All"),a()(),r(9,"button",58),h("click",function(){_(e);let i=p(2);return x(i.forward())}),d(10,"mat-icon",60),r(11,"span",59),c(12,"Forward"),a()()()}t&2&&(o(),s("color","primary"),o(),s("svgIcon","heroicons_solid:arrow-uturn-left"),o(3),s("color","primary"),o(),s("svgIcon","heroicons_solid:arrow-uturn-left"),o(3),s("color","primary"),o(),s("color","primary")("svgIcon","heroicons_solid:chevron-double-right"))}function Zi(t,m){if(t&1){let e=w();r(0,"div",33,4)(2,"mat-form-field",61),d(3,"textarea",62),a(),r(4,"div",63)(5,"div",64)(6,"button",65),d(7,"mat-icon",31),a(),r(8,"button",65),d(9,"mat-icon",31),a(),r(10,"button",65),d(11,"mat-icon",31),a(),r(12,"button",65),d(13,"mat-icon",31),a()(),r(14,"div",66)(15,"button",67),h("click",function(){_(e);let i=p(2);return x(i.discard())}),c(16," Discard "),a(),r(17,"button",68),h("click",function(){_(e);let i=p(2);return x(i.send())}),c(18," Send "),a()()()()}t&2&&(o(2),s("subscriptSizing","dynamic"),o(),s("placeholder","Type your reply here")("rows",4),o(4),s("svgIcon","heroicons_solid:paper-clip"),o(2),s("svgIcon","heroicons_solid:link"),o(2),s("svgIcon","heroicons_solid:face-smile"),o(2),s("svgIcon","heroicons_solid:photo"),o(4),s("color","primary"))}function en(t,m){if(t&1){let e=w();r(0,"div",7)(1,"div",8)(2,"a",9),d(3,"mat-icon",10),a(),r(4,"button",11),d(5,"mat-icon",10),a(),r(6,"mat-menu",null,0),V(8,Ri,3,4,"div",12,we().trackByFn,!0),a(),r(10,"button",13),h("click",function(){_(e);let i=p();return x(i.toggleImportant())}),d(11,"mat-icon",14),a(),r(12,"button",13),h("click",function(){_(e);let i=p();return x(i.toggleStar())}),d(13,"mat-icon",14),a(),r(14,"button",15),d(15,"mat-icon",10),a(),r(16,"mat-menu",null,1),g(18,Oi,4,1,"button",16)(19,qi,4,1,"button",16)(20,ji,4,1,"button",16)(21,Ni,4,1,"button",16)(22,Ai,4,1,"button",16),a()(),r(23,"div",17)(24,"div",18),c(25),a(),g(26,Bi,4,4,"div",19),a()(),r(27,"div",20)(28,"div",21)(29,"div",22)(30,"div",23)(31,"div",24),d(32,"img",25),a(),r(33,"div",26)(34,"div",27),c(35),a(),r(36,"div",28)(37,"div"),c(38,"to"),a(),r(39,"div",29),c(40,"me"),a(),g(41,Hi,8,2,"div"),r(42,"button",30,2),h("click",function(){_(e);let i=p();return x(i.openInfoDetailsPanel())}),d(44,"mat-icon",31),a(),g(45,Gi,24,9,"ng-template",null,3,St),a()()(),d(47,"div",32),g(48,Ji,8,2,"div",33),a(),r(49,"div",34),g(50,Ki,13,7,"div",35)(51,Zi,19,8,"div",33),a()()()}if(t&2){let e=ie(7),n=ie(17),i=p();o(2),s("routerLink",Mt(25,Ti)),o(),s("svgIcon","heroicons_outline:arrow-long-left"),o(),s("matMenuTriggerFor",e),o(),s("svgIcon","heroicons_outline:tag"),o(3),R(i.labels),o(3),s("ngClass",K(26,Li,i.mail.important))("svgIcon","heroicons_outline:exclamation-circle"),o(2),s("ngClass",K(28,Vi,i.mail.starred))("svgIcon","heroicons_outline:star"),o(),s("matMenuTriggerFor",n),o(),s("svgIcon","heroicons_outline:ellipsis-vertical"),o(3),f(i.mail.unread?18:-1),o(),f(i.mail.unread?-1:19),o(),f(i.getCurrentFolder()!=="spam"&&i.getCurrentFolder()!=="drafts"?20:-1),o(),f(i.getCurrentFolder()==="spam"?21:-1),o(),f(i.getCurrentFolder()!=="trash"?22:-1),o(3),y(" ",i.mail.subject," "),o(),f(i.mail.labels&&i.mail.labels.length>0?26:-1),o(6),s("src",i.mail.from.avatar,We),o(3),y(" ",i.mail.from.contact.split("<")[0].trim()," "),o(6),f(i.mail.ccCount+i.mail.bccCount>0?41:-1),o(3),s("svgIcon","heroicons_solid:chevron-down"),o(3),s("innerHTML",i.mail.content,Ye),o(),f(i.mail.attachments&&i.mail.attachments.length>0?48:-1),o(2),f(i.replyFormActive?-1:50),o(),f(i.replyFormActive?51:-1)}}function tn(t,m){t&1&&(r(0,"div",6),d(1,"mat-icon",69),r(2,"div",70),c(3," Select a mail to read "),a()()),t&2&&(o(),s("svgIcon","heroicons_outline:envelope"))}var vi=(()=>{class t{constructor(e,n,i,l,u,S){this._activatedRoute=e,this._elementRef=n,this._mailboxService=i,this._overlay=l,this._router=u,this._viewContainerRef=S,this.replyFormActive=!1,this._unsubscribeAll=new B}ngOnInit(){this.labelColors=ce,this._mailboxService.folders$.pipe(M(this._unsubscribeAll)).subscribe(e=>{this.folders=e}),this._mailboxService.labels$.pipe(M(this._unsubscribeAll)).subscribe(e=>{this.labels=e}),this._mailboxService.mail$.pipe(M(this._unsubscribeAll)).subscribe(e=>{this.mail=e}),this._mailboxService.selectedMailChanged.pipe(M(this._unsubscribeAll)).subscribe(()=>{this.replyFormActive=!1})}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}getCurrentFolder(){return this._activatedRoute.snapshot.paramMap.get("folder")}moveToFolder(e){let n=this.folders.find(i=>i.slug===e);this.mail.folder!==n.id&&(this.mail.folder=n.id,this._mailboxService.updateMail(this.mail.id,{folder:this.mail.folder}).subscribe(),this._router.navigate(["./"],{relativeTo:this._activatedRoute.parent}))}toggleLabel(e){let n=!1;this.mail.labels.includes(e.id)?(n=!0,this.mail.labels.splice(this.mail.labels.indexOf(e.id),1)):this.mail.labels.push(e.id),this._mailboxService.updateMail(this.mail.id,{labels:this.mail.labels}).subscribe(),n&&this._activatedRoute.snapshot.paramMap.get("label")&&this._activatedRoute.snapshot.paramMap.get("label")===e.slug&&this._router.navigate(["./"],{relativeTo:this._activatedRoute.parent})}toggleImportant(){this.mail.important=!this.mail.important,this._mailboxService.updateMail(this.mail.id,{important:this.mail.important}).subscribe(),this.mail.important||this._activatedRoute.snapshot.paramMap.get("filter")&&this._activatedRoute.snapshot.paramMap.get("filter")==="important"&&this._router.navigate(["./"],{relativeTo:this._activatedRoute.parent})}toggleStar(){this.mail.starred=!this.mail.starred,this._mailboxService.updateMail(this.mail.id,{starred:this.mail.starred}).subscribe(),this.mail.starred||this._activatedRoute.snapshot.paramMap.get("filter")&&this._activatedRoute.snapshot.paramMap.get("filter")==="starred"&&this._router.navigate(["./"],{relativeTo:this._activatedRoute.parent})}toggleUnread(e){this.mail.unread=e,this._mailboxService.updateMail(this.mail.id,{unread:this.mail.unread}).subscribe()}reply(){this.replyFormActive=!0,setTimeout(()=>{this._elementRef.nativeElement.scrollTop=this._elementRef.nativeElement.scrollHeight})}replyAll(){this.replyFormActive=!0,setTimeout(()=>{this._elementRef.nativeElement.scrollTop=this._elementRef.nativeElement.scrollHeight})}forward(){this.replyFormActive=!0,setTimeout(()=>{this._elementRef.nativeElement.scrollTop=this._elementRef.nativeElement.scrollHeight})}discard(){this.replyFormActive=!1}send(){this.replyFormActive=!1}openInfoDetailsPanel(){this._overlayRef=this._overlay.create({backdropClass:"",hasBackdrop:!0,scrollStrategy:this._overlay.scrollStrategies.block(),positionStrategy:this._overlay.position().flexibleConnectedTo(this._infoDetailsPanelOrigin._elementRef.nativeElement).withFlexibleDimensions(!0).withViewportMargin(16).withLockedPosition(!0).withPositions([{originX:"start",originY:"bottom",overlayX:"start",overlayY:"top"},{originX:"start",originY:"top",overlayX:"start",overlayY:"bottom"},{originX:"end",originY:"bottom",overlayX:"end",overlayY:"top"},{originX:"end",originY:"top",overlayX:"end",overlayY:"bottom"}])});let e=new Nt(this._infoDetailsPanel,this._viewContainerRef);this._overlayRef.attach(e),this._overlayRef.backdropClick().subscribe(()=>{this._overlayRef&&this._overlayRef.hasAttached()&&this._overlayRef.detach(),e&&e.isAttached&&e.detach()})}trackByFn(e,n){return n.id||e}static{this.\u0275fac=function(n){return new(n||t)(v(Vt),v(fe),v(I),v(At),v(be),v(_t))}}static{this.\u0275cmp=E({type:t,selectors:[["mailbox-details"]],viewQuery:function(n,i){if(n&1&&(X(Fi,5),X(Di,5)),n&2){let l;Y(l=W())&&(i._infoDetailsPanelOrigin=l.first),Y(l=W())&&(i._infoDetailsPanel=l.first)}},standalone:!0,features:[k],decls:3,vars:1,consts:[["toggleLabelMenu","matMenu"],["mailMenu","matMenu"],["infoDetailsPanelOrigin",""],["infoDetailsPanel",""],["replyForm",""],[1,"bg-card","flex","flex-auto","flex-col","overflow-y-auto","dark:bg-default","lg:overflow-hidden"],[1,"flex","flex-auto","flex-col","items-center","justify-center","bg-gray-100","dark:bg-transparent"],[1,"relative","z-10","flex","w-full","flex-0","flex-col","border-b"],[1,"flex","min-h-16","items-center","border-b","bg-gray-50","px-4","dark:bg-transparent","md:px-6"],["mat-icon-button","",1,"md:-ml-2","lg:hidden",3,"routerLink"],[3,"svgIcon"],["mat-icon-button","",1,"ml-auto",3,"matMenuTriggerFor"],["mat-menu-item","","matRipple",""],["mat-icon-button","",1,"ml-2",3,"click"],[3,"ngClass","svgIcon"],["mat-icon-button","",1,"ml-2",3,"matMenuTriggerFor"],["mat-menu-item",""],[1,"flex","flex-wrap","items-center","px-6","py-5"],[1,"my-1","mr-4","flex","flex-auto","text-2xl"],[1,"-mx-1","flex","flex-wrap","items-center","justify-start"],["fuseScrollReset","",1,"flex","flex-auto","shrink-0","flex-col","bg-gray-100","p-3","dark:bg-transparent","lg:shrink","lg:overflow-y-auto"],[1,"bg-card","flex","w-full","flex-0","flex-col","overflow-hidden","rounded-2xl","shadow","dark:bg-black","dark:bg-opacity-10"],[1,"flex","flex-col","px-6","py-8"],[1,"flex","w-full","items-center"],[1,"flex","h-10","w-10","flex-0","items-center","justify-center","overflow-hidden","rounded-full"],["alt","User avatar",1,"h-full","w-full",3,"src"],[1,"ml-4","min-w-0"],[1,"truncate","font-semibold"],[1,"mt-0.5","flex","items-center","leading-5"],[1,"ml-1","font-semibold"],["mat-icon-button","",1,"ml-1","h-5","min-h-5","w-5",3,"click"],[1,"icon-size-5",3,"svgIcon"],[1,"mt-8","flex","whitespace-pre-line","leading-relaxed",3,"innerHTML"],[1,"flex","w-full","flex-col"],[1,"flex","w-full","border-t","bg-gray-50","p-6","dark:bg-transparent"],[1,"-m-2","flex","w-full","flex-wrap"],["mat-menu-item","","matRipple","",3,"click"],[1,"pointer-events-none",3,"color","checked","disableRipple"],["mat-menu-item","",3,"click"],[1,"m-1","whitespace-nowrap","rounded-full","px-2.5","py-0.5","text-sm","font-medium",3,"ngClass"],[1,"ml-1"],[1,"ml-1","font-semibold",3,"ngPlural"],["ngPluralCase","=1"],["ngPluralCase","other"],[1,"bg-card","flex","w-full","max-w-160","flex-col","space-y-1.5","overflow-auto","rounded","border","px-6","py-4","text-md","shadow-md"],[1,"flex"],[1,"min-w-14","text-right","font-medium"],[1,"whitespace-pre-wrap","pl-2"],[1,"mt-12","flex","items-center"],[1,"ml-2","font-semibold"],[1,"-m-3","mt-3","flex","flex-wrap"],[1,"m-3","flex","items-center"],[1,"h-10","w-10","overflow-hidden","rounded-md",3,"src"],[1,"flex","h-10","w-10","items-center","justify-center","overflow-hidden","rounded-md","bg-primary-100"],[1,"ml-3"],[1,"truncate","text-md","font-medium",3,"title"],[1,"text-secondary","truncate","text-sm","font-medium",3,"title"],[1,"text-primary-500-800","flex","items-center","justify-center","text-sm","font-semibold"],["mat-stroked-button","",1,"m-2",3,"click","color"],[1,"ml-2"],[1,"icon-size-5",3,"color","svgIcon"],[3,"subscriptSizing"],["matInput","",1,"textarea",3,"placeholder","rows"],[1,"mt-4","flex","flex-col","justify-between","sm:mt-6","sm:flex-row","sm:items-center"],[1,"-ml-2"],["mat-icon-button",""],[1,"mt-4","flex","items-center","sm:mt-0"],["mat-button","",1,"order-last","ml-3","sm:order-first","sm:ml-0",3,"click"],["mat-flat-button","",1,"sm:ml-3",3,"click","color"],[1,"icon-size-24",3,"svgIcon"],[1,"text-secondary","mt-4","text-2xl","font-semibold","tracking-tight"]],template:function(n,i){n&1&&(r(0,"div",5),g(1,en,52,30)(2,tn,4,1,"div",6),a()),n&2&&(o(),f(i.mail?1:2))},dependencies:[O,ae,Te,Q,Ie,D,F,Jt,Yt,Xt,Wt,Ot,Rt,ri,oi,Z,fi,kt,It,re,oe,se,le,pi,Ft,Ee],encapsulation:2})}}return t})();var _i=(()=>{class t{constructor(){}static{this.\u0275fac=function(n){return new(n||t)}}static{this.\u0275cmp=E({type:t,selectors:[["mailbox-empty-details"]],standalone:!0,features:[k],decls:5,vars:1,consts:[[1,"bg-card","flex","flex-auto","flex-col","overflow-y-auto","dark:bg-default","lg:overflow-hidden"],[1,"flex","flex-auto","flex-col","items-center","justify-center","bg-gray-100","dark:bg-transparent"],[1,"icon-size-24",3,"svgIcon"],[1,"text-secondary","mt-4","text-2xl","font-semibold","tracking-tight"]],template:function(n,i){n&1&&(r(0,"div",0)(1,"div",1),d(2,"mat-icon",2),r(3,"div",3),c(4," Select a mail to read "),a()()()),n&2&&(o(2),s("svgIcon","heroicons_outline:envelope"))},dependencies:[D,F],encapsulation:2})}}return t})();var $e={toolbar:[["bold","italic","underline","strike"],["blockquote","code-block"],[{header:1},{header:2}],[{list:"ordered"},{list:"bullet"}],[{script:"sub"},{script:"super"}],[{indent:"-1"},{indent:"+1"}],[{direction:"rtl"}],[{size:["small",!1,"large","huge"]}],[{header:[1,2,3,4,5,6,!1]}],[{color:[]},{background:[]}],[{font:[]}],[{align:[]}],["clean"],["link","image","video"],["table"]]},xi=new ut("config",{providedIn:"root",factory:()=>({modules:$e})});function it(t){t||(ft(it),t=C(Me));let m=new xe(e=>t.onDestroy(e.next.bind(e)));return e=>e.pipe(M(m))}var nn=[[["","above-quill-editor-toolbar",""]],[["","quill-editor-toolbar",""]],[["","below-quill-editor-toolbar",""]]],on=["[above-quill-editor-toolbar]","[quill-editor-toolbar]","[below-quill-editor-toolbar]"];function rn(t,m){t&1&&d(0,"div",0)}function an(t,m){t&1&&d(0,"div",0)}var He=(t,m)=>t||m||"html",ln=()=>new xe(t=>{let m=requestAnimationFrame(()=>{t.next(),t.complete()});return()=>cancelAnimationFrame(m)}),sn=(()=>{class t{constructor(e,n){this.config=n,this.quill$=st(()=>Qe(this,null,function*(){if(!this.Quill){let i=this.document.addEventListener;this.document.addEventListener=this.document.__zone_symbol__addEventListener||this.document.addEventListener;let l=yield import("./chunk-QZRG2RY7.js");this.document.addEventListener=i,this.Quill=l.default?.default??l.default??l}return this.config.customOptions?.forEach(i=>{let l=this.Quill.import(i.import);l.whitelist=i.whitelist,this.Quill.register(l,!0,this.config.suppressGlobalRegisterWarning)}),yield this.registerCustomModules(this.Quill,this.config.customModules,this.config.suppressGlobalRegisterWarning)})).pipe(dt({bufferSize:1,refCount:!0})),this.document=e.get(tt),this.config||(this.config={modules:$e})}getQuill(){return this.quill$}registerCustomModules(e,n,i){return Qe(this,null,function*(){if(Array.isArray(n))for(let{implementation:l,path:u}of n)rt(l)&&(l=yield at(l)),e.register(u,l,i);return e})}static{this.\u0275fac=function(n){return new(n||t)(pe(Xe),pe(xi,8))}}static{this.\u0275prov=ye({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})(),cn=(()=>{class t{constructor(){this.format=b(void 0),this.theme=b(void 0),this.modules=b(void 0),this.debug=b(!1),this.readOnly=b(!1),this.placeholder=b(void 0),this.maxLength=b(void 0),this.minLength=b(void 0),this.required=b(!1),this.formats=b(void 0),this.customToolbarPosition=b("top"),this.sanitize=b(!1),this.beforeRender=b(void 0),this.styles=b(null),this.registry=b(void 0),this.bounds=b(void 0),this.customOptions=b([]),this.customModules=b([]),this.trackChanges=b(void 0),this.classes=b(void 0),this.trimOnValidation=b(!1),this.linkPlaceholder=b(void 0),this.compareValues=b(!1),this.filterNull=b(!1),this.debounceTime=b(void 0),this.defaultEmptyValue=b(null),this.onEditorCreated=new N,this.onEditorChanged=new N,this.onContentChanged=new N,this.onSelectionChanged=new N,this.onFocus=new N,this.onBlur=new N,this.onNativeFocus=new N,this.onNativeBlur=new N,this.disabled=!1,this.toolbarPosition=Ze("top"),this.subscription=null,this.quillSubscription=null,this.elementRef=C(fe),this.document=C(tt),this.cd=C(Et),this.domSanitizer=C(Lt),this.platformId=C(gt),this.renderer=C(Je),this.zone=C(Ke),this.service=C(sn),this.destroyRef=C(Me),this.valueGetter=b(e=>{let n=e.getSemanticHTML();this.isEmptyValue(n)&&(n=this.defaultEmptyValue());let i=n,l=He(this.format(),this.service.config.format);if(l==="text")i=e.getText();else if(l==="object")i=e.getContents();else if(l==="json")try{i=JSON.stringify(e.getContents())}catch{i=e.getText()}return i}),this.valueSetter=b((e,n)=>{let i=He(this.format(),this.service.config.format);if(i==="html")return([!0,!1].includes(this.sanitize())?this.sanitize():this.service.config.sanitize||!1)&&(n=this.domSanitizer.sanitize(vt.HTML,n)),e.clipboard.convert({html:n});if(i==="json")try{return JSON.parse(n)}catch{return[{insert:n}]}return n}),this.selectionChangeHandler=(e,n,i)=>{let l=this.trackChanges()||this.service.config.trackChanges,u=!e&&!!this.onModelTouched&&(i==="user"||l&&l==="all");!this.onBlur.observed&&!this.onFocus.observed&&!this.onSelectionChanged.observed&&!u||this.zone.run(()=>{e===null?this.onBlur.emit({editor:this.quillEditor,source:i}):n===null&&this.onFocus.emit({editor:this.quillEditor,source:i}),this.onSelectionChanged.emit({editor:this.quillEditor,oldRange:n,range:e,source:i}),u&&this.onModelTouched(),this.cd.markForCheck()})},this.textChangeHandler=(e,n,i)=>{let l=this.quillEditor.getText(),u=this.quillEditor.getContents(),S=this.quillEditor.getSemanticHTML();this.isEmptyValue(S)&&(S=this.defaultEmptyValue());let T=this.trackChanges()||this.service.config.trackChanges,ee=(i==="user"||T&&T==="all")&&!!this.onModelChange;!this.onContentChanged.observed&&!ee||this.zone.run(()=>{if(ee){let ve=this.valueGetter();this.onModelChange(ve(this.quillEditor))}this.onContentChanged.emit({content:u,delta:e,editor:this.quillEditor,html:S,oldDelta:n,source:i,text:l}),this.cd.markForCheck()})},this.editorChangeHandler=(e,n,i,l)=>{if(this.onEditorChanged.observed)if(e==="text-change"){let u=this.quillEditor.getText(),S=this.quillEditor.getContents(),T=this.quillEditor.getSemanticHTML();this.isEmptyValue(T)&&(T=this.defaultEmptyValue()),this.zone.run(()=>{this.onEditorChanged.emit({content:S,delta:n,editor:this.quillEditor,event:e,html:T,oldDelta:i,source:l,text:u}),this.cd.markForCheck()})}else this.zone.run(()=>{this.onEditorChanged.emit({editor:this.quillEditor,event:e,oldRange:i,range:n,source:l}),this.cd.markForCheck()})}}static normalizeClassNames(e){return e.trim().split(" ").reduce((i,l)=>{let u=l.trim();return u&&i.push(u),i},[])}ngOnInit(){this.toolbarPosition.set(this.customToolbarPosition())}ngAfterViewInit(){Dt(this.platformId)||(this.quillSubscription=this.service.getQuill().pipe(lt(e=>{let n=[this.service.registerCustomModules(e,this.customModules())],i=this.beforeRender()??this.service.config.beforeRender;return i&&n.push(i()),Promise.all(n).then(()=>e)})).subscribe(e=>{this.editorElem=this.elementRef.nativeElement.querySelector("[quill-editor-element]");let n=this.elementRef.nativeElement.querySelector("[quill-editor-toolbar]"),i=Object.assign({},this.modules()||this.service.config.modules);n?i.toolbar=n:i.toolbar===void 0&&(i.toolbar=$e.toolbar);let l=this.placeholder()!==void 0?this.placeholder():this.service.config.placeholder;l===void 0&&(l="Insert text here ...");let u=this.styles();u&&Object.keys(u).forEach(A=>{this.renderer.setStyle(this.editorElem,A,u[A])}),this.classes()&&this.addClasses(this.classes()),this.customOptions().forEach(A=>{let z=e.import(A.import);z.whitelist=A.whitelist,e.register(z,!0)});let S=this.bounds()&&this.bounds()==="self"?this.editorElem:this.bounds();S||(S=this.service.config.bounds?this.service.config.bounds:this.document.body);let T=this.debug();!T&&T!==!1&&this.service.config.debug&&(T=this.service.config.debug);let ee=this.readOnly();!ee&&this.readOnly()!==!1&&(ee=this.service.config.readOnly!==void 0?this.service.config.readOnly:!1);let ve=this.defaultEmptyValue;this.service.config.hasOwnProperty("defaultEmptyValue")&&(ve=this.service.config.defaultEmptyValue);let _e=this.formats();if(!_e&&_e===void 0&&(_e=this.service.config.formats?[...this.service.config.formats]:this.service.config.formats===null?null:void 0),this.zone.runOutsideAngular(()=>{if(this.quillEditor=new e(this.editorElem,{bounds:S,debug:T,formats:_e,modules:i,placeholder:l,readOnly:ee,defaultEmptyValue:ve,registry:this.registry(),theme:this.theme()||(this.service.config.theme?this.service.config.theme:"snow")}),this.onNativeBlur.observed&&(this.quillEditor.scroll.domNode.addEventListener("blur",()=>this.onNativeBlur.next({editor:this.quillEditor,source:"dom"})),this.quillEditor.getModule("toolbar").container?.addEventListener("mousedown",z=>z.preventDefault())),this.onNativeFocus.observed&&this.quillEditor.scroll.domNode.addEventListener("focus",()=>this.onNativeFocus.next({editor:this.quillEditor,source:"dom"})),this.linkPlaceholder()){let z=this.quillEditor?.theme?.tooltip?.root?.querySelector("input[data-link]");z?.dataset&&(z.dataset.link=this.linkPlaceholder())}}),this.content){if(He(this.format(),this.service.config.format)==="text")this.quillEditor.setText(this.content,"silent");else{let ki=this.valueSetter()(this.quillEditor,this.content);this.quillEditor.setContents(ki,"silent")}this.quillEditor.getModule("history").clear()}this.setDisabledState(),this.addQuillEventListeners(),!(!this.onEditorCreated.observed&&!this.onValidatorChanged)&&ln().pipe(it(this.destroyRef)).subscribe(()=>{this.onValidatorChanged&&this.onValidatorChanged(),this.onEditorCreated.emit(this.quillEditor)})}))}ngOnDestroy(){this.dispose(),this.quillSubscription?.unsubscribe(),this.quillSubscription=null}ngOnChanges(e){if(this.quillEditor){if(e.readOnly&&this.quillEditor.enable(!e.readOnly.currentValue),e.placeholder&&(this.quillEditor.root.dataset.placeholder=e.placeholder.currentValue),e.defaultEmptyValue&&(this.quillEditor.root.dataset.defaultEmptyValue=e.defaultEmptyValue.currentValue),e.styles){let n=e.styles.currentValue,i=e.styles.previousValue;i&&Object.keys(i).forEach(l=>{this.renderer.removeStyle(this.editorElem,l)}),n&&Object.keys(n).forEach(l=>{this.renderer.setStyle(this.editorElem,l,this.styles()[l])})}if(e.classes){let n=e.classes.currentValue,i=e.classes.previousValue;i&&this.removeClasses(i),n&&this.addClasses(n)}e.debounceTime&&this.addQuillEventListeners()}}addClasses(e){t.normalizeClassNames(e).forEach(n=>{this.renderer.addClass(this.editorElem,n)})}removeClasses(e){t.normalizeClassNames(e).forEach(n=>{this.renderer.removeClass(this.editorElem,n)})}writeValue(e){if(this.filterNull()&&e===null||(this.content=e,!this.quillEditor))return;let n=He(this.format(),this.service.config.format),l=this.valueSetter()(this.quillEditor,e);if(this.compareValues()){let u=this.quillEditor.getContents();if(JSON.stringify(u)===JSON.stringify(l))return}if(e){n==="text"?this.quillEditor.setText(e):this.quillEditor.setContents(l);return}this.quillEditor.setText("")}setDisabledState(e=this.disabled){this.disabled=e,this.quillEditor&&(e?(this.quillEditor.disable(),this.renderer.setAttribute(this.elementRef.nativeElement,"disabled","disabled")):(this.readOnly()||this.quillEditor.enable(),this.renderer.removeAttribute(this.elementRef.nativeElement,"disabled")))}registerOnChange(e){this.onModelChange=e}registerOnTouched(e){this.onModelTouched=e}registerOnValidatorChange(e){this.onValidatorChanged=e}validate(){if(!this.quillEditor)return null;let e={},n=!0,i=this.quillEditor.getText(),l=this.trimOnValidation()?i.trim().length:i.length===1&&i.trim().length===0?0:i.length-1,u=this.quillEditor.getContents().ops,S=!!u&&u.length===1&&[`
`,""].includes(u[0].insert?.toString());return this.minLength()&&l&&l<this.minLength()&&(e.minLengthError={given:l,minLength:this.minLength()},n=!1),this.maxLength()&&l>this.maxLength()&&(e.maxLengthError={given:l,maxLength:this.maxLength()},n=!1),this.required()&&!l&&S&&(e.requiredError={empty:!0},n=!1),n?null:e}addQuillEventListeners(){this.dispose(),this.zone.runOutsideAngular(()=>{this.subscription=new ot,this.subscription.add(Ce(this.quillEditor,"selection-change").subscribe(([i,l,u])=>{this.selectionChangeHandler(i,l,u)}));let e=Ce(this.quillEditor,"text-change"),n=Ce(this.quillEditor,"editor-change");typeof this.debounceTime()=="number"&&(e=e.pipe(ue(this.debounceTime())),n=n.pipe(ue(this.debounceTime()))),this.subscription.add(e.subscribe(([i,l,u])=>{this.textChangeHandler(i,l,u)})),this.subscription.add(n.subscribe(([i,l,u,S])=>{this.editorChangeHandler(i,l,u,S)}))})}dispose(){this.subscription!==null&&(this.subscription.unsubscribe(),this.subscription=null)}isEmptyValue(e){return e==="<p></p>"||e==="<div></div>"||e==="<p><br></p>"||e==="<div><br></div>"}static{this.\u0275fac=function(n){return new(n||t)}}static{this.\u0275dir=pt({type:t,inputs:{format:[1,"format"],theme:[1,"theme"],modules:[1,"modules"],debug:[1,"debug"],readOnly:[1,"readOnly"],placeholder:[1,"placeholder"],maxLength:[1,"maxLength"],minLength:[1,"minLength"],required:[1,"required"],formats:[1,"formats"],customToolbarPosition:[1,"customToolbarPosition"],sanitize:[1,"sanitize"],beforeRender:[1,"beforeRender"],styles:[1,"styles"],registry:[1,"registry"],bounds:[1,"bounds"],customOptions:[1,"customOptions"],customModules:[1,"customModules"],trackChanges:[1,"trackChanges"],classes:[1,"classes"],trimOnValidation:[1,"trimOnValidation"],linkPlaceholder:[1,"linkPlaceholder"],compareValues:[1,"compareValues"],filterNull:[1,"filterNull"],debounceTime:[1,"debounceTime"],defaultEmptyValue:[1,"defaultEmptyValue"],valueGetter:[1,"valueGetter"],valueSetter:[1,"valueSetter"]},outputs:{onEditorCreated:"onEditorCreated",onEditorChanged:"onEditorChanged",onContentChanged:"onContentChanged",onSelectionChanged:"onSelectionChanged",onFocus:"onFocus",onBlur:"onBlur",onNativeFocus:"onNativeFocus",onNativeBlur:"onNativeBlur"},features:[ht]})}}return t})(),Ci=(()=>{class t extends cn{static{this.\u0275fac=(()=>{let e;return function(i){return(e||(e=bt(t)))(i||t)}})()}static{this.\u0275cmp=E({type:t,selectors:[["quill-editor"]],standalone:!0,features:[yt([{multi:!0,provide:Zt,useExisting:Ge(()=>t)},{multi:!0,provide:ei,useExisting:Ge(()=>t)}]),xt,k],ngContentSelectors:on,decls:5,vars:2,consts:[["quill-editor-element",""]],template:function(n,i){n&1&&(Ct(nn),g(0,rn,1,0,"div",0),Se(1),Se(2,1),Se(3,2),g(4,an,1,0,"div",0)),n&2&&(f(i.toolbarPosition()!=="top"?0:-1),o(4),f(i.toolbarPosition()==="top"?4:-1))},styles:["[_nghost-%COMP%]{display:inline-block}"]})}}return t})();function un(t,m){if(t&1){let e=w();r(0,"span",19),h("click",function(){_(e);let i=p();return x(i.showCopyField("cc"))}),c(1," Cc "),a()}}function pn(t,m){if(t&1){let e=w();r(0,"span",20),h("click",function(){_(e);let i=p();return x(i.showCopyField("bcc"))}),c(1," Bcc "),a()}}function fn(t,m){t&1&&(r(0,"mat-form-field")(1,"mat-label"),c(2,"Cc"),a(),d(3,"input",6),a()),t&2&&(o(3),s("formControlName","cc"))}function hn(t,m){t&1&&(r(0,"mat-form-field")(1,"mat-label"),c(2,"Bcc"),a(),d(3,"input",6),a()),t&2&&(o(3),s("formControlName","bcc"))}var yi=(()=>{class t{constructor(e,n){this.matDialogRef=e,this._formBuilder=n,this.copyFields={cc:!1,bcc:!1},this.quillModules={toolbar:[["bold","italic","underline"],[{align:[]},{list:"ordered"},{list:"bullet"}],["clean"]]}}ngOnInit(){this.composeForm=this._formBuilder.group({to:["",[q.required,q.email]],cc:["",[q.email]],bcc:["",[q.email]],subject:[""],body:["",[q.required]]})}showCopyField(e){e!=="cc"&&e!=="bcc"||(this.copyFields[e]=!0)}saveAndClose(){this.saveAsDraft(),this.matDialogRef.close()}discard(){}saveAsDraft(){}send(){}static{this.\u0275fac=function(n){return new(n||t)(v(zt),v(Ne))}}static{this.\u0275cmp=E({type:t,selectors:[["mailbox-compose"]],standalone:!0,features:[k],decls:39,vars:17,consts:[[1,"-m-6","flex","max-h-screen","max-w-240","flex-col","md:min-w-160"],[1,"flex","h-16","flex-0","items-center","justify-between","bg-primary","pl-6","pr-3","text-on-primary","sm:pl-8","sm:pr-5"],[1,"text-lg","font-medium"],["mat-icon-button","",3,"click","tabIndex"],[1,"text-current",3,"svgIcon"],[1,"flex","flex-auto","flex-col","overflow-y-auto","p-6","sm:p-8",3,"formGroup"],["matInput","",3,"formControlName"],["matSuffix","",1,"copy-fields-toggles"],[1,"cursor-pointer","select-none","text-sm","font-medium","hover:underline"],[1,"ml-2","cursor-pointer","select-none","text-sm","font-medium","hover:underline"],[1,"mt-2",3,"formControlName","bounds","modules"],[1,"mt-4","flex","flex-col","justify-between","sm:mt-6","sm:flex-row","sm:items-center"],[1,"-ml-2"],["mat-icon-button",""],[1,"icon-size-5",3,"svgIcon"],[1,"mt-4","flex","items-center","sm:mt-0"],["mat-stroked-button","",1,"ml-auto","sm:ml-0",3,"click"],["mat-stroked-button","",1,"sm:mx-3",3,"click"],["mat-flat-button","",1,"order-first","sm:order-last",3,"click","color"],[1,"cursor-pointer","select-none","text-sm","font-medium","hover:underline",3,"click"],[1,"ml-2","cursor-pointer","select-none","text-sm","font-medium","hover:underline",3,"click"]],template:function(n,i){n&1&&(r(0,"div",0)(1,"div",1)(2,"div",2),c(3,"New Message"),a(),r(4,"button",3),h("click",function(){return i.saveAndClose()}),d(5,"mat-icon",4),a()(),r(6,"form",5)(7,"mat-form-field")(8,"mat-label"),c(9,"To"),a(),d(10,"input",6),r(11,"div",7),g(12,un,2,0,"span",8)(13,pn,2,0,"span",9),a()(),g(14,fn,4,1,"mat-form-field")(15,hn,4,1,"mat-form-field"),r(16,"mat-form-field")(17,"mat-label"),c(18,"Subject"),a(),d(19,"input",6),a(),d(20,"quill-editor",10),r(21,"div",11)(22,"div",12)(23,"button",13),d(24,"mat-icon",14),a(),r(25,"button",13),d(26,"mat-icon",14),a(),r(27,"button",13),d(28,"mat-icon",14),a(),r(29,"button",13),d(30,"mat-icon",14),a()(),r(31,"div",15)(32,"button",16),h("click",function(){return i.discard()}),c(33," Discard "),a(),r(34,"button",17),h("click",function(){return i.saveAsDraft()}),r(35,"span"),c(36,"Save as draft"),a()(),r(37,"button",18),h("click",function(){return i.send()}),c(38," Send "),a()()()()()),n&2&&(o(4),s("tabIndex",-1),o(),s("svgIcon","heroicons_outline:x-mark"),o(),s("formGroup",i.composeForm),o(4),s("formControlName","to"),o(2),f(i.copyFields.cc?-1:12),o(),f(i.copyFields.bcc?-1:13),o(),f(i.copyFields.cc?14:-1),o(),f(i.copyFields.bcc?15:-1),o(4),s("formControlName","subject"),o(),s("formControlName","body")("bounds","self")("modules",i.quillModules),o(4),s("svgIcon","heroicons_solid:paper-clip"),o(2),s("svgIcon","heroicons_solid:link"),o(2),s("svgIcon","heroicons_solid:face-smile"),o(2),s("svgIcon","heroicons_solid:photo"),o(7),s("color","primary"))},dependencies:[O,ae,Q,D,F,Ae,Oe,Le,Ve,Re,ze,qe,je,re,oe,Fe,De,se,le,Ci],encapsulation:2})}}return t})();var Mi=(()=>{class t{constructor(e,n,i){this._mailboxService=e,this._matDialog=n,this._fuseNavigationService=i,this.menuData=[],this._filtersMenuData=[],this._foldersMenuData=[],this._labelsMenuData=[],this._otherMenuData=[],this._unsubscribeAll=new B}ngOnInit(){this._mailboxService.filters$.pipe(M(this._unsubscribeAll)).subscribe(e=>{this.filters=e,this._generateFiltersMenuLinks()}),this._mailboxService.folders$.pipe(M(this._unsubscribeAll)).subscribe(e=>{this.folders=e,this._generateFoldersMenuLinks(),this._updateNavigationBadge(e)}),this._mailboxService.labels$.pipe(M(this._unsubscribeAll)).subscribe(e=>{this.labels=e,this._generateLabelsMenuLinks()}),this._generateOtherMenuLinks()}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}openComposeDialog(){this._matDialog.open(yi).afterClosed().subscribe(n=>{console.log("Compose dialog was closed!")})}_generateFoldersMenuLinks(){this._foldersMenuData=[],this.folders.forEach(e=>{let n={id:e.id,title:e.title,type:"basic",icon:e.icon,link:"/apps/mailbox/"+e.slug};e.count&&e.count>0&&(n.badge={title:e.count+""}),this._foldersMenuData.push(n)}),this._updateMenuData()}_generateFiltersMenuLinks(){this._filtersMenuData=[],this.filters.forEach(e=>{this._filtersMenuData.push({id:e.id,title:e.title,type:"basic",icon:e.icon,link:"/apps/mailbox/filter/"+e.slug})}),this._updateMenuData()}_generateLabelsMenuLinks(){this._labelsMenuData=[],this.labels.forEach(e=>{this._labelsMenuData.push({id:e.id,title:e.title,type:"basic",icon:"heroicons_outline:tag",classes:{icon:ce[e.color].text},link:"/apps/mailbox/label/"+e.slug})}),this._updateMenuData()}_generateOtherMenuLinks(){this._otherMenuData.push({title:"Settings",type:"basic",icon:"heroicons_outline:cog-8-tooth",link:"/apps/mailbox/settings"}),this._updateMenuData()}_updateMenuData(){this.menuData=[{title:"MAILBOXES",type:"group",children:[...this._foldersMenuData]},{title:"FILTERS",type:"group",children:[...this._filtersMenuData]},{title:"LABELS",type:"group",children:[...this._labelsMenuData]},{type:"spacer"},...this._otherMenuData]}_updateNavigationBadge(e){let n=this.folders.find(l=>l.slug==="inbox"),i=this._fuseNavigationService.getComponent("mainNavigation");if(i){let l=i.navigation,u=this._fuseNavigationService.getItem("apps.mailbox",l);u.badge.title=n.count+"",i.refresh()}}static{this.\u0275fac=function(n){return new(n||t)(v(I),v(Bt),v(Gt))}}static{this.\u0275cmp=E({type:t,selectors:[["mailbox-sidebar"]],standalone:!0,features:[k],decls:8,vars:6,consts:[[1,"flex","w-full","flex-auto","flex-col"],[1,"mx-6","mb-8","mt-10","text-4xl","font-extrabold","leading-none","tracking-tight"],["mat-flat-button","",1,"mx-6",3,"click","color"],[3,"svgIcon"],[1,"ml-2"],[3,"navigation","inner","mode","opened"]],template:function(n,i){n&1&&(r(0,"div",0)(1,"div",1),c(2," Mailbox "),a(),r(3,"button",2),h("click",function(){return i.openComposeDialog()}),d(4,"mat-icon",3),r(5,"span",4),c(6,"Compose"),a()(),d(7,"fuse-vertical-navigation",5),a()),n&2&&(o(3),s("color","primary"),o(),s("svgIcon","heroicons_outline:plus"),o(3),s("navigation",i.menuData)("inner",!0)("mode","side")("opened",!0))},dependencies:[O,ae,D,F,Kt],styles:[`mailbox-sidebar fuse-vertical-navigation .fuse-vertical-navigation-wrapper{box-shadow:none!important}
`],encapsulation:2})}}return t})();var bn=["drawer"],me=(()=>{class t{constructor(e){this._fuseMediaWatcherService=e,this.drawerMode="side",this.drawerOpened=!0,this._unsubscribeAll=new B}ngOnInit(){this._fuseMediaWatcherService.onMediaChange$.pipe(M(this._unsubscribeAll)).subscribe(({matchingAliases:e})=>{e.includes("md")?(this.drawerMode="side",this.drawerOpened=!0):(this.drawerMode="over",this.drawerOpened=!1)})}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}static{this.\u0275fac=function(n){return new(n||t)(v(Ht))}}static{this.\u0275cmp=E({type:t,selectors:[["mailbox"]],viewQuery:function(n,i){if(n&1&&X(bn,5),n&2){let l;Y(l=W())&&(i.drawer=l.first)}},standalone:!0,features:[k],decls:8,vars:2,consts:[["drawer",""],[1,"absolute","inset-0","flex","min-w-0","flex-col","overflow-hidden"],[1,"h-full","flex-auto"],[1,"w-72","dark:bg-gray-900",3,"mode","opened"],[1,"flex","flex-col","overflow-hidden"],[1,"flex","flex-auto","overflow-hidden"]],template:function(n,i){n&1&&(r(0,"div",1)(1,"mat-drawer-container",2)(2,"mat-drawer",3,0),d(4,"mailbox-sidebar"),a(),r(5,"mat-drawer-content",4)(6,"div",5),d(7,"router-outlet"),a()()()()),n&2&&(o(2),s("mode",i.drawerMode)("opened",i.drawerOpened))},dependencies:[ui,mi,di,ci,Mi,ke],encapsulation:2})}}return t})();var gn=["mailList"],nt=t=>[t],vn=(t,m)=>({"border-primary":t,"bg-primary-50 dark:bg-black dark:bg-opacity-5":m}),_n=(t,m)=>({"absolute inset-0 z-20 flex lg:static lg:inset-auto":t,"hidden lg:flex":m});function xn(t,m){t&1&&d(0,"mat-progress-bar",14),t&2&&s("mode","indeterminate")}function Cn(t,m){t&1&&d(0,"mat-icon",21),t&2&&s("svgIcon","heroicons_solid:exclamation-circle")}function yn(t,m){t&1&&d(0,"mat-icon",27),t&2&&s("svgIcon","heroicons_solid:paper-clip")}function Mn(t,m){t&1&&d(0,"mat-icon",28),t&2&&s("svgIcon","heroicons_solid:star")}function wn(t,m){if(t&1&&(r(0,"div",25),g(1,yn,1,1,"mat-icon",27)(2,Mn,1,1,"mat-icon",28),a()),t&2){let e=p().$implicit;o(),f(e.attachments&&e.attachments.length>0?1:-1),o(),f(e.starred?2:-1)}}function Sn(t,m){if(t&1){let e=w();r(0,"a",17),h("click",function(){let i=_(e).$implicit,l=p(2);return x(l.onMailSelected(i))}),r(1,"div",18)(2,"div",19)(3,"div",20),c(4),a(),g(5,Cn,1,1,"mat-icon",21),r(6,"div",22),c(7),ne(8,"date"),a()(),r(9,"div",23)(10,"span",24),c(11),a(),g(12,wn,3,2,"div",25),a(),r(13,"div",26),c(14),a()()()}if(t&2){let e=m.$implicit,n=p(2);s("routerLink",K(11,nt,e.id)),o(),s("ngClass",et(13,vn,e.unread,n.selectedMail&&n.selectedMail.id===e.id)),o(3),y(" ",e.from.contact.split("<")[0].trim()," "),o(),f(e.important?5:-1),o(2),y(" ",he(8,8,e.date,"LLL dd")," "),o(4),J(e.subject),o(),f(e.attachments&&e.attachments.length>0||e.starred?12:-1),o(2),y(" ",e.content,"... ")}}function En(t,m){if(t&1){let e=w();r(0,"div",2)(1,"div",5)(2,"div",6)(3,"button",7),h("click",function(){_(e);let i=p();return x(i.mailboxComponent.drawer.toggle())}),d(4,"mat-icon",8),a(),r(5,"div",9),c(6),a()(),r(7,"div",6)(8,"div",10)(9,"span"),c(10),a(),r(11,"span",11),c(12,"-"),a(),r(13,"span"),c(14),a(),r(15,"span",11),c(16,"of"),a(),r(17,"span"),c(18),a()(),r(19,"a",12),d(20,"mat-icon",13),a(),r(21,"a",12),d(22,"mat-icon",13),a()(),g(23,xn,1,1,"mat-progress-bar",14),a(),r(24,"div",15,0),V(26,Sn,15,16,"a",16,we().trackByFn,!0),a()()}if(t&2){let e=p();o(4),s("svgIcon","heroicons_outline:bars-3"),o(2),y(" ",e.category.name," "),o(4),J(e.pagination.startIndex+1),o(4),J(e.pagination.endIndex+1),o(4),J(e.pagination.totalResults),o(),s("disabled",e.pagination.currentPage===1)("routerLink",K(12,nt,"../"+(e.pagination.currentPage>1?e.pagination.currentPage-1:1))),o(),s("svgIcon","heroicons_solid:chevron-left"),o(),s("disabled",e.pagination.currentPage===e.pagination.lastPage)("routerLink",K(14,nt,"../"+(e.pagination.currentPage<e.pagination.lastPage?e.pagination.currentPage+1:e.pagination.lastPage))),o(),s("svgIcon","heroicons_solid:chevron-right"),o(),f(e.mailsLoading?23:-1),o(3),R(e.mails)}}function kn(t,m){t&1&&(r(0,"div",3),d(1,"mat-icon",29),r(2,"div",30),c(3," There are no e-mails "),a()()),t&2&&(o(),s("svgIcon","heroicons_outline:envelope"))}function In(t,m){if(t&1&&(r(0,"div",4),d(1,"router-outlet"),a()),t&2){let e=p();s("ngClass",et(1,_n,e.selectedMail&&e.selectedMail.id,!e.selectedMail||!e.selectedMail.id))}}var Si=(()=>{class t{constructor(e,n){this.mailboxComponent=e,this._mailboxService=n,this.mailsLoading=!1,this._unsubscribeAll=new B}ngOnInit(){this._mailboxService.category$.pipe(M(this._unsubscribeAll)).subscribe(e=>{this.category=e}),this._mailboxService.mails$.pipe(M(this._unsubscribeAll)).subscribe(e=>{this.mails=e}),this._mailboxService.mailsLoading$.pipe(M(this._unsubscribeAll)).subscribe(e=>{this.mailsLoading=e,this.mailList&&!e&&this.mailList.nativeElement.scrollTo(0,0)}),this._mailboxService.pagination$.pipe(M(this._unsubscribeAll)).subscribe(e=>{this.pagination=e}),this._mailboxService.mail$.pipe(M(this._unsubscribeAll)).subscribe(e=>{this.selectedMail=e})}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}onMailSelected(e){e.unread&&(e.unread=!1,this._mailboxService.updateMail(e.id,{unread:!1}).subscribe()),this._mailboxService.selectedMailChanged.next(e)}trackByFn(e,n){return n.id||e}static{this.\u0275fac=function(n){return new(n||t)(v(me),v(I))}}static{this.\u0275cmp=E({type:t,selectors:[["mailbox-list"]],viewQuery:function(n,i){if(n&1&&X(gn,5),n&2){let l;Y(l=W())&&(i.mailList=l.first)}},standalone:!0,features:[k],decls:4,vars:2,consts:[["mailList",""],[1,"bg-card","relative","flex","w-full","flex-auto","dark:bg-transparent"],[1,"relative","z-10","flex","w-full","min-w-0","flex-auto","flex-col","border-r","lg:min-w-90","lg:max-w-90"],[1,"z-100","absolute","inset-0","flex","flex-auto","flex-col","items-center","justify-center","bg-gray-100","dark:bg-transparent"],[1,"flex-auto",3,"ngClass"],[1,"relative","flex","h-16","flex-0","items-center","justify-between","border-b","bg-gray-50","px-4","dark:bg-transparent"],[1,"flex","items-center"],["mat-icon-button","",3,"click"],[3,"svgIcon"],[1,"ml-2","font-semibold","uppercase"],[1,"mr-3","flex","items-center","text-md","font-medium"],[1,"text-secondary","mx-1"],["mat-icon-button","",1,"h-8","min-h-8","w-8",3,"disabled","routerLink"],[1,"icon-size-5",3,"svgIcon"],[1,"absolute","inset-x-0","bottom-0","h-0.5",3,"mode"],[1,"overflow-y-auto"],[1,"relative","flex","border-t","hover:bg-hover","first:border-0",3,"routerLink"],[1,"relative","flex","border-t","hover:bg-hover","first:border-0",3,"click","routerLink"],[1,"flex","w-full","flex-col","items-start","justify-start","border-l-4","border-transparent","py-6","pl-5","pr-4",3,"ngClass"],[1,"flex","w-full","items-center"],[1,"mr-2","truncate","font-semibold"],[1,"mr-3","text-red-500","icon-size-4","dark:text-red-600",3,"svgIcon"],[1,"text-hint","ml-auto","whitespace-nowrap","text-right","text-md"],[1,"mt-1","flex","w-full","items-center"],[1,"truncate","leading-4"],[1,"ml-auto","flex","pl-2"],[1,"text-secondary","mt-2","line-clamp-2","leading-normal"],[1,"flex","justify-center","icon-size-4",3,"svgIcon"],[1,"ml-1","flex","justify-center","text-orange-500","icon-size-4","dark:text-orange-400",3,"svgIcon"],[1,"icon-size-24",3,"svgIcon"],[1,"text-secondary","mt-4","text-2xl","font-semibold","tracking-tight"]],template:function(n,i){n&1&&(r(0,"div",1),g(1,En,28,16,"div",2)(2,kn,4,1,"div",3)(3,In,2,4,"div",4),a()),n&2&&(o(),f(i.mails&&i.mails.length>0?1:2),o(2),f(i.mails&&i.mails.length>0?3:-1))},dependencies:[O,Te,Q,D,F,Ie,Ut,Qt,Z,ke,Ee],encapsulation:2})}}return t})();function Fn(t,m){t&1&&d(0,"mat-icon",21),t&2&&s("svgIcon","heroicons_outline:check")}function Dn(t,m){if(t&1&&(r(0,"mat-option",17,0),g(2,Fn,1,1,"mat-icon",21),d(3,"span",22),a()),t&2){let e=m.$implicit,n=ie(1),i=p();s("value",e),o(2),f(n.selected?2:-1),o(),s("ngClass",i.labelColorDefs[e].bg)}}function Tn(t,m){t&1&&d(0,"mat-icon",21),t&2&&s("svgIcon","heroicons_outline:check")}function Ln(t,m){if(t&1&&(r(0,"mat-option",17,0),g(2,Tn,1,1,"mat-icon",21),d(3,"span",22),a()),t&2){let e=m.$implicit,n=ie(1),i=p(2);s("value",e),o(2),f(n.selected?2:-1),o(),s("ngClass",i.labelColorDefs[e].bg)}}function Vn(t,m){if(t&1){let e=w();r(0,"mat-form-field",10),d(1,"input",23),r(2,"mat-select",24)(3,"mat-select-trigger",13),d(4,"mat-icon",14),a(),r(5,"div",15),c(6," Label color "),a(),r(7,"div",16),V(8,Ln,4,3,"mat-option",17,G),a()(),r(10,"button",25),h("click",function(){let i=_(e).$implicit,l=p();return x(l.deleteLabel(i.get("id").value))}),d(11,"mat-icon",19),a()()}if(t&2){let e=m.$implicit,n=p();o(),s("formControl",e.get("title")),o(),s("formControl",e.get("color"))("disableOptionCentering",!0),o(2),s("ngClass",n.labelColorDefs[e.get("color").value].text)("svgIcon","heroicons_outline:tag"),o(4),R(n.labelColors),o(3),s("svgIcon","heroicons_solid:trash")}}var Ei=(()=>{class t{constructor(e,n,i){this.mailboxComponent=e,this._formBuilder=n,this._mailboxService=i,this.labelColors=hi,this.labelColorDefs=ce}ngOnInit(){this.labelsForm=this._formBuilder.group({labels:this._formBuilder.array([]),newLabel:this._formBuilder.group({title:["",q.required],color:["orange"]})}),this._mailboxService.labels$.pipe($(1)).subscribe(e=>{this.labels=e,e.forEach(n=>{let i=this._formBuilder.group({id:[n.id],title:[n.title,q.required],slug:[n.slug],color:[n.color]});this.labelsForm.get("labels").push(i)})}),this.labelsForm.get("labels").valueChanges.pipe(ue(500)).subscribe(()=>{this.updateLabels()})}addLabel(){this._mailboxService.addLabel(this.labelsForm.get("newLabel").value).subscribe(e=>{this.labelsForm.get("labels").push(this._formBuilder.group({id:[e.id],title:[e.title,q.required],slug:[e.slug],color:[e.color]})),this.labelsForm.get("newLabel").markAsPristine(),this.labelsForm.get("newLabel").markAsUntouched(),this.labelsForm.get("newLabel.title").reset(),this.labelsForm.get("newLabel.title").clearValidators(),this.labelsForm.get("newLabel.title").updateValueAndValidity()})}deleteLabel(e){let n=this.labelsForm.get("labels");n.removeAt(n.value.findIndex(i=>i.id===e)),this._mailboxService.deleteLabel(e).subscribe()}updateLabels(){this.labelsForm.get("labels").controls.forEach(e=>{e.dirty&&this._mailboxService.updateLabel(e.value.id,e.value).subscribe()}),this.labelsForm.get("labels").markAsPristine(),this.labelsForm.get("labels").markAsUntouched()}static{this.\u0275fac=function(n){return new(n||t)(v(me),v(Ne),v(I))}}static{this.\u0275cmp=E({type:t,selectors:[["mailbox-settings"]],standalone:!0,features:[k],decls:29,vars:12,consts:[["matOption","matOption"],[1,"flex","flex-auto","flex-col","overflow-y-auto","p-8"],[1,"flex","items-center"],[1,"-ml-2","mr-3","md:hidden"],["mat-icon-button","",3,"click"],[3,"svgIcon"],[1,"text-3xl","font-extrabold","tracking-tight"],[1,"text-secondary"],[1,"mt-8",3,"formGroup"],[1,"mt-6","flex","w-full","max-w-80","items-center","justify-start",3,"formGroupName"],[1,"w-full"],["matInput","",3,"formControlName","placeholder"],["matPrefix","",3,"formControlName","disableOptionCentering"],[1,"h-6"],[3,"ngClass","svgIcon"],[1,"px-4","pt-5","text-xl","font-semibold"],[1,"mx-3","my-4","-mr-5","flex","w-48","flex-wrap"],[1,"relative","flex","h-12","w-12","cursor-pointer","rounded-full","bg-transparent","p-0",3,"value"],["mat-icon-button","","matSuffix","",3,"click","disabled"],[1,"icon-size-5",3,"svgIcon"],[1,"mt-4","flex","w-full","max-w-80","flex-col",3,"formArrayName"],[1,"absolute","m-3","text-white",3,"svgIcon"],[1,"m-1","flex","h-10","w-10","rounded-full",3,"ngClass"],["matInput","",3,"formControl"],["matPrefix","",3,"formControl","disableOptionCentering"],["mat-icon-button","","matSuffix","",3,"click"]],template:function(n,i){n&1&&(r(0,"div",1)(1,"div",2)(2,"div",3)(3,"button",4),h("click",function(){return i.mailboxComponent.drawer.toggle()}),d(4,"mat-icon",5),a()(),r(5,"div")(6,"div",6),c(7," Manage Labels "),a(),r(8,"div",7),c(9,"Create, update and delete labels"),a()()(),r(10,"form",8)(11,"div",9)(12,"mat-form-field",10)(13,"mat-label"),c(14,"New Label"),a(),d(15,"input",11),r(16,"mat-select",12)(17,"mat-select-trigger",13),d(18,"mat-icon",14),a(),r(19,"div",15),c(20," Label color "),a(),r(21,"div",16),V(22,Dn,4,3,"mat-option",17,G),a()(),r(24,"button",18),h("click",function(){return i.addLabel()}),d(25,"mat-icon",19),a()()(),r(26,"div",20),V(27,Vn,12,6,"mat-form-field",10,G),a()()()),n&2&&(o(4),s("svgIcon","heroicons_outline:bars-3"),o(6),s("formGroup",i.labelsForm),o(),s("formGroupName","newLabel"),o(4),s("formControlName","title")("placeholder","Label title"),o(),s("formControlName","color")("disableOptionCentering",!0),o(2),s("ngClass",i.labelColorDefs[i.labelsForm.get("newLabel.color").value].text)("svgIcon","heroicons_outline:tag"),o(4),R(i.labelColors),o(2),s("disabled",!i.labelsForm.get("newLabel").valid||!i.labelsForm.get("newLabel").dirty),o(),s("svgIcon","heroicons_solid:plus-circle"),o(),s("formArrayName","labels"),o(),R(i.labelsForm.get("labels").controls))},dependencies:[O,Q,D,F,Ae,Oe,Le,Ve,Re,ze,ti,qe,je,ii,ni,re,oe,Fe,Pt,De,se,le,si,ai,li,qt,Z,jt],encapsulation:2})}}return t})();var Rn=t=>{let m=t,e={};return t[0].path==="settings"?null:(t[0].path==="filter"||t[0].path==="label"?(e[t[0].path]=t[1],e.page=t[2],t[3]&&(m=t.slice(0,-1))):(e.folder=t[0],e.page=t[1],t[2]&&(m=t.slice(0,-1))),{consumed:m,posParams:e})},On=(t,m)=>{let e=t;for(;e.firstChild;)e=e.firstChild;let n=m;for(;n.firstChild;)n=n.firstChild;if(e.paramMap.get("id")&&!n.paramMap.get("id"))return!0;let i={},l={};return t.paramMap.keys.forEach(u=>{i[u]=t.paramMap.get(u)}),m.paramMap.keys.forEach(u=>{l[u]=m.paramMap.get(u)}),!$t(i,l)},qn=(t,m)=>{let e=C(I),n=C(be);if(t.paramMap.get("page")&&parseInt(t.paramMap.get("page"),10)<=0){let l=m.url.split("/").slice(0,-1).join("/")+"/1";return n.navigateByUrl(l),!1}let i=[];return t.paramMap.get("folder")&&i.push(e.getMailsByFolder(t.paramMap.get("folder"),t.paramMap.get("page"))),t.paramMap.get("filter")&&i.push(e.getMailsByFilter(t.paramMap.get("filter"),t.paramMap.get("page"))),t.paramMap.get("label")&&i.push(e.getMailsByLabel(t.paramMap.get("label"),t.paramMap.get("page"))),ct(i).pipe(mt(()=>{let l=t;for(;l.firstChild;)l=l.firstChild;l.paramMap.get("id")||e.resetMail().subscribe()}),Ue(l=>{console.error(l.message);let u=m.url.split("/").slice(0,-1).join("/")+"/"+l.pagination.lastPage;return n.navigateByUrl(u),P(l)}))},jn=(t,m)=>{let e=C(I),n=C(be);return e.getMailById(t.paramMap.get("id")).pipe(Ue(i=>{console.error(i);let l=m.url.split("/").slice(0,-1).join("/");return n.navigateByUrl(l),P(i)}))},$r=[{path:"",redirectTo:"inbox/1",pathMatch:"full"},{path:"filter/:filter",redirectTo:"filter/:filter/1",pathMatch:"full"},{path:"label/:label",redirectTo:"label/:label/1",pathMatch:"full"},{path:":folder",redirectTo:":folder/1",pathMatch:"full"},{path:"",component:me,resolve:{filters:()=>C(I).getFilters(),folders:()=>C(I).getFolders(),labels:()=>C(I).getLabels()},children:[{component:Si,matcher:Rn,runGuardsAndResolvers:On,resolve:{mails:qn},children:[{path:"",pathMatch:"full",component:_i},{path:":id",component:vi,resolve:{mail:jn}}]},{path:"settings",component:Ei}]}];export{$r as default};
