import{c as Ie,d as Ee}from"./chunk-HSKKO7RQ.js";import{a as Ge,s as Le}from"./chunk-R2G5O2T3.js";import{a as De}from"./chunk-WWD2L4QL.js";import{a as E,b as Fe}from"./chunk-33AQHTZ3.js";import{a as T}from"./chunk-FRHAXE5P.js";import"./chunk-KS76QDFS.js";import"./chunk-Y2TYLDF6.js";import"./chunk-ACKBNI47.js";import"./chunk-HC6MZPB3.js";import"./chunk-2QWWRY5H.js";import"./chunk-NMYJD6OP.js";import"./chunk-WIS6G6XT.js";import"./chunk-SV2ZKNWA.js";import"./chunk-U4MDP2GH.js";import"./chunk-RS5W3JWO.js";import"./chunk-BWQPWRAH.js";import"./chunk-OAQMJ7ML.js";import"./chunk-QDZ54ZJO.js";import"./chunk-OLKQPSEZ.js";import"./chunk-7D6K5XYM.js";import"./chunk-OBXDPQ3V.js";import"./chunk-XN53Y45H.js";import"./chunk-UYQ7EZNZ.js";import"./chunk-MCRJI3T3.js";import"./chunk-BAKMWPBW.js";import{a as B}from"./chunk-FDC45VUS.js";import{a as fe,b as _e,c as he,e as ve,f as Ce,h as be,i as we,k as ye,l as Se,n as xe,o as ke,p as Me}from"./chunk-QBWZ6CEK.js";import"./chunk-BRBHI7BQ.js";import"./chunk-OBBPMR2I.js";import"./chunk-AMQPVFGX.js";import"./chunk-KKCAABTQ.js";import"./chunk-B7J5UJF3.js";import"./chunk-F4H6ZFEG.js";import"./chunk-SV7S5NYR.js";import"./chunk-WTCPO44B.js";import{a as F}from"./chunk-4ZGOATSA.js";import{a as W,c as K,e as Z}from"./chunk-K6SJV66T.js";import"./chunk-AIL4DHVD.js";import"./chunk-56EIYY4C.js";import"./chunk-JIIP3X5D.js";import{d as ae}from"./chunk-6GRHLUW6.js";import"./chunk-YCUPTL4E.js";import"./chunk-DCIWF3NK.js";import"./chunk-N64NHRQD.js";import"./chunk-N34H76JM.js";import"./chunk-WCPJYO2Z.js";import{a as ge,b as pe}from"./chunk-7I5SQKLH.js";import{d as ue,e as ce}from"./chunk-BNZ6GVUN.js";import{a as J,b as X,i as Y,j as ee}from"./chunk-BVYLKFEF.js";import"./chunk-PPHX6Q7S.js";import{A as D,B as L,b as ne,d as H,f as oe,g as re,l as le,o as me,r as de,y as se}from"./chunk-EMGI2SSV.js";import{b as te,e as ie}from"./chunk-DPACH7O6.js";import{b as G,c as I}from"./chunk-IIOR2V55.js";import"./chunk-SFWQ4JHW.js";import"./chunk-DITXZIYA.js";import"./chunk-PTSJDPUO.js";import"./chunk-G5ULN3RC.js";import{f as z,h as U}from"./chunk-HZDJ65MY.js";import"./chunk-OAD3FQTP.js";import{j as Q,k,x as M}from"./chunk-MFIY2XVS.js";import{$b as S,Aa as q,Ba as O,Bb as m,Nb as a,Ob as o,Pb as c,Qb as w,Rb as y,Tb as A,Zb as p,db as l,dc as N,eb as u,ec as R,fc as j,hc as s,ic as V,jc as $,na as b,rc as x,sc as P,ya as _,za as h,zb as g}from"./chunk-ULGM77ZI.js";import{i as C}from"./chunk-7EPSDV5K.js";function $e(e,d){e&1&&(a(0,"div",11),c(1,"mat-spinner",12),o())}function Qe(e,d){e&1&&(a(0,"mat-error"),s(1," Nama Gudang wajib diisi "),o())}function ze(e,d){e&1&&(a(0,"mat-error"),s(1," Lokasi Gudang wajib diisi "),o())}var Te=(()=>{class e{constructor(i,n,t,r,f,v,Ne,Re){this.platform=i,this.fb=n,this._apiService=t,this.router=r,this.loadingController=f,this.fuseConfirmationService=v,this._tableUsersService=Ne,this.dialogRef=Re,this.isLoading=!1}ngOnInit(){this.gudangForm=this.fb.group({nama_gudang:["",H.required],lokasi_gudang:["",H.required]}),this.platform.backButton.subscribeWithPriority(10,()=>{this.router.navigate(["/dashboard/inventaris"])})}onNoClick(){this.dialogRef.close()}onSubmit(){return C(this,null,function*(){if(!this.gudangForm.valid){console.warn("Form tidak valid");return}this.isLoading=!0;try{let i={nama_gudang:this.gudangForm.value.nama_gudang,lokasi_gudang:this.gudangForm.value.lokasi_gudang},n=yield this._apiService.post("/gudang",i);console.log(n),this.dialogRef.close("refresh"),this._tableUsersService.fetchData()}catch(i){console.error("Gagal submit form",i)}finally{this.isLoading=!1}})}static{this.\u0275fac=function(n){return new(n||e)(u(Ge),u(se),u(T),u(U),u(Le),u(F),u(Ee),u(W))}}static{this.\u0275cmp=b({type:e,selectors:[["app-add-gudang"]],standalone:!0,features:[x],decls:18,vars:6,consts:[[1,"h-full","w-full"],["class","loading-overlay",4,"ngIf"],[1,"w-full",3,"click"],["svgIcon","mat_solid:close",1,"self-end"],[1,"overflow-y-auto",2,"max-height","80vh","padding-right","10px"],[1,"bg-card","mt-2","flex","flex-col","overflow-hidden","rounded-2xl","p-8","pb-4",3,"formGroup"],["floatLabel","always",1,"w-full","mb-2"],["matInput","","formControlName","nama_gudang","type","text","placeholder","Masukkan nama gudang"],[4,"ngIf"],["matInput","","formControlName","lokasi_gudang","type","text","placeholder","Masukkan lokasi gudang"],[1,"bg-green-600","text-white","p-2","rounded","mt-4",3,"click","disabled"],[1,"loading-overlay"],["diameter","50","color","primary"]],template:function(n,t){if(n&1&&(a(0,"div",0),g(1,$e,2,0,"div",1),a(2,"a",2),p("click",function(){return t.onNoClick()}),c(3,"mat-icon",3),o(),a(4,"div",4)(5,"form",5)(6,"mat-form-field",6)(7,"mat-label"),s(8,"Nama Gudang"),o(),c(9,"input",7),g(10,Qe,2,0,"mat-error",8),o(),a(11,"mat-form-field",6)(12,"mat-label"),s(13,"Lokasi Gudang"),o(),c(14,"input",9),g(15,ze,2,0,"mat-error",8),o(),a(16,"button",10),p("click",function(){return t.onSubmit()}),s(17),o()()()()),n&2){let r,f;l(),m("ngIf",t.isLoading),l(4),m("formGroup",t.gudangForm),l(5),m("ngIf",(r=t.gudangForm.get("nama_gudang"))==null?null:r.hasError("required")),l(5),m("ngIf",(f=t.gudangForm.get("lokasi_gudang"))==null?null:f.hasError("required")),l(),m("disabled",t.isLoading),l(),$(" ",t.isLoading?"Menyimpan...":"Simpan Gudang"," ")}},dependencies:[ee,Y,J,X,D,le,ne,oe,re,ce,ue,M,k,L,me,de,I,G,pe,ge]})}}return e})();var Ue=()=>[5,10,20],We=()=>[1,2,3,4,5,6];function Ke(e,d){e&1&&c(0,"div",24)}function Ze(e,d){e&1&&(a(0,"div",22),g(1,Ke,1,0,"div",23),o()),e&2&&(l(),m("ngForOf",P(1,We)))}function Je(e,d){e&1&&(a(0,"div")(1,"div",25),c(2,"img",26),a(3,"h1",27),s(4,"Data Tidak Ditemukan"),o()()())}function Xe(e,d){e&1&&(a(0,"mat-header-cell",38),s(1," Nama Gudang "),o())}function Ye(e,d){if(e&1&&(a(0,"mat-cell",39)(1,"h1",40),s(2),o()()),e&2){let i=d.$implicit;l(2),V(i.nama_gudang)}}function et(e,d){e&1&&(a(0,"mat-header-cell",38),s(1," Lokasi "),o())}function tt(e,d){if(e&1&&(a(0,"mat-cell",39)(1,"span"),s(2),o()()),e&2){let i=d.$implicit;l(2),V(i.lokasi_gudang)}}function it(e,d){e&1&&(a(0,"mat-header-cell"),s(1," Aksi "),o())}function at(e,d){if(e&1){let i=A();a(0,"mat-cell",41)(1,"a",42),p("click",function(){let t=_(i).$implicit,r=S(2);return h(r.deleteGudangById(t.id))}),c(2,"mat-icon",43),o(),a(3,"a",44),p("click",function(){let t=_(i).$implicit,r=S(2);return h(r.editGudang(t.id))}),c(4,"mat-icon",45),o()()}}function nt(e,d){e&1&&c(0,"mat-header-row")}function ot(e,d){e&1&&c(0,"mat-row")}function rt(e,d){if(e&1&&(a(0,"mat-table",28,2),w(2,29),g(3,Xe,2,0,"mat-header-cell",30)(4,Ye,3,1,"mat-cell",31),y(),w(5,32),g(6,et,2,0,"mat-header-cell",30)(7,tt,3,1,"mat-cell",31),y(),w(8,33),g(9,it,2,0,"mat-header-cell",34)(10,at,5,0,"mat-cell",35),y(),g(11,nt,1,0,"mat-header-row",36)(12,ot,1,0,"mat-row",37),o()),e&2){let i=S();m("dataSource",i.dataSource),l(11),m("matHeaderRowDef",i.displayedColumns),l(),m("matRowDefColumns",i.displayedColumns)}}var Ae=(()=>{class e{constructor(i,n,t,r){this.apiService=i,this.route=n,this.matDialog=t,this.fuseConfirmationService=r,this.displayedColumns=["nama_gudang","lokasi_gudang","action"],this.dataSource=new Me([]),this.isLoading=!1,this.isNotDataFound=!1,this.gudangList=[]}ngOnInit(){this.route.paramMap.subscribe(()=>{this.getGudang()})}getGudang(){return C(this,null,function*(){this.isLoading=!0,this.isNotDataFound=!1;try{let n=(yield this.apiService.get("/gudang",!0))??[];this.gudangList=n.map(t=>({id:t.id,nama_gudang:t.nama_gudang,lokasi_gudang:t.lokasi_gudang,createdAt:t.CreatedAt,updatedAt:t.UpdatedAt})),this.dataSource.data=this.gudangList,this.isNotDataFound=this.gudangList.length===0}catch(i){console.error("Gagal mengambil data gudang:",i),this.isNotDataFound=!0}finally{this.isLoading=!1}})}ngAfterViewInit(){this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort,this.dataSource.filterPredicate=(i,n)=>{let t=n.trim().toLowerCase();return i.nama_gudang?.toLowerCase().includes(t)||i.lokasi_gudang?.toLowerCase().includes(t)||i.createdAt?.toLowerCase().includes(t)}}onPageChange(i){this.dataSource.paginator=this.paginator}applySearchFilter(i){this.dataSource.filter=i.trim().toLowerCase(),this.dataSource.paginator&&this.dataSource.paginator.firstPage()}addNewGudang(){this.matDialog.open(Te,{width:window.innerWidth<600?"90%":"50%",maxWidth:"100vw"}).afterClosed().subscribe(n=>{n==="refresh"&&this.getGudang()})}deleteGudangById(i){this.fuseConfirmationService.open({title:"Konfirmasi Hapus",message:`Apakah Anda yakin ingin menghapus gudang dengan ID ${i}?`,actions:{confirm:{label:"Hapus"},cancel:{label:"Batal"}}}).afterClosed().subscribe(t=>C(this,null,function*(){if(t==="confirmed")try{yield this.apiService.delete(`/gudang/${i}`,!0),this.getGudang(),console.log(`Gudang dengan ID ${i} berhasil dihapus`)}catch(r){console.error("Gagal menghapus gudang:",r)}}))}static{this.\u0275fac=function(n){return new(n||e)(u(T),u(z),u(K),u(F))}}static{this.\u0275cmp=b({type:e,selectors:[["app-gudang"]],viewQuery:function(n,t){if(n&1&&(N(E,5),N(B,5)),n&2){let r;R(r=j())&&(t.paginator=r.first),R(r=j())&&(t.sort=r.first)}},standalone:!0,features:[x],decls:23,vars:12,consts:[["fuseCard",""],["paginator",""],["table",""],[1,"my-8","mb-10","w-full","mx-8"],[1,"flex","flex-col","shadow-md","border-[1px]"],[1,"truncate","text-lg","flex-col","sm:flex-row","font-medium","leading-6","tracking-tight","px-5","py-3","flex","items-start","sm:items-center","w-full","justify-between"],["for","table-search",1,"sr-only"],[1,"relative","my-2"],[1,"absolute","inset-y-0","start-0","flex","items-center","ps-3","pointer-events-none"],["aria-hidden","true","xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 20 20",1,"w-4","h-4","text-gray-500","dark:text-gray-400"],["stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","m19 19-4-4m0-7A7 7 0 1 1 1 8a7 7 0 0 1 14 0Z"],["type","text","matInput","","placeholder","Cari Gudang",1,"block","p-2","ps-10","text-sm","text-gray-900","border","border-gray-300","rounded-lg","bg-gray-50","focus:ring-blue-500","focus:border-blue-500","dark:bg-gray-700","dark:border-gray-600","dark:placeholder-gray-400","dark:text-white",3,"keyup","disabled"],[1,"flex","flex-col","sm:flex-row","items-start","sm:items-center","gap-3"],[1,"flex","items-center","gap-2"],["mat-flat-button","",3,"click","disabled","color"],[1,"icon-size-5",3,"svgIcon"],[1,"block","ml-2"],["role","status","class","p-5 animate-pulse",4,"ngIf"],[4,"ngIf"],[1,"w-full","overflow-auto","whitespace-nowrap"],["matSort","","class","min-w-180",3,"dataSource",4,"ngIf"],[3,"page","pageSize","length","pageSizeOptions","showFirstLastButtons"],["role","status",1,"p-5","animate-pulse"],["class","h-6 bg-gray-300 rounded-full dark:bg-gray-700 w-full mb-[22px]",4,"ngFor","ngForOf"],[1,"h-6","bg-gray-300","rounded-full","dark:bg-gray-700","w-full","mb-[22px]"],[1,"flex","flex-col","items-center"],["src","../../../../../assets/not-found.jpg","alt","not-found.jpg",1,"h-64","bg-cover","bg-center","object-scale-down"],[1,"mt-2","font-semibold","text-xl","-tracking-tighter"],["matSort","",1,"min-w-180",3,"dataSource"],["matColumnDef","nama_gudang"],["mat-sort-header","",4,"matHeaderCellDef"],["class","py-2",4,"matCellDef"],["matColumnDef","lokasi_gudang"],["matColumnDef","action"],[4,"matHeaderCellDef"],["class","px-2 sm:px-6 flex items-center",4,"matCellDef"],[4,"matHeaderRowDef"],[4,"matRowDef","matRowDefColumns"],["mat-sort-header",""],[1,"py-2"],[1,"text-base","font-medium"],[1,"px-2","sm:px-6","flex","items-center"],[1,"font-medium","mx-1","text-white","bg-red-500","hover:bg-red-600","rounded",3,"click"],["svgIcon","heroicons_solid:trash",1,"text-white",2,"transform","scale(0.7)"],[1,"font-medium","mx-1","text-white","bg-blue-500","hover:bg-blue-600","rounded",3,"click"],["svgIcon","heroicons_solid:pencil-square",1,"text-white",2,"transform","scale(0.7)"]],template:function(n,t){if(n&1){let r=A();a(0,"main",3)(1,"fuse-card",4,0)(3,"div",5)(4,"label",6),s(5,"Search"),o(),a(6,"div",7)(7,"div",8),q(),a(8,"svg",9),c(9,"path",10),o()(),O(),a(10,"input",11),p("keyup",function(v){return _(r),h(t.applySearchFilter(v.target.value))}),o()(),a(11,"div",12)(12,"div",13)(13,"a",14),p("click",function(){return _(r),h(t.addNewGudang())}),c(14,"mat-icon",15),a(15,"span",16),s(16,"Tambahkan Gudang"),o()()()()(),g(17,Ze,2,2,"div",17)(18,Je,5,0,"div",18),a(19,"div",19),g(20,rt,13,3,"mat-table",20),o(),a(21,"mat-paginator",21,1),p("page",function(v){return _(r),h(t.onPageChange(v))}),o()()()}n&2&&(l(10),m("disabled",t.isLoading),l(3),m("disabled",t.isLoading)("color","primary"),l(),m("svgIcon","add_business"),l(3),m("ngIf",t.isLoading),l(),m("ngIf",t.isNotDataFound&&!t.isLoading),l(2),m("ngIf",!t.isLoading&&!t.isNotDataFound),l(),m("pageSize",10)("length",t.dataSource.data.length)("pageSizeOptions",P(11,Ue))("showFirstLastButtons",!0))},dependencies:[ke,fe,he,we,ve,_e,ye,Ce,be,Se,xe,Fe,E,B,I,G,M,Q,k,De,L,ae,Ie,Z,D,ie,te]})}}return e})();var Ht=[{path:"",component:Ae}];export{Ht as default};
