import{c as Pe,d as Oe}from"./chunk-DPAB5KPQ.js";import{a as je,s as qe}from"./chunk-R2G5O2T3.js";import{a as Ue}from"./chunk-WWD2L4QL.js";import{a as j,b as Ve}from"./chunk-33AQHTZ3.js";import{a as P}from"./chunk-RNLVHR5B.js";import"./chunk-KS76QDFS.js";import"./chunk-Y2TYLDF6.js";import"./chunk-ACKBNI47.js";import"./chunk-HC6MZPB3.js";import"./chunk-2QWWRY5H.js";import"./chunk-NMYJD6OP.js";import"./chunk-WIS6G6XT.js";import"./chunk-SV2ZKNWA.js";import"./chunk-U4MDP2GH.js";import"./chunk-RS5W3JWO.js";import"./chunk-BWQPWRAH.js";import"./chunk-OAQMJ7ML.js";import"./chunk-QDZ54ZJO.js";import"./chunk-OLKQPSEZ.js";import"./chunk-7D6K5XYM.js";import"./chunk-OBXDPQ3V.js";import"./chunk-XN53Y45H.js";import"./chunk-UYQ7EZNZ.js";import"./chunk-MCRJI3T3.js";import"./chunk-BAKMWPBW.js";import{a as G}from"./chunk-FDC45VUS.js";import{a as Se,b as ye,c as xe,e as Le,f as Ae,h as Me,i as Ee,k as Fe,l as Ie,n as De,o as ke,p as Te}from"./chunk-QBWZ6CEK.js";import{a as Ne,c as Re}from"./chunk-BRBHI7BQ.js";import"./chunk-OBBPMR2I.js";import"./chunk-AMQPVFGX.js";import"./chunk-KKCAABTQ.js";import"./chunk-B7J5UJF3.js";import"./chunk-F4H6ZFEG.js";import"./chunk-SV7S5NYR.js";import"./chunk-WTCPO44B.js";import{a as T}from"./chunk-4ZGOATSA.js";import{a as te,c as ie,e as ae}from"./chunk-K6SJV66T.js";import"./chunk-AIL4DHVD.js";import"./chunk-56EIYY4C.js";import"./chunk-JIIP3X5D.js";import{d as de}from"./chunk-6GRHLUW6.js";import"./chunk-YCUPTL4E.js";import"./chunk-DCIWF3NK.js";import"./chunk-N64NHRQD.js";import"./chunk-N34H76JM.js";import"./chunk-WCPJYO2Z.js";import{a as be,b as we}from"./chunk-7I5SQKLH.js";import{d as ve,e as Ce}from"./chunk-BNZ6GVUN.js";import{a as re,b as oe,i as ne,j as le}from"./chunk-BVYLKFEF.js";import"./chunk-PPHX6Q7S.js";import{A as N,B as R,b as pe,d as h,f as ce,g as ue,l as fe,o as ge,r as _e,y as he}from"./chunk-EMGI2SSV.js";import{b as me,e as se}from"./chunk-DPACH7O6.js";import{b as D,c as k}from"./chunk-IIOR2V55.js";import{K as ee}from"./chunk-SFWQ4JHW.js";import"./chunk-DITXZIYA.js";import"./chunk-PTSJDPUO.js";import"./chunk-G5ULN3RC.js";import{f as X,h as Y}from"./chunk-HZDJ65MY.js";import"./chunk-OAD3FQTP.js";import{j as E,k as F,r as J,x as I}from"./chunk-MFIY2XVS.js";import{$b as U,Aa as z,Ba as Q,Bb as s,Bc as Z,Nb as r,Ob as a,Pb as u,Qb as C,Rb as b,Tb as V,Zb as g,db as l,dc as q,eb as c,ec as O,fc as H,hc as o,ic as y,jc as K,na as A,rc as M,sc as B,ya as w,za as S,zb as p,zc as W}from"./chunk-ULGM77ZI.js";import{i as v}from"./chunk-7EPSDV5K.js";function Je(e,n){e&1&&(r(0,"div",18),u(1,"mat-spinner",19),a())}function Xe(e,n){e&1&&(r(0,"mat-error"),o(1," Nama user wajib diisi "),a())}function Ye(e,n){e&1&&(r(0,"mat-error"),o(1," Email wajib diisi "),a())}function et(e,n){e&1&&(r(0,"mat-error"),o(1," Format email tidak valid "),a())}function tt(e,n){e&1&&(r(0,"mat-error"),o(1," Password wajib diisi "),a())}function it(e,n){if(e&1&&(r(0,"mat-option",20),o(1),a()),e&2){let t=n.$implicit;s("value",t.id),l(),K(" ",t.nama_divisi," ")}}function at(e,n){e&1&&(r(0,"mat-error"),o(1," Divisi wajib dipilih "),a())}function rt(e,n){e&1&&(r(0,"mat-error"),o(1," Role wajib dipilih "),a())}var He=(()=>{class e{constructor(t,m,i,d,_,f,x,L){this.platform=t,this.fb=m,this._apiService=i,this.router=d,this.loadingController=_,this.fuseConfirmationService=f,this._tableUsersService=x,this.dialogRef=L,this.isLoading=!1,this.divisiList=[]}ngOnInit(){this.userForm=this.fb.group({id_divisi:["",h.required],email:["",[h.required,h.email]],password:["",h.required],nama_user:["",h.required],role:["",h.required]}),this.getDivisiList()}getDivisiList(){return v(this,null,function*(){try{let t=yield this._apiService.get("/divisi",!0);this.divisiList=t.data||[]}catch(t){console.error("Failed to fetch divisi data",t),this.showErrorDialog("Gagal mengambil data divisi")}})}onNoClick(){this.dialogRef.close()}onSubmit(){return v(this,null,function*(){if(!this.userForm.valid){console.warn("Form tidak valid");return}this.isLoading=!0;try{let t={id_divisi:this.userForm.value.id_divisi,email:this.userForm.value.email,password:this.userForm.value.password,nama_user:this.userForm.value.nama_user,role:this.userForm.value.role},m=yield this._apiService.post("/user",t);console.log(m),this.dialogRef.close("refresh"),this._tableUsersService.fetchData()}catch(t){console.error("Gagal submit form",t)}finally{this.isLoading=!1}})}showErrorDialog(t){this.fuseConfirmationService.open({title:"Error",message:t,actions:{confirm:{label:"OK",color:"warn"},cancel:{show:!1}}})}static{this.\u0275fac=function(m){return new(m||e)(c(je),c(he),c(P),c(Y),c(qe),c(T),c(Oe),c(te))}}static{this.\u0275cmp=A({type:e,selectors:[["app-add-anggota-list"]],standalone:!0,features:[M],decls:41,vars:10,consts:[[1,"h-full","w-full"],["class","loading-overlay flex justify-center items-center absolute inset-0 bg-white bg-opacity-60 z-50",4,"ngIf"],[1,"w-full","flex","justify-end","p-2",3,"click"],["svgIcon","mat_solid:close"],[1,"overflow-y-auto",2,"max-height","80vh","padding-right","10px"],[1,"bg-card","mt-2","flex","flex-col","overflow-hidden","rounded-2xl","p-8","pb-4",3,"formGroup"],["floatLabel","always",1,"w-full","mb-4"],["matInput","","formControlName","nama_user","type","text","placeholder","Masukkan nama user"],[4,"ngIf"],["matInput","","formControlName","email","type","email","placeholder","Masukkan email"],["matInput","","formControlName","password","type","password","placeholder","Masukkan password"],["formControlName","id_divisi"],[3,"value",4,"ngFor","ngForOf"],["formControlName","role"],["value","Pegawai"],["value","Admin"],["value","Manager"],[1,"bg-green-600","text-white","p-2","rounded","mt-4",3,"click","disabled"],[1,"loading-overlay","flex","justify-center","items-center","absolute","inset-0","bg-white","bg-opacity-60","z-50"],["diameter","50","color","primary"],[3,"value"]],template:function(m,i){if(m&1&&(r(0,"div",0),p(1,Je,2,0,"div",1),r(2,"a",2),g("click",function(){return i.onNoClick()}),u(3,"mat-icon",3),a(),r(4,"div",4)(5,"form",5)(6,"mat-form-field",6)(7,"mat-label"),o(8,"Nama User"),a(),u(9,"input",7),p(10,Xe,2,0,"mat-error",8),a(),r(11,"mat-form-field",6)(12,"mat-label"),o(13,"Email"),a(),u(14,"input",9),p(15,Ye,2,0,"mat-error",8)(16,et,2,0,"mat-error",8),a(),r(17,"mat-form-field",6)(18,"mat-label"),o(19,"Password"),a(),u(20,"input",10),p(21,tt,2,0,"mat-error",8),a(),r(22,"mat-form-field",6)(23,"mat-label"),o(24,"Divisi"),a(),r(25,"mat-select",11),p(26,it,2,2,"mat-option",12),a(),p(27,at,2,0,"mat-error",8),a(),r(28,"mat-form-field",6)(29,"mat-label"),o(30,"Role"),a(),r(31,"mat-select",13)(32,"mat-option",14),o(33,"Pegawai"),a(),r(34,"mat-option",15),o(35,"Admin"),a(),r(36,"mat-option",16),o(37,"Manager"),a()(),p(38,rt,2,0,"mat-error",8),a(),r(39,"button",17),g("click",function(){return i.onSubmit()}),o(40," Simpan Anggota "),a()()()()),m&2){let d,_,f,x,L,$;l(),s("ngIf",i.isLoading),l(4),s("formGroup",i.userForm),l(5),s("ngIf",(d=i.userForm.get("nama_user"))==null?null:d.hasError("required")),l(5),s("ngIf",(_=i.userForm.get("email"))==null?null:_.hasError("required")),l(),s("ngIf",(f=i.userForm.get("email"))==null?null:f.hasError("email")),l(5),s("ngIf",(x=i.userForm.get("password"))==null?null:x.hasError("required")),l(5),s("ngForOf",i.divisiList),l(),s("ngIf",(L=i.userForm.get("id_divisi"))==null?null:L.hasError("required")),l(11),s("ngIf",($=i.userForm.get("role"))==null?null:$.hasError("required")),l(),s("disabled",i.isLoading||i.userForm.invalid)}},dependencies:[le,ne,re,oe,N,fe,pe,ce,ue,Ce,ve,I,E,F,R,ge,_e,k,D,we,be,Re,Ne,ee]})}}return e})();var ot=()=>[5,10,20],nt=()=>[1,2,3,4,5,6];function lt(e,n){e&1&&u(0,"div",24)}function mt(e,n){e&1&&(r(0,"div",22),p(1,lt,1,0,"div",23),a()),e&2&&(l(),s("ngForOf",B(1,nt)))}function st(e,n){e&1&&(r(0,"div")(1,"div",25),u(2,"img",26),r(3,"h1",27),o(4,"Data Tidak Ditemukan"),a()()())}function dt(e,n){e&1&&(r(0,"mat-header-cell",40),o(1," Nama "),a())}function pt(e,n){if(e&1&&(r(0,"mat-cell",41)(1,"h1",42),o(2),a()()),e&2){let t=n.$implicit;l(2),y(t.nama_user)}}function ct(e,n){e&1&&(r(0,"mat-header-cell",40),o(1," Email "),a())}function ut(e,n){if(e&1&&(r(0,"mat-cell",41)(1,"span"),o(2),a()()),e&2){let t=n.$implicit;l(2),y(t.email)}}function ft(e,n){e&1&&(r(0,"mat-header-cell",40),o(1," Role "),a())}function gt(e,n){if(e&1&&(r(0,"mat-cell",41)(1,"span"),o(2),a()()),e&2){let t=n.$implicit;l(2),y(t.role)}}function _t(e,n){e&1&&(r(0,"mat-header-cell",40),o(1," Dibuat "),a())}function ht(e,n){if(e&1&&(r(0,"mat-cell",41)(1,"span"),o(2),W(3,"date"),a()()),e&2){let t=n.$implicit;l(2),y(Z(3,1,t.createdAt,"mediumDate"))}}function vt(e,n){e&1&&(r(0,"mat-header-cell"),o(1," Aksi "),a())}function Ct(e,n){if(e&1){let t=V();r(0,"mat-cell",43)(1,"a",44),g("click",function(){let i=w(t).$implicit,d=U(2);return S(d.deleteUserById(i.id))}),u(2,"mat-icon",45),a()()}}function bt(e,n){e&1&&u(0,"mat-header-row")}function wt(e,n){e&1&&u(0,"mat-row")}function St(e,n){if(e&1&&(r(0,"mat-table",28,2),C(2,29),p(3,dt,2,0,"mat-header-cell",30)(4,pt,3,1,"mat-cell",31),b(),C(5,32),p(6,ct,2,0,"mat-header-cell",30)(7,ut,3,1,"mat-cell",31),b(),C(8,33),p(9,ft,2,0,"mat-header-cell",30)(10,gt,3,1,"mat-cell",31),b(),C(11,34),p(12,_t,2,0,"mat-header-cell",30)(13,ht,4,4,"mat-cell",31),b(),C(14,35),p(15,vt,2,0,"mat-header-cell",36)(16,Ct,3,0,"mat-cell",37),b(),p(17,bt,1,0,"mat-header-row",38)(18,wt,1,0,"mat-row",39),a()),e&2){let t=U();s("dataSource",t.dataSource),l(17),s("matHeaderRowDef",t.displayedColumns),l(),s("matRowDefColumns",t.displayedColumns)}}var Be=(()=>{class e{constructor(t,m,i,d){this.apiService=t,this.route=m,this.matDialog=i,this.fuseConfirmationService=d,this.displayedColumns=["nama_user","email","role","createdAt","action"],this.dataSource=new Te([]),this.isLoading=!1,this.isNotDataFound=!1,this.userList=[]}ngOnInit(){this.route.paramMap.subscribe(()=>{this.getUser()})}getUser(){return v(this,null,function*(){this.isLoading=!0,this.isNotDataFound=!1;try{let m=(yield this.apiService.get("/user",!0))??[];this.userList=m.map(i=>({id:i.id,email:i.email,nama_user:i.nama_user,role:i.role,createdAt:i.CreatedAt,updatedAt:i.UpdatedAt})),this.dataSource.data=this.userList,this.isNotDataFound=this.userList.length===0}catch(t){console.error("Gagal mengambil data user:",t),this.isNotDataFound=!0}finally{this.isLoading=!1}})}ngAfterViewInit(){this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort,this.dataSource.filterPredicate=(t,m)=>{let i=m.trim().toLowerCase();return t.nama_user?.toLowerCase().includes(i)||t.email?.toLowerCase().includes(i)||t.role?.toLowerCase().includes(i)}}applySearchFilter(t){this.dataSource.filter=t.trim().toLowerCase(),this.dataSource.paginator&&this.dataSource.paginator.firstPage()}deleteUserById(t){this.fuseConfirmationService.open({title:"Konfirmasi Hapus",message:`Apakah Anda yakin ingin menghapus user dengan ID ${t}?`,actions:{confirm:{label:"Hapus"},cancel:{label:"Batal"}}}).afterClosed().subscribe(i=>v(this,null,function*(){if(i==="confirmed")try{yield this.apiService.delete(`/user/${t}`,!0),this.getUser(),console.log(`User dengan ID ${t} berhasil dihapus`)}catch(d){console.error("Gagal menghapus user:",d)}}))}addNewUser(){this.matDialog.open(He,{width:window.innerWidth<600?"90%":"50%",maxWidth:"100vw"}).afterClosed().subscribe(m=>{m==="refresh"&&this.getUser()})}onPageChange(t){this.dataSource.paginator=this.paginator}static{this.\u0275fac=function(m){return new(m||e)(c(P),c(X),c(ie),c(T))}}static{this.\u0275cmp=A({type:e,selectors:[["app-anggota-list"]],viewQuery:function(m,i){if(m&1&&(q(j,5),q(G,5)),m&2){let d;O(d=H())&&(i.paginator=d.first),O(d=H())&&(i.sort=d.first)}},standalone:!0,features:[M],decls:23,vars:12,consts:[["fuseCard",""],["paginator",""],["table",""],[1,"my-8","mb-10","w-full","mx-8"],[1,"flex","flex-col","shadow-md","border-[1px]"],[1,"truncate","text-lg","flex-col","sm:flex-row","font-medium","leading-6","tracking-tight","px-5","py-3","flex","items-start","sm:items-center","w-full","justify-between"],["for","table-search",1,"sr-only"],[1,"relative","my-2"],[1,"absolute","inset-y-0","start-0","flex","items-center","ps-3","pointer-events-none"],["aria-hidden","true","fill","none","viewBox","0 0 20 20",1,"w-4","h-4","text-gray-500","dark:text-gray-400"],["stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","m19 19-4-4m0-7A7 7 0 1 1 1 8a7 7 0 0 1 14 0Z"],["type","text","matInput","","placeholder","Cari User",1,"block","p-2","ps-10","text-sm","text-gray-900","border","border-gray-300","rounded-lg","bg-gray-50","focus:ring-blue-500","focus:border-blue-500","dark:bg-gray-700","dark:border-gray-600","dark:placeholder-gray-400","dark:text-white",3,"keyup","disabled"],[1,"flex","flex-col","sm:flex-row","items-start","sm:items-center","gap-3"],[1,"flex","items-center","gap-2"],["mat-flat-button","",3,"click","disabled","color"],[1,"icon-size-5",3,"svgIcon"],[1,"block","ml-2"],["role","status","class","p-5 animate-pulse",4,"ngIf"],[4,"ngIf"],[1,"w-full","overflow-auto","whitespace-nowrap"],["matSort","","class","min-w-180",3,"dataSource",4,"ngIf"],[3,"page","pageSize","length","pageSizeOptions","showFirstLastButtons"],["role","status",1,"p-5","animate-pulse"],["class","h-6 bg-gray-300 rounded-full dark:bg-gray-700 w-full mb-[22px]",4,"ngFor","ngForOf"],[1,"h-6","bg-gray-300","rounded-full","dark:bg-gray-700","w-full","mb-[22px]"],[1,"flex","flex-col","items-center"],["src","assets/not-found.jpg","alt","not-found",1,"h-64","bg-cover","bg-center","object-scale-down"],[1,"mt-2","font-semibold","text-xl","-tracking-tighter"],["matSort","",1,"min-w-180",3,"dataSource"],["matColumnDef","nama_user"],["mat-sort-header","",4,"matHeaderCellDef"],["class","py-2",4,"matCellDef"],["matColumnDef","email"],["matColumnDef","role"],["matColumnDef","createdAt"],["matColumnDef","action"],[4,"matHeaderCellDef"],["class","px-2 sm:px-6 flex items-center",4,"matCellDef"],[4,"matHeaderRowDef"],[4,"matRowDef","matRowDefColumns"],["mat-sort-header",""],[1,"py-2"],[1,"text-base","font-medium"],[1,"px-2","sm:px-6","flex","items-center"],[1,"font-medium","mx-1","text-white","bg-red-500","hover:bg-red-600","rounded",3,"click"],["svgIcon","heroicons_solid:trash",1,"text-white",2,"transform","scale(0.7)"]],template:function(m,i){if(m&1){let d=V();r(0,"main",3)(1,"fuse-card",4,0)(3,"div",5)(4,"label",6),o(5,"Search"),a(),r(6,"div",7)(7,"div",8),z(),r(8,"svg",9),u(9,"path",10),a()(),Q(),r(10,"input",11),g("keyup",function(f){return w(d),S(i.applySearchFilter(f.target.value))}),a()(),r(11,"div",12)(12,"div",13)(13,"a",14),g("click",function(){return w(d),S(i.addNewUser())}),u(14,"mat-icon",15),r(15,"span",16),o(16,"Tambahkan User"),a()()()()(),p(17,mt,2,2,"div",17)(18,st,5,0,"div",18),r(19,"div",19),p(20,St,19,3,"mat-table",20),a(),r(21,"mat-paginator",21,1),g("page",function(f){return w(d),S(i.onPageChange(f))}),a()()()}m&2&&(l(10),s("disabled",i.isLoading),l(3),s("disabled",i.isLoading)("color","primary"),l(),s("svgIcon","person_add"),l(3),s("ngIf",i.isLoading),l(),s("ngIf",i.isNotDataFound&&!i.isLoading),l(2),s("ngIf",!i.isLoading&&!i.isNotDataFound),l(),s("pageSize",10)("length",i.dataSource.data.length)("pageSizeOptions",B(11,ot))("showFirstLastButtons",!0))},dependencies:[ke,Se,xe,Ee,Le,ye,Fe,Ae,Me,Ie,De,Ve,j,G,k,D,I,E,F,J,Ue,R,de,Pe,ae,N,se,me]})}}return e})();var oi=[{path:"",component:Be}];export{oi as default};
