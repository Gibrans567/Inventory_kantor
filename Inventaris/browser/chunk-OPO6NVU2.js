import{a as Pe}from"./chunk-FQUKENDU.js";import"./chunk-SMPCWE35.js";import{a as Ae}from"./chunk-NYYNMKJN.js";import{a as Ne,c as Ve,d as He}from"./chunk-LY2FDVHB.js";import"./chunk-R2G5O2T3.js";import{a as Be}from"./chunk-WWD2L4QL.js";import{a as B,b as R}from"./chunk-33AQHTZ3.js";import{a as Re}from"./chunk-5E3ELC3N.js";import"./chunk-KS76QDFS.js";import"./chunk-Y2TYLDF6.js";import"./chunk-ACKBNI47.js";import"./chunk-HC6MZPB3.js";import"./chunk-2QWWRY5H.js";import"./chunk-NMYJD6OP.js";import"./chunk-WIS6G6XT.js";import"./chunk-SV2ZKNWA.js";import"./chunk-U4MDP2GH.js";import"./chunk-RS5W3JWO.js";import"./chunk-BWQPWRAH.js";import"./chunk-OAQMJ7ML.js";import"./chunk-QDZ54ZJO.js";import"./chunk-OLKQPSEZ.js";import"./chunk-7D6K5XYM.js";import"./chunk-OBXDPQ3V.js";import"./chunk-XN53Y45H.js";import"./chunk-UYQ7EZNZ.js";import"./chunk-MCRJI3T3.js";import"./chunk-BAKMWPBW.js";import{a as N,b as Fe,c as V}from"./chunk-FDC45VUS.js";import{a as we,b as xe,c as Ce,e as Se,f as ye,h as Me,i as Ie,k as Te,l as ke,n as De,o as L,p as Ee}from"./chunk-QBWZ6CEK.js";import{c as Le}from"./chunk-BRBHI7BQ.js";import"./chunk-OBBPMR2I.js";import"./chunk-AMQPVFGX.js";import"./chunk-KKCAABTQ.js";import"./chunk-B7J5UJF3.js";import"./chunk-F4H6ZFEG.js";import"./chunk-SV7S5NYR.js";import"./chunk-WTCPO44B.js";import{a as se}from"./chunk-4ZGOATSA.js";import{c as ie}from"./chunk-K6SJV66T.js";import"./chunk-AIL4DHVD.js";import"./chunk-56EIYY4C.js";import"./chunk-JIIP3X5D.js";import{a as me,b as ce,c as de,d as pe}from"./chunk-6GRHLUW6.js";import"./chunk-GBBGNRVD.js";import"./chunk-YCUPTL4E.js";import"./chunk-DCIWF3NK.js";import"./chunk-N64NHRQD.js";import"./chunk-N34H76JM.js";import"./chunk-WCPJYO2Z.js";import{a as ve,b as be}from"./chunk-AOYF6QNZ.js";import"./chunk-7I5SQKLH.js";import{d as ge,e as F}from"./chunk-BNZ6GVUN.js";import{j as ae}from"./chunk-BVYLKFEF.js";import"./chunk-PPHX6Q7S.js";import{A as _e,B as he,f as ue,k as fe}from"./chunk-EMGI2SSV.js";import{a as ne,b as re,e as E}from"./chunk-DPACH7O6.js";import{b as oe,c as le}from"./chunk-IIOR2V55.js";import"./chunk-SFWQ4JHW.js";import"./chunk-DITXZIYA.js";import"./chunk-PTSJDPUO.js";import"./chunk-G5ULN3RC.js";import{i as D}from"./chunk-HZDJ65MY.js";import"./chunk-OAD3FQTP.js";import{j as X,k as Y,r as ee,w as te,x as k}from"./chunk-MFIY2XVS.js";import{$b as M,Aa as W,Ba as J,Bb as c,Bc as K,Dc as j,Nb as a,Ob as n,Pb as d,Qb as h,Rb as g,Tb as y,Uc as Z,Zb as v,db as m,dc as P,eb as w,ec as A,fc as q,gc as O,hc as s,ic as $,jc as b,na as S,nc as Q,oc as z,pc as G,rc as I,sc as x,tc as U,ya as f,za as _,zb as p,zc as T}from"./chunk-ULGM77ZI.js";import{i as C}from"./chunk-7EPSDV5K.js";var je=()=>({disableClose:!0}),We=()=>[5,10,20],Je=t=>["edit-user",t],Qe=t=>["view-detail",t];function ze(t,l){if(t&1){let e=y();a(0,"div",15)(1,"mat-checkbox",36),G("ngModelChange",function(i){let o=f(e).$implicit;return z(o.checked,i)||(o.checked=i),_(i)}),v("click",function(i){return f(e),_(i.stopPropagation())})("change",function(){f(e);let i=M();return _(i.applyFilterUserProfile())}),a(2,"span",37),s(3),n()()()}if(t&2){let e=l.$implicit;m(),Q("ngModel",e.checked),m(2),$(e.name)}}function Ge(t,l){t&1&&(a(0,"div",38),d(1,"div",39)(2,"div",39)(3,"div",39)(4,"div",39)(5,"div",39)(6,"div",39)(7,"div",40),n())}function Ke(t,l){t&1&&(a(0,"div")(1,"div",41),d(2,"img",42),a(3,"h1",43),s(4,"Data Not Found"),n()()())}function Ze(t,l){t&1&&(a(0,"mat-header-cell",58),s(1," Tanggal Masuk Barang "),n())}function Xe(t,l){if(t&1&&(a(0,"mat-cell",59)(1,"h1",60),s(2),T(3,"date"),n()()),t&2){let e=l.$implicit;m(2),$(K(3,1,e.tanggal_pembelian,"dd MMMM yyyy, HH:mm:ss"))}}function Ye(t,l){t&1&&(a(0,"mat-header-cell",58),s(1," Nama Barang "),n())}function et(t,l){if(t&1&&(a(0,"mat-cell"),s(1),n()),t&2){let e=l.$implicit;m(),b(" ",e.nama_barang,"")}}function tt(t,l){t&1&&(a(0,"mat-header-cell",58),s(1," Nama Divisi "),n())}function it(t,l){if(t&1&&(a(0,"mat-cell"),s(1),n()),t&2){let e=l.$implicit;m(),b(" ",e.nama_divisi," ")}}function at(t,l){t&1&&(a(0,"mat-header-cell",58),s(1," Harga Pembelian "),n())}function nt(t,l){if(t&1&&(a(0,"mat-cell"),s(1),T(2,"currency"),n()),t&2){let e=l.$implicit;m(),b(" ",j(2,1,e.harga_pembelian,"IDR ","symbol","1.0-0")," ")}}function rt(t,l){t&1&&(a(0,"mat-header-cell",58),s(1," Jumlah Barang "),n())}function ot(t,l){if(t&1&&(a(0,"mat-cell"),s(1),n()),t&2){let e=l.$implicit;m(),b(" ",e.qty_barang," ")}}function lt(t,l){t&1&&(a(0,"mat-header-cell",58),s(1," Total Harga "),n())}function st(t,l){if(t&1&&(a(0,"mat-cell"),s(1),T(2,"currency"),n()),t&2){let e=l.$implicit;m(),b(" ",j(2,1,e.total_nilai,"IDR ","symbol","1.0-0")," ")}}function mt(t,l){t&1&&(a(0,"mat-header-cell",58),s(1," Action "),n())}function ct(t,l){if(t&1){let e=y();a(0,"mat-cell",61)(1,"a",62),v("click",function(){let i=f(e).$implicit,o=M(2);return _(o.deleteInventaris(i.id))}),d(2,"mat-icon",63),n(),a(3,"a",64),d(4,"mat-icon",65),n(),a(5,"a",66),d(6,"mat-icon",67),n()()}if(t&2){let e=l.$implicit;m(3),c("routerLink",U(2,Je,e.name)),m(2),c("routerLink",U(4,Qe,e.id))}}function dt(t,l){t&1&&d(0,"mat-header-row")}function pt(t,l){t&1&&d(0,"mat-row")}function ut(t,l){if(t&1&&(a(0,"mat-table",44,4),h(2,45),p(3,Ze,2,0,"mat-header-cell",46)(4,Xe,4,4,"mat-cell",47),g(),h(5,48),p(6,Ye,2,0,"mat-header-cell",46)(7,et,2,1,"mat-cell",49),g(),h(8,50),p(9,tt,2,0,"mat-header-cell",46)(10,it,2,1,"mat-cell",49),g(),h(11,51),p(12,at,2,0,"mat-header-cell",46)(13,nt,3,6,"mat-cell",49),g(),h(14,52),p(15,rt,2,0,"mat-header-cell",46)(16,ot,2,1,"mat-cell",49),g(),h(17,53),p(18,lt,2,0,"mat-header-cell",46)(19,st,3,6,"mat-cell",49),g(),h(20,54),p(21,mt,2,0,"mat-header-cell",46)(22,ct,7,6,"mat-cell",55),g(),p(23,dt,1,0,"mat-header-row",56)(24,pt,1,0,"mat-row",57),n()),t&2){let e=M();c("dataSource",e.dataSource),m(23),c("matHeaderRowDef",e.displayedColumns),m(),c("matRowDefColumns",e.displayedColumns)}}var qe=(()=>{class t{constructor(e,r,i,o){this.fuseConfirmationService=e,this._matDialog=r,this.apiService=i,this._tableUserService=o,this.displayedColumns=["tanggal_pembelian","nama_barang","nama_divisi","harga_pembelian","qty_barang","total_nilai","action"],this.dataSource=new Ee([]),this.isLoading=!1,this.isNotDataFound=!1,this.filterValues={divisi:[],search:""},this.divisiItems=[],Z(()=>{this.dataSource.data=this._tableUserService.inventoryItems(),this.isNotDataFound=this._tableUserService.isNotFound()})}ngOnInit(){this._tableUserService.fetchData(),this.getdivisi(),this.dataSource.sortingDataAccessor=(e,r)=>{switch(r){case"tanggal_pembelian":return new Date(e.tanggal_pembelian);case"harga_pembelian":return this.parseCurrency(e.harga_pembelian);case"total_nilai":case"total_harga":return this.parseCurrency(e.total_nilai||e.total_harga);case"qty_barang":case"qty":return Number(e.qty_barang||e.qty);default:return e[r]}}}parseCurrency(e){return e?Number(e.replace(/[^\d]/g,"")):0}getdivisi(){return C(this,null,function*(){try{let e=yield this.apiService.get("/divisi",!0),r=new Set;this.divisiItems=[],e.data.forEach(i=>{i.nama_divisi&&!r.has(i.nama_divisi)&&(r.add(i.nama_divisi),this.divisiItems.push({name:i.nama_divisi,checked:!1}))})}catch(e){console.error("Failed to fetch data:",e)}})}get user(){return this._tableUserService.inventoryItems()}get isNotFound(){return this._tableUserService.isNotFound()}ngAfterViewInit(){this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort,this.dataSource.filterPredicate=(e,r)=>{let i=JSON.parse(r),o=i.search.toLowerCase(),u=i.divisi||[],H=!o||e.nama_barang.toLowerCase().includes(o)||e.nama_divisi.toLowerCase().includes(o),$e=u.length===0||u.includes(e.nama_divisi.toLowerCase());return H&&$e},this.dataSource.sortingDataAccessor=(e,r)=>{switch(r){case"harga_pembelian":return e.harga_pembelian;case"total_nilai":return e.total_nilai;case"qty_barang":return e.qty_barang;case"tanggal_pembelian":return new Date(e.tanggal_pembelian);default:return e[r]}}}TambahBarang(){this._matDialog.open(Pe,{width:window.innerWidth<600?"90%":"50%",maxWidth:"100vw"})}applyFilter(){this.dataSource.filterPredicate=(e,r)=>{let i=JSON.parse(r),o=i.search===""||e.nama_barang.toLowerCase().includes(i.search)||e.nama_divisi.toLowerCase().includes(i.search),u=!0;return i.divisi&&i.divisi.length>0&&(u=i.divisi.includes(e.nama_divisi.toLowerCase())),o&&u},this.dataSource.filter=JSON.stringify(this.filterValues),this.isNotDataFound=this.dataSource.filteredData.length===0}applySearchFilter(e){this.filterValues.search=e.trim().toLowerCase(),this.dataSource.filter=JSON.stringify(this.filterValues),this.dataSource.paginator&&this.dataSource.paginator.firstPage(),this.isNotDataFound=this.dataSource.filteredData.length===0}applyFilterUserProfile(){this.filterValues.divisi=this.divisiItems.filter(e=>e.checked).map(e=>e.name.toLowerCase()),this.dataSource.filter=JSON.stringify(this.filterValues),this.dataSource.paginator&&this.dataSource.paginator.firstPage(),this.isNotDataFound=this.dataSource.filteredData.length===0}addNewDivision(){this._matDialog.open(Ae,{width:window.innerWidth<600?"90%":"50%",maxWidth:"100vw"}).afterClosed().subscribe(r=>{r==="refresh"&&this.getdivisi()})}deleteSelectedDivisi(){let e=this.divisiItems.filter(i=>i.checked);if(e.length===0){console.log("No divisi selected for deletion");return}this.fuseConfirmationService.open({title:"Konfirmasi Hapus",message:`Apakah Anda yakin ingin menghapus ${e.length} divisi yang dipilih?`,actions:{confirm:{label:"Hapus"},cancel:{label:"Batal"}}}).afterClosed().subscribe(i=>C(this,null,function*(){if(i==="confirmed")try{for(let o of e)yield this.apiService.delete(`/divisi/${o.name}`,!0);this.divisiItems=this.divisiItems.filter(o=>!o.checked),this.getdivisi(),this._tableUserService.fetchData(),console.log(`${e.length} divisi berhasil dihapus`)}catch(o){console.error("Gagal menghapus divisi",o)}}))}deleteInventaris(e){this.fuseConfirmationService.open({title:"Konfirmasi",message:"Apakah Anda yakin ingin menghapus inventaris ini?",icon:{name:"heroicons_outline:trash",color:"warn"},actions:{confirm:{label:"Hapus",color:"warn"},cancel:{label:"Batal"}}}).afterClosed().subscribe(i=>C(this,null,function*(){if(i==="confirmed")try{let o=yield this.apiService.delete(`/inventaris/${e}`,!0);console.log("Inventaris berhasil dihapus:",o),this._tableUserService.fetchData(),this.showSuccessDialog("Inventaris berhasil dihapus")}catch(o){console.error("Gagal menghapus inventaris:",o),this.showErrorDialog("Gagal menghapus inventaris")}else console.log("Penghapusan dibatalkan")}))}showSuccessDialog(e){this.fuseConfirmationService.open({title:"Berhasil",message:e,icon:{name:"heroicons_outline:check-circle",color:"success"},actions:{confirm:{label:"OK",color:"primary"},cancel:{show:!1}},dismissible:!0})}showErrorDialog(e){this.fuseConfirmationService.open({title:"Gagal",message:e,icon:{name:"heroicons_outline:x-circle",color:"error"},actions:{confirm:{label:"OK",color:"primary"},cancel:{show:!1}},dismissible:!0})}static{this.\u0275fac=function(r){return new(r||t)(w(se),w(ie),w(Re),w(He))}}static{this.\u0275cmp=S({type:t,selectors:[["app-table-inventaris"]],viewQuery:function(r,i){if(r&1&&(P(B,5),P(N,5)),r&2){let o;A(o=q())&&(i.paginator=o.first),A(o=q())&&(i.sort=o.first)}},standalone:!0,features:[I],decls:49,vars:18,consts:[["fuseCard",""],["menu","matMenu"],["products","matMenu"],["paginator",""],["table",""],[1,"my-4","mb-10"],[1,"flex","flex-col","shadow-md","border-[1px]"],[1,"truncate","text-lg","flex-col","sm:flex-row","font-medium","leading-6","tracking-tight","px-5","py-3","flex","items-start","sm:items-center","w-full","justify-between"],["for","table-search",1,"sr-only"],[1,"relative","my-2"],[1,"absolute","inset-y-0","rtl:inset-r-0","start-0","flex","items-center","ps-3","pointer-events-none"],["aria-hidden","true","xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 20 20",1,"w-4","h-4","text-gray-500","dark:text-gray-400"],["stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","m19 19-4-4m0-7A7 7 0 1 1 1 8a7 7 0 0 1 14 0Z"],["type","text","matInput","","placeholder","Cari Barang",1,"block","p-2","ps-10","text-sm","text-gray-900","border","border-gray-300","rounded-lg","bg-gray-50","focus:ring-blue-500","focus:border-blue-500","dark:bg-gray-700","dark:border-gray-600","dark:placeholder-gray-400","dark:text-white","dark:focus:ring-blue-500","dark:focus:border-blue-500",3,"keyup","disabled"],[1,"flex","flex-col","sm:flex-row","items-start","sm:items-center","gap-3"],[1,"flex","items-center","gap-2"],["mat-flat-button","",3,"click","disabled","color"],[1,"icon-size-5",3,"svgIcon"],[1,"block","ml-2"],[1,"flex","items-center","gap-2","p-2.5","rounded-full","px-3","sm:px-5","border-[1px]","text-white",3,"matMenuTriggerFor","disabled"],["svgIcon","filter_alt"],[1,"max-sm:hidden","text-base","font-semibold","text-black"],["svgIcon","keyboard_arrow_down"],["mat-menu-item","",3,"matMenuTriggerFor","matMenuTriggerData"],[1,"px-5","py-3"],[1,"font-semibold","mb-2"],[1,"px-5","py-2","min-w-[200px]"],["class","flex items-center gap-2",4,"ngFor","ngForOf"],["mat-flat-button","","color","primary",1,"w-full",3,"click"],[1,"mr-2"],["mat-flat-button","","color","warn",1,"w-full",3,"click"],["role","status","class","p-5 animate-pulse",4,"ngIf"],[4,"ngIf"],[1,"w-full","overflow-auto","whitespace-nowrap"],["matSort","","class","min-w-180",3,"dataSource",4,"ngIf"],[3,"pageSize","length","pageSizeOptions","showFirstLastButtons"],[1,"w-full",3,"ngModelChange","click","change","ngModel"],[1,"truncate","block"],["role","status",1,"p-5","animate-pulse"],[1,"h-6","bg-gray-300","rounded-full","dark:bg-gray-700","w-full","mb-[22px]"],[1,"h-6","bg-gray-300","rounded-full","dark:bg-gray-700","w-full"],[1,"flex","flex-col","items-center"],["src","../../../../../assets/not-found.jpg","alt","not-found.jpg",1,"h-64","bg-cover","bg-center","object-scale-down"],[1,"mt-2","font-semibold","text-xl","-tracking-tighter"],["matSort","",1,"min-w-180",3,"dataSource"],["matColumnDef","tanggal_pembelian"],["mat-sort-header","",4,"matHeaderCellDef"],["class","py-2",4,"matCellDef"],["matColumnDef","nama_barang"],[4,"matCellDef"],["matColumnDef","nama_divisi"],["matColumnDef","harga_pembelian"],["matColumnDef","qty_barang"],["matColumnDef","total_nilai"],["matColumnDef","action"],["class","px-2 sm:px-6 flex items-center",4,"matCellDef"],[4,"matHeaderRowDef"],[4,"matRowDef","matRowDefColumns"],["mat-sort-header",""],[1,"py-2"],[1,"text-base","font-medium"],[1,"px-2","sm:px-6","flex","items-center"],[1,"font-medium","mx-1","text-white","dark:text-white","bg-red-500","hover:cursor-pointer","hover:bg-red-600","rounded","hover:underline",3,"click"],["svgIcon","heroicons_solid:trash",1,"text-white",2,"transform","scale(0.7)"],[1,"font-medium","mx-1","text-white","dark:text-white","bg-blue-500","hover:bg-blue-600","rounded","hover:underline",3,"routerLink"],["svgIcon","heroicons_solid:pencil-square",1,"text-white",2,"transform","scale(0.7)"],[1,"font-medium","mx-1","text-white","dark:text-white","bg-slate-500","hover:bg-slate-600","rounded","hover:underline",3,"routerLink"],["svgIcon","heroicons_solid:eye",1,"text-white",2,"transform","scale(0.7)"]],template:function(r,i){if(r&1){let o=y();a(0,"main",5)(1,"fuse-card",6,0)(3,"div",7)(4,"label",8),s(5,"Search"),n(),a(6,"div",9)(7,"div",10),W(),a(8,"svg",11),d(9,"path",12),n()(),J(),a(10,"input",13),v("keyup",function(H){return f(o),_(i.applySearchFilter(H.target.value))}),n()(),a(11,"div",14)(12,"div",15)(13,"a",16),v("click",function(){return f(o),_(i.TambahBarang())}),d(14,"mat-icon",17),a(15,"span",18),s(16,"Tambahkan Barang"),n()()(),a(17,"button",19),d(18,"mat-icon",20),a(19,"span",21),s(20,"Filter"),n(),d(21,"mat-icon",22),n(),a(22,"mat-menu",null,1)(24,"button",23),s(25,"Divisi"),n(),a(26,"mat-menu",null,2)(28,"div",24)(29,"h1",25),s(30,"Choose Divisi"),n()(),a(31,"div",26),p(32,ze,4,2,"div",27),n(),a(33,"div",24)(34,"button",28),v("click",function(){return f(o),_(i.addNewDivision())}),a(35,"mat-icon",29),s(36,"add"),n(),s(37," Add Divisi "),n()(),a(38,"div",24)(39,"button",30),v("click",function(){return f(o),_(i.deleteSelectedDivisi())}),a(40,"mat-icon",29),s(41,"delete"),n(),s(42," Delete Selected Divisi "),n()()()()()(),p(43,Ge,8,0,"div",31)(44,Ke,5,0,"div",32),a(45,"div",33),p(46,ut,25,3,"mat-table",34),n(),d(47,"mat-paginator",35,3),n()()}if(r&2){let o=O(23),u=O(27);m(10),c("disabled",i.isLoading),m(3),c("disabled",i.isLoading)("color","primary"),m(),c("svgIcon","person_add_alt_1"),m(3),c("matMenuTriggerFor",o)("disabled",i.isLoading),m(7),c("matMenuTriggerFor",u)("matMenuTriggerData",x(16,je)),m(8),c("ngForOf",i.divisiItems),m(11),c("ngIf",i.isLoading),m(),c("ngIf",i.isNotDataFound&&!i.isLoading),m(2),c("ngIf",!i.isLoading&&!i.isNotDataFound),m(),c("pageSize",5)("length",i.dataSource.data.length)("pageSizeOptions",x(17,We))("showFirstLastButtons",!0)}},dependencies:[k,X,Y,te,ee,Be,E,re,ne,le,oe,F,ge,R,B,V,N,Fe,L,we,Ce,Ie,Se,xe,Te,ye,Me,ke,De,pe,ce,me,de,Le,be,ve,_e,ue,fe,D]})}}return t})();var ft=()=>["/dashboards/inventaris"],Oe=(()=>{class t{static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275cmp=S({type:t,selectors:[["app-inventaris"]],standalone:!0,features:[I],decls:8,vars:2,consts:[[1,"w-full","h-fit","mb-10","flex","flex-col"],["aria-label","Breadcrumb",1,"flex","shadow","px-5","py-3","text-gray-700","borde","bg-white","dark:bg-slate-800"],[1,"inline-flex","items-center","space-x-1","md:space-x-2","rtl:space-x-reverse"],[1,"inline-flex","items-center"],[1,"inline-flex","items-center","text-sm","font-medium","text-gray-700","hover:text-blue-600","dark:text-gray-400","dark:hover:text-white",3,"routerLink"],[1,"w-full","px-4"]],template:function(r,i){r&1&&(a(0,"main",0)(1,"nav",1)(2,"ol",2)(3,"li",3)(4,"a",4),s(5," Inventaris "),n()()()(),a(6,"div",5),d(7,"app-table-inventaris"),n()()),r&2&&(m(4),c("routerLink",x(1,ft)))},dependencies:[Ve,Ne,E,L,V,ae,F,R,he,k,qe,D]})}}return t})();var mi=[{path:"",component:Oe},{path:"view-detail/:id",loadChildren:()=>import("./chunk-TWRRHDSR.js")},{path:"add-user",loadChildren:()=>import("./chunk-JYPEYRCB.js")}];export{mi as default};
