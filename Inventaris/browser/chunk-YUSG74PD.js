import{a as O,b as tt}from"./chunk-33AQHTZ3.js";import{a as A,b as Xe,c as Ye}from"./chunk-FDC45VUS.js";import{a as Ze,c as et}from"./chunk-BRBHI7BQ.js";import{a as Ke,b as He}from"./chunk-HH5FOG5R.js";import{a as Ee}from"./chunk-4ZGOATSA.js";import"./chunk-K6SJV66T.js";import"./chunk-JIIP3X5D.js";import{a as Fe,b as Pe}from"./chunk-3LDMUN2X.js";import"./chunk-YCUPTL4E.js";import"./chunk-DCIWF3NK.js";import"./chunk-N64NHRQD.js";import"./chunk-N34H76JM.js";import"./chunk-WCPJYO2Z.js";import{a as We,b as Je}from"./chunk-AOYF6QNZ.js";import{d as Ge,e as qe}from"./chunk-BNZ6GVUN.js";import{a as ve,d as xe,e as Ce,i as ye,j as be}from"./chunk-BVYLKFEF.js";import"./chunk-PPHX6Q7S.js";import{A as Ue,B as Qe,b as Le,d as Ve,f as De,g as $e,j as Be,l as Ne,m as Re,n as Ae,o as Oe,r as ze,z as je}from"./chunk-EMGI2SSV.js";import{a as Ie,c as Se,e as we}from"./chunk-DPACH7O6.js";import{b as ke,c as Te}from"./chunk-IIOR2V55.js";import{D as _e,E as ge,K as fe,N as he}from"./chunk-SFWQ4JHW.js";import"./chunk-DITXZIYA.js";import{a as Me}from"./chunk-PTSJDPUO.js";import"./chunk-G5ULN3RC.js";import{g as ue}from"./chunk-HZDJ65MY.js";import{c as pe}from"./chunk-OAD3FQTP.js";import{h as se,n as ce,o as me,w as de}from"./chunk-MFIY2XVS.js";import{$b as p,Ac as H,Bb as l,C as Y,D as z,Dc as re,Ec as ae,H as j,Hb as $,Ib as u,J as y,Kb as B,Lb as F,Mb as P,Nb as o,Ob as n,Oc as le,Pb as d,Sb as te,Tb as k,X as v,Y as w,Zb as x,_ as E,ab as U,ca as Z,db as r,dc as Q,eb as L,ec as G,f as W,fc as q,g as S,gc as V,ha as ee,hc as s,ia as M,ic as ie,jc as b,kc as ne,n as J,na as D,o as X,rc as N,s as C,sc as oe,tc as K,ya as f,za as h,zb as g,zc as R}from"./chunk-ULGM77ZI.js";import"./chunk-7EPSDV5K.js";var nt=(()=>{class t{constructor(){}static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275cmp=D({type:t,selectors:[["inventory"]],standalone:!0,features:[N],decls:1,vars:0,template:function(i,a){i&1&&d(0,"router-outlet")},dependencies:[ue],encapsulation:2,changeDetection:0})}}return t})();var T=(()=>{class t{constructor(e){this._httpClient=e,this._brands=new S(null),this._categories=new S(null),this._pagination=new S(null),this._product=new S(null),this._products=new S(null),this._tags=new S(null),this._vendors=new S(null)}get brands$(){return this._brands.asObservable()}get categories$(){return this._categories.asObservable()}get pagination$(){return this._pagination.asObservable()}get product$(){return this._product.asObservable()}get products$(){return this._products.asObservable()}get tags$(){return this._tags.asObservable()}get vendors$(){return this._vendors.asObservable()}getBrands(){return this._httpClient.get("api/apps/ecommerce/inventory/brands").pipe(E(e=>{this._brands.next(e)}))}getCategories(){return this._httpClient.get("api/apps/ecommerce/inventory/categories").pipe(E(e=>{this._categories.next(e)}))}getProducts(e=0,i=10,a="name",c="asc",_=""){return this._httpClient.get("api/apps/ecommerce/inventory/products",{params:{page:""+e,size:""+i,sort:a,order:c,search:_}}).pipe(E(I=>{this._pagination.next(I.pagination),this._products.next(I.products)}))}getProductById(e){return this._products.pipe(y(1),C(i=>{let a=i.find(c=>c.id===e)||null;return this._product.next(a),a}),v(i=>i?J(i):X("Could not found product with id of "+e+"!")))}createProduct(){return this.products$.pipe(y(1),v(e=>this._httpClient.post("api/apps/ecommerce/inventory/product",{}).pipe(C(i=>(this._products.next([i,...e]),i)))))}updateProduct(e,i){return this.products$.pipe(y(1),v(a=>this._httpClient.patch("api/apps/ecommerce/inventory/product",{id:e,product:i}).pipe(C(c=>{let _=a.findIndex(I=>I.id===e);return a[_]=c,this._products.next(a),c}),v(c=>this.product$.pipe(y(1),z(_=>_&&_.id===e),E(()=>(this._product.next(c),c)))))))}deleteProduct(e){return this.products$.pipe(y(1),v(i=>this._httpClient.delete("api/apps/ecommerce/inventory/product",{params:{id:e}}).pipe(C(a=>{let c=i.findIndex(_=>_.id===e);return i.splice(c,1),this._products.next(i),a}))))}getTags(){return this._httpClient.get("api/apps/ecommerce/inventory/tags").pipe(E(e=>{this._tags.next(e)}))}createTag(e){return this.tags$.pipe(y(1),v(i=>this._httpClient.post("api/apps/ecommerce/inventory/tag",{tag:e}).pipe(C(a=>(this._tags.next([...i,a]),a)))))}updateTag(e,i){return this.tags$.pipe(y(1),v(a=>this._httpClient.patch("api/apps/ecommerce/inventory/tag",{id:e,tag:i}).pipe(C(c=>{let _=a.findIndex(I=>I.id===e);return a[_]=c,this._tags.next(a),c}))))}deleteTag(e){return this.tags$.pipe(y(1),v(i=>this._httpClient.delete("api/apps/ecommerce/inventory/tag",{params:{id:e}}).pipe(C(a=>{let c=i.findIndex(_=>_.id===e);return i.splice(c,1),this._tags.next(i),a}),z(a=>a),v(a=>this.products$.pipe(y(1),C(c=>(c.forEach(_=>{let I=_.tags.findIndex(rt=>rt===e);I>-1&&_.tags.splice(I,1)}),a)))))))}getVendors(){return this._httpClient.get("api/apps/ecommerce/inventory/vendors").pipe(E(e=>{this._vendors.next(e)}))}static{this.\u0275fac=function(i){return new(i||t)(ee(pe))}}static{this.\u0275prov=Z({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var lt=t=>({"pointer-events-none":t}),st=()=>[5,10,25,100],ct=t=>({$implicit:t});function mt(t,m){t&1&&(o(0,"div",4),d(1,"mat-progress-bar",15),n()),t&2&&(r(),l("mode","indeterminate"))}function dt(t,m){if(t&1&&d(0,"img",28),t&2){let e=p().$implicit;l("alt","Product thumbnail image")("src",e.thumbnail,U)}}function pt(t,m){t&1&&(o(0,"div",29),s(1," NO THUMB "),n())}function ut(t,m){t&1&&(o(0,"div",34),d(1,"div",42),n())}function _t(t,m){t&1&&(o(0,"div",35),d(1,"div",43),n())}function gt(t,m){t&1&&(o(0,"div",36),d(1,"div",44),n())}function ft(t,m){t&1&&d(0,"mat-icon",38),t&2&&l("svgIcon","heroicons_solid:check")}function ht(t,m){t&1&&d(0,"mat-icon",39),t&2&&l("svgIcon","heroicons_solid:x-mark")}function vt(t,m){t&1&&te(0)}function xt(t,m){if(t&1&&g(0,vt,1,0,"ng-container",45),t&2){let e=p().$implicit;p(4);let i=V(18);l("ngTemplateOutlet",i)("ngTemplateOutletContext",K(2,ct,e))}}function Ct(t,m){if(t&1){let e=k();o(0,"div",25)(1,"div",26)(2,"div",27),g(3,dt,1,2,"img",28)(4,pt,2,0,"div",29),n()(),o(5,"div",30),s(6),n(),o(7,"div",31),s(8),n(),o(9,"div",23),s(10),R(11,"currency"),n(),o(12,"div",32)(13,"div",33),s(14),n(),g(15,ut,2,0,"div",34)(16,_t,2,0,"div",35)(17,gt,2,0,"div",36),n(),o(18,"div",37),g(19,ft,1,1,"mat-icon",38)(20,ht,1,1,"mat-icon",39),n(),o(21,"div")(22,"button",40),x("click",function(){let a=f(e).$implicit,c=p(4);return h(c.toggleDetails(a.id))}),d(23,"mat-icon",41),n()()(),o(24,"div",17),g(25,xt,1,4,"ng-container"),n()}if(t&2){let e=m.$implicit,i=p(4);r(3),u(e.thumbnail?3:-1),r(),u(e.thumbnail?-1:4),r(2),b(" ",e.sku," "),r(2),b(" ",e.name," "),r(2),b(" ",re(11,13,e.price,"USD","symbol","1.2-2")," "),r(4),b(" ",e.stock," "),r(),u(e.stock<20?15:-1),r(),u(e.stock>=20&&e.stock<30?16:-1),r(),u(e.stock>=30?17:-1),r(2),u(e.active?19:-1),r(),u(e.active?-1:20),r(3),l("svgIcon",(i.selectedProduct==null?null:i.selectedProduct.id)===e.id?"heroicons_solid:chevron-up":"heroicons_solid:chevron-down"),r(2),u((i.selectedProduct==null?null:i.selectedProduct.id)===e.id?25:-1)}}function yt(t,m){t&1&&F(0,Ct,26,18,null,null,$().trackByFn,!0),t&2&&P(m)}function bt(t,m){if(t&1&&(o(0,"div",17)(1,"div",18),d(2,"div"),o(3,"div",19),s(4," SKU "),n(),o(5,"div",20),s(6,"Name"),n(),o(7,"div",21),s(8," Price "),n(),o(9,"div",22),s(10," Stock "),n(),o(11,"div",22),s(12," Active "),n(),o(13,"div",23),s(14,"Details"),n()(),g(15,yt,2,0),R(16,"async"),n(),d(17,"mat-paginator",24)),t&2){let e,i=p(2);r(3),l("mat-sort-header","sku"),r(2),l("mat-sort-header","name"),r(2),l("mat-sort-header","price"),r(2),l("mat-sort-header","stock"),r(2),l("mat-sort-header","active"),r(4),u((e=H(16,12,i.products$))?15:-1,e),r(2),l("ngClass",K(14,lt,i.isLoading))("length",i.pagination.length)("pageIndex",i.pagination.page)("pageSize",i.pagination.size)("pageSizeOptions",oe(16,st))("showFirstLastButtons",!0)}}function It(t,m){t&1&&(o(0,"div",16),s(1," There are no products! "),n())}function St(t,m){t&1&&g(0,bt,18,17)(1,It,2,0,"div",16),t&2&&u(m.length>0?0:1)}function wt(t,m){if(t&1&&d(0,"img",53),t&2){let e=p(2);l("src",e.selectedProductForm.get("images").value[e.selectedProductForm.get("currentImageIndex").value],U)}}function kt(t,m){t&1&&(o(0,"span",54),s(1,"NO IMAGE"),n())}function Tt(t,m){if(t&1){let e=k();o(0,"div",55)(1,"button",87),x("click",function(){f(e);let a=p(2);return h(a.cycleImages(!1))}),d(2,"mat-icon",41),n(),o(3,"span",88),s(4),n(),o(5,"button",87),x("click",function(){f(e);let a=p(2);return h(a.cycleImages(!0))}),d(6,"mat-icon",41),n()()}if(t&2){let e=p(2);r(2),l("svgIcon","heroicons_mini:arrow-long-left"),r(2),ne(" ",e.selectedProductForm.get("currentImageIndex").value+1," of ",e.selectedProductForm.get("images").value.length," "),r(2),l("svgIcon","heroicons_mini:arrow-long-right")}}function Et(t,m){if(t&1&&(o(0,"mat-option",67),s(1),n()),t&2){let e=m.$implicit;l("value",e.id),r(),b(" ",e.name," ")}}function Ft(t,m){if(t&1&&(o(0,"mat-option",67),s(1),n()),t&2){let e=m.$implicit;l("value",e.id),r(),b(" ",e.name," ")}}function Pt(t,m){if(t&1&&(o(0,"mat-option",67),s(1),n()),t&2){let e=m.$implicit;l("value",e.id),r(),b(" ",e.name," ")}}function Mt(t,m){t&1&&d(0,"mat-icon",41),t&2&&l("svgIcon","heroicons_solid:pencil-square")}function Lt(t,m){t&1&&d(0,"mat-icon",41),t&2&&l("svgIcon","heroicons_solid:check")}function Vt(t,m){if(t&1){let e=k();o(0,"mat-checkbox",90),x("change",function(a){let c=f(e).$implicit,_=p(3);return h(_.toggleProductTag(c,a))}),s(1),n()}if(t&2){let e=m.$implicit,i=p(3);l("color","primary")("checked",i.selectedProduct.tags.includes(e.id)),r(),b(" ",e.title," ")}}function Dt(t,m){if(t&1&&F(0,Vt,2,3,"mat-checkbox",89,$().trackByFn,!0),t&2){let e=p(2);P(e.filteredTags)}}function $t(t,m){if(t&1){let e=k();o(0,"mat-form-field",91)(1,"input",92),x("input",function(a){let c=f(e).$implicit,_=p(3);return h(_.updateTagTitle(c,a))}),n(),o(2,"button",93),x("click",function(){let a=f(e).$implicit,c=p(3);return h(c.deleteTag(a))}),d(3,"mat-icon",41),n()()}if(t&2){let e=m.$implicit;l("subscriptSizing","dynamic"),r(),l("value",e.title),r(2),l("svgIcon","heroicons_solid:trash")}}function Bt(t,m){if(t&1&&(o(0,"div",81),F(1,$t,4,3,"mat-form-field",91,$().trackByFn,!0),n()),t&2){let e=p(2);r(),P(e.filteredTags)}}function Nt(t,m){if(t&1){let e=k();o(0,"div",94),x("click",function(){f(e),p();let a=V(97);return p().createTag(a.value),h(a.value="")}),d(1,"mat-icon",95),o(2,"div",96),s(3,' Create "'),o(4,"b"),s(5),n(),s(6,'" '),n()()}if(t&2){p();let e=V(97);r(),l("svgIcon","heroicons_solid:plus-circle"),r(4),ie(e.value)}}function Rt(t,m){t&1&&(d(0,"mat-icon",97),o(1,"span",98),s(2,"Product updated"),n()),t&2&&l("svgIcon","heroicons_outline:check")}function At(t,m){t&1&&(d(0,"mat-icon",99),o(1,"span",98),s(2,"An error occurred, try again!"),n()),t&2&&l("svgIcon","heroicons_outline:x-mark")}function Ot(t,m){if(t&1&&(o(0,"div",85),g(1,Rt,3,1)(2,At,3,1),n()),t&2){let e=p(2);r(),u(e.flashMessage==="success"?1:-1),r(),u(e.flashMessage==="error"?2:-1)}}function zt(t,m){if(t&1){let e=k();o(0,"div",46)(1,"div",47)(2,"form",48)(3,"div",49)(4,"div",50)(5,"div",51)(6,"div",52),g(7,wt,1,1,"img",53)(8,kt,2,0,"span",54),n(),g(9,Tt,7,4,"div",55),n(),o(10,"div",56)(11,"span",57),s(12,"Product status"),n(),o(13,"mat-slide-toggle",58),s(14),n()()(),o(15,"div",59)(16,"div",60)(17,"mat-form-field",61)(18,"mat-label"),s(19,"Name"),n(),d(20,"input",62),n(),o(21,"div",63)(22,"mat-form-field",64)(23,"mat-label"),s(24,"SKU"),n(),d(25,"input",62),n(),o(26,"mat-form-field",65)(27,"mat-label"),s(28,"Barcode"),n(),d(29,"input",62),n()(),o(30,"div",63)(31,"mat-form-field",64)(32,"mat-label"),s(33,"Category"),n(),o(34,"mat-select",66),F(35,Et,2,2,"mat-option",67,B),n()(),o(37,"mat-form-field",68)(38,"mat-label"),s(39,"Brand"),n(),o(40,"mat-select",66),F(41,Ft,2,2,"mat-option",67,B),n()(),o(43,"mat-form-field",69)(44,"mat-label"),s(45,"Vendor"),n(),o(46,"mat-select",66),F(47,Pt,2,2,"mat-option",67,B),n()()(),o(49,"div",63)(50,"mat-form-field",64)(51,"mat-label"),s(52,"Stock"),n(),d(53,"input",70),n(),o(54,"mat-form-field",69)(55,"mat-label"),s(56,"Reserved"),n(),d(57,"input",70),n()()(),o(58,"div",71)(59,"mat-form-field",61)(60,"mat-label"),s(61,"Cost"),n(),o(62,"span",72),s(63,"$"),n(),d(64,"input",62),n(),o(65,"mat-form-field",61)(66,"mat-label"),s(67,"Base Price"),n(),o(68,"span",72),s(69,"$"),n(),d(70,"input",62),n(),o(71,"mat-form-field",61)(72,"mat-label"),s(73,"Tax"),n(),o(74,"span",73),s(75,"%"),n(),d(76,"input",70),n(),o(77,"mat-form-field",61)(78,"mat-label"),s(79,"Price"),n(),o(80,"span",73),s(81,"$"),n(),d(82,"input",62),n()(),o(83,"div",71)(84,"mat-form-field",61)(85,"mat-label"),s(86,"Weight"),n(),o(87,"span",73),s(88,"lbs."),n(),d(89,"input",62),n(),o(90,"span",74),s(91,"Tags"),n(),o(92,"div",75)(93,"div",76)(94,"div",77),d(95,"mat-icon",41),o(96,"input",78,1),x("input",function(a){f(e);let c=p();return h(c.filterTags(a))})("keydown",function(a){f(e);let c=p();return h(c.filterTagsInputKeyDown(a))}),n()(),o(98,"button",79),x("click",function(){f(e);let a=p();return h(a.toggleTagsEditMode())}),g(99,Mt,1,1,"mat-icon",41)(100,Lt,1,1,"mat-icon",41),n()(),o(101,"div",80),g(102,Dt,2,0)(103,Bt,3,0,"div",81)(104,Nt,7,2,"div",82),n()()()()(),o(105,"div",83)(106,"button",84),x("click",function(){f(e);let a=p();return h(a.deleteSelectedProduct())}),s(107," Delete "),n(),o(108,"div",26),g(109,Ot,3,2,"div",85),o(110,"button",86),x("click",function(){f(e);let a=p();return h(a.updateSelectedProduct())}),s(111," Update "),n()()()()()()}if(t&2){let e=V(97),i=p();r(2),l("formGroup",i.selectedProductForm),r(5),u(i.selectedProductForm.get("images").value.length?7:8),r(2),u(i.selectedProductForm.get("images").value.length?9:-1),r(4),l("formControlName","active")("color","primary"),r(),b(" ",i.selectedProductForm.get("active").value===!0?"Active":"Disabled"," "),r(6),l("formControlName","name"),r(5),l("formControlName","sku"),r(4),l("formControlName","barcode"),r(5),l("formControlName","category"),r(),P(i.categories),r(5),l("formControlName","brand"),r(),P(i.brands),r(5),l("formControlName","vendor"),r(),P(i.vendors),r(6),l("formControlName","stock"),r(4),l("formControlName","reserved"),r(7),l("formControlName","cost"),r(6),l("formControlName","basePrice"),r(6),l("formControlName","taxPercent"),r(6),l("formControlName","price"),r(7),l("formControlName","weight"),r(6),l("svgIcon","heroicons_solid:magnifying-glass"),r(),l("maxLength",50),r(3),u(i.tagsEditMode?-1:99),r(),u(i.tagsEditMode?100:-1),r(2),u(i.tagsEditMode?-1:102),r(),u(i.tagsEditMode?103:-1),r(),u(i.shouldShowCreateTagButton(e.value)?104:-1),r(2),l("color","warn"),r(3),u(i.flashMessage?109:-1),r(),l("color","primary")}}var ot=(()=>{class t{constructor(e,i,a,c){this._changeDetectorRef=e,this._fuseConfirmationService=i,this._formBuilder=a,this._inventoryService=c,this.flashMessage=null,this.isLoading=!1,this.searchInputControl=new Be,this.selectedProduct=null,this.tagsEditMode=!1,this._unsubscribeAll=new W}ngOnInit(){this.selectedProductForm=this._formBuilder.group({id:[""],category:[""],name:["",[Ve.required]],description:[""],tags:[[]],sku:[""],barcode:[""],brand:[""],vendor:[""],stock:[""],reserved:[""],cost:[""],basePrice:[""],taxPercent:[""],price:[""],weight:[""],thumbnail:[""],images:[[]],currentImageIndex:[0],active:[!1]}),this._inventoryService.brands$.pipe(w(this._unsubscribeAll)).subscribe(e=>{this.brands=e,this._changeDetectorRef.markForCheck()}),this._inventoryService.categories$.pipe(w(this._unsubscribeAll)).subscribe(e=>{this.categories=e,this._changeDetectorRef.markForCheck()}),this._inventoryService.pagination$.pipe(w(this._unsubscribeAll)).subscribe(e=>{this.pagination=e,this._changeDetectorRef.markForCheck()}),this.products$=this._inventoryService.products$,this._inventoryService.tags$.pipe(w(this._unsubscribeAll)).subscribe(e=>{this.tags=e,this.filteredTags=e,this._changeDetectorRef.markForCheck()}),this._inventoryService.vendors$.pipe(w(this._unsubscribeAll)).subscribe(e=>{this.vendors=e,this._changeDetectorRef.markForCheck()}),this.searchInputControl.valueChanges.pipe(w(this._unsubscribeAll),j(300),v(e=>(this.closeDetails(),this.isLoading=!0,this._inventoryService.getProducts(0,10,"name","asc",e))),C(()=>{this.isLoading=!1})).subscribe()}ngAfterViewInit(){this._sort&&this._paginator&&(this._sort.sort({id:"name",start:"asc",disableClear:!0}),this._changeDetectorRef.markForCheck(),this._sort.sortChange.pipe(w(this._unsubscribeAll)).subscribe(()=>{this._paginator.pageIndex=0,this.closeDetails()}),Y(this._sort.sortChange,this._paginator.page).pipe(v(()=>(this.closeDetails(),this.isLoading=!0,this._inventoryService.getProducts(this._paginator.pageIndex,this._paginator.pageSize,this._sort.active,this._sort.direction))),C(()=>{this.isLoading=!1})).subscribe())}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}toggleDetails(e){if(this.selectedProduct&&this.selectedProduct.id===e){this.closeDetails();return}this._inventoryService.getProductById(e).subscribe(i=>{this.selectedProduct=i,this.selectedProductForm.patchValue(i),this._changeDetectorRef.markForCheck()})}closeDetails(){this.selectedProduct=null}cycleImages(e=!0){let i=this.selectedProductForm.get("images").value.length,a=this.selectedProductForm.get("currentImageIndex").value,c=a+1===i?0:a+1,_=a-1<0?i-1:a-1;e?this.selectedProductForm.get("currentImageIndex").setValue(c):this.selectedProductForm.get("currentImageIndex").setValue(_)}toggleTagsEditMode(){this.tagsEditMode=!this.tagsEditMode}filterTags(e){let i=e.target.value.toLowerCase();this.filteredTags=this.tags.filter(a=>a.title.toLowerCase().includes(i))}filterTagsInputKeyDown(e){if(e.key!=="Enter")return;if(this.filteredTags.length===0){this.createTag(e.target.value),e.target.value="";return}let i=this.filteredTags[0];this.selectedProduct.tags.find(c=>c===i.id)?this.removeTagFromProduct(i):this.addTagToProduct(i)}createTag(e){let i={title:e};this._inventoryService.createTag(i).subscribe(a=>{this.addTagToProduct(a)})}updateTagTitle(e,i){e.title=i.target.value,this._inventoryService.updateTag(e.id,e).pipe(j(300)).subscribe(),this._changeDetectorRef.markForCheck()}deleteTag(e){this._inventoryService.deleteTag(e.id).subscribe(),this._changeDetectorRef.markForCheck()}addTagToProduct(e){this.selectedProduct.tags.unshift(e.id),this.selectedProductForm.get("tags").patchValue(this.selectedProduct.tags),this._changeDetectorRef.markForCheck()}removeTagFromProduct(e){this.selectedProduct.tags.splice(this.selectedProduct.tags.findIndex(i=>i===e.id),1),this.selectedProductForm.get("tags").patchValue(this.selectedProduct.tags),this._changeDetectorRef.markForCheck()}toggleProductTag(e,i){i.checked?this.addTagToProduct(e):this.removeTagFromProduct(e)}shouldShowCreateTagButton(e){return!(e===""||this.tags.findIndex(i=>i.title.toLowerCase()===e.toLowerCase())>-1)}createProduct(){this._inventoryService.createProduct().subscribe(e=>{this.selectedProduct=e,this.selectedProductForm.patchValue(e),this._changeDetectorRef.markForCheck()})}updateSelectedProduct(){let e=this.selectedProductForm.getRawValue();delete e.currentImageIndex,this._inventoryService.updateProduct(e.id,e).subscribe(()=>{this.showFlashMessage("success")})}deleteSelectedProduct(){this._fuseConfirmationService.open({title:"Delete product",message:"Are you sure you want to remove this product? This action cannot be undone!",actions:{confirm:{label:"Delete"}}}).afterClosed().subscribe(i=>{if(i==="confirmed"){let a=this.selectedProductForm.getRawValue();this._inventoryService.deleteProduct(a.id).subscribe(()=>{this.closeDetails()})}})}showFlashMessage(e){this.flashMessage=e,this._changeDetectorRef.markForCheck(),setTimeout(()=>{this.flashMessage=null,this._changeDetectorRef.markForCheck()},3e3)}trackByFn(e,i){return i.id||e}static{this.\u0275fac=function(i){return new(i||t)(L(le),L(Ee),L(je),L(T))}}static{this.\u0275cmp=D({type:t,selectors:[["inventory-list"]],viewQuery:function(i,a){if(i&1&&(Q(O,5),Q(A,5)),i&2){let c;G(c=q())&&(a._paginator=c.first),G(c=q())&&(a._sort=c.first)}},standalone:!0,features:[N],decls:19,vars:11,consts:[["rowDetailsTemplate",""],["newTagInput",""],[1,"bg-card","flex","min-w-0","flex-auto","flex-col","dark:bg-transparent","sm:absolute","sm:inset-0","sm:overflow-hidden"],[1,"relative","flex","flex-0","flex-col","border-b","px-6","py-8","sm:flex-row","sm:items-center","sm:justify-between","md:px-8"],[1,"absolute","inset-x-0","bottom-0"],[1,"text-4xl","font-extrabold","tracking-tight"],[1,"mt-6","flex","shrink-0","items-center","sm:ml-4","sm:mt-0"],[1,"fuse-mat-dense","fuse-mat-rounded","min-w-64",3,"subscriptSizing"],["matPrefix","",1,"icon-size-5",3,"svgIcon"],["matInput","",3,"formControl","autocomplete","placeholder"],["mat-flat-button","",1,"ml-4",3,"click","color"],[3,"svgIcon"],[1,"ml-2","mr-1"],[1,"flex","flex-auto","overflow-hidden"],[1,"flex","flex-auto","flex-col","overflow-hidden","sm:mb-18","sm:overflow-y-auto"],[3,"mode"],[1,"border-t","p-8","text-center","text-4xl","font-semibold","tracking-tight","sm:p-16"],[1,"grid"],["matSort","","matSortDisableClear","",1,"inventory-grid","text-secondary","sticky","top-0","z-10","grid","gap-4","bg-gray-50","px-6","py-4","text-md","font-semibold","shadow","dark:bg-black","dark:bg-opacity-5","md:px-8"],[1,"hidden","md:block",3,"mat-sort-header"],[3,"mat-sort-header"],[1,"hidden","sm:block",3,"mat-sort-header"],[1,"hidden","lg:block",3,"mat-sort-header"],[1,"hidden","sm:block"],[1,"z-10","border-b","bg-gray-50","dark:bg-transparent","sm:absolute","sm:inset-x-0","sm:bottom-0","sm:border-b-0","sm:border-t",3,"ngClass","length","pageIndex","pageSize","pageSizeOptions","showFirstLastButtons"],[1,"inventory-grid","grid","items-center","gap-4","border-b","px-6","py-3","md:px-8"],[1,"flex","items-center"],[1,"relative","mr-6","flex","h-12","w-12","flex-0","items-center","justify-center","overflow-hidden","rounded","border"],[1,"w-8",3,"alt","src"],[1,"flex","h-full","w-full","items-center","justify-center","text-center","text-xs","font-semibold","uppercase","leading-none"],[1,"hidden","truncate","md:block"],[1,"truncate"],[1,"hidden","items-center","lg:flex"],[1,"min-w-4"],[1,"ml-2","flex","h-4","w-1","items-end","overflow-hidden","rounded","bg-red-200"],[1,"ml-2","flex","h-4","w-1","items-end","overflow-hidden","rounded","bg-orange-200"],[1,"ml-2","flex","h-4","w-1","items-end","overflow-hidden","rounded","bg-green-100"],[1,"hidden","lg:block"],[1,"text-green-400","icon-size-5",3,"svgIcon"],[1,"text-gray-400","icon-size-5",3,"svgIcon"],["mat-stroked-button","",1,"h-7","min-h-7","min-w-10","px-2","leading-6",3,"click"],[1,"icon-size-5",3,"svgIcon"],[1,"flex","h-1/3","w-full","bg-red-600"],[1,"flex","h-2/4","w-full","bg-orange-400"],[1,"flex","h-full","w-full","bg-green-400"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"overflow-hidden","shadow-lg"],[1,"flex","border-b"],[1,"flex","w-full","flex-col",3,"formGroup"],[1,"flex","flex-col","p-8","sm:flex-row"],[1,"mb-8","flex","flex-col","items-center","sm:mb-0","sm:items-start"],[1,"flex","flex-col","items-center"],[1,"h-44","w-32","overflow-hidden","rounded","border"],[1,"h-full","w-full","object-cover",3,"src"],[1,"flex","min-h-20","items-center","text-lg","font-semibold"],[1,"mt-2","flex","items-center","whitespace-nowrap"],[1,"mt-8","flex","flex-col"],[1,"mb-2","font-semibold"],[3,"formControlName","color"],[1,"flex","flex-auto","flex-wrap"],[1,"flex","w-full","flex-col","sm:pl-8","lg:w-2/4"],[1,"w-full"],["matInput","",3,"formControlName"],[1,"flex"],[1,"w-1/3","pr-2"],[1,"w-2/3","pl-2"],[3,"formControlName"],[3,"value"],[1,"w-1/3","px-2"],[1,"w-1/3","pl-2"],["type","number","matInput","",3,"formControlName"],[1,"flex","w-full","flex-col","sm:pl-8","lg:w-1/4"],["matPrefix",""],["matSuffix",""],[1,"mb-px","font-medium","leading-tight"],[1,"mt-1.5","overflow-hidden","rounded-md","border","border-gray-300","shadow-sm","dark:border-gray-500"],[1,"-my-px","flex","items-center","px-3","py-2"],[1,"flex","min-w-0","flex-auto","items-center"],["type","text","placeholder","Enter tag name",1,"ml-2","min-w-0","border-0","py-1",3,"input","keydown","maxLength"],["mat-icon-button","",1,"ml-3","h-8","min-h-8","w-8",3,"click"],[1,"h-44","overflow-y-auto","border-t","border-gray-300","leading-none","dark:border-gray-500"],[1,"space-y-2","p-4"],["matRipple","",1,"-ml-0.5","flex","h-10","min-h-10","cursor-pointer","items-center","border-t","pl-4","pr-3","leading-none","dark:hover:bg-hover","hover:bg-gray-50"],[1,"flex","w-full","items-center","justify-between","border-t","px-8","py-4"],["mat-button","",1,"-ml-4",3,"click","color"],[1,"mr-4","flex","items-center"],["mat-flat-button","",3,"click","color"],["mat-icon-button","",3,"click"],[1,"font-sm","mx-2"],[1,"flex","h-10","min-h-10","items-center","pl-1","pr-4",3,"color","checked"],[1,"flex","h-10","min-h-10","items-center","pl-1","pr-4",3,"change","color","checked"],[1,"fuse-mat-dense","w-full",3,"subscriptSizing"],["matInput","",3,"input","value"],["mat-icon-button","","matSuffix","",3,"click"],["matRipple","",1,"-ml-0.5","flex","h-10","min-h-10","cursor-pointer","items-center","border-t","pl-4","pr-3","leading-none","dark:hover:bg-hover","hover:bg-gray-50",3,"click"],[1,"mr-2","icon-size-5",3,"svgIcon"],[1,"break-all"],[1,"text-green-500",3,"svgIcon"],[1,"ml-2"],[1,"text-red-500",3,"svgIcon"]],template:function(i,a){if(i&1){let c=k();o(0,"div",2)(1,"div",3),g(2,mt,2,1,"div",4),o(3,"div",5),s(4,"Inventory"),n(),o(5,"div",6)(6,"mat-form-field",7),d(7,"mat-icon",8)(8,"input",9),n(),o(9,"button",10),x("click",function(){return f(c),h(a.createProduct())}),d(10,"mat-icon",11),o(11,"span",12),s(12,"Add"),n()()()(),o(13,"div",13)(14,"div",14),g(15,St,2,1),R(16,"async"),g(17,zt,112,29,"ng-template",null,0,ae),n()()()}if(i&2){let c;r(2),u(a.isLoading?2:-1),r(4),l("subscriptSizing","dynamic"),r(),l("svgIcon","heroicons_solid:magnifying-glass"),r(),l("formControl",a.searchInputControl)("autocomplete","off")("placeholder","Search products"),r(),l("color","primary"),r(),l("svgIcon","heroicons_outline:plus"),r(5),u((c=H(16,9,a.products$))?15:-1,c)}},dependencies:[Pe,Fe,be,ye,ve,xe,Ce,Te,ke,qe,Ge,Ue,Ne,Le,Re,De,$e,Qe,Ae,Oe,ze,we,Ie,Se,Ye,A,Xe,ce,tt,O,se,He,Ke,et,Ze,fe,he,Je,We,ge,_e,me,de],styles:[`.inventory-grid{grid-template-columns:48px auto 40px}@media (min-width: 600px){.inventory-grid{grid-template-columns:48px auto 112px 72px}}@media (min-width: 960px){.inventory-grid{grid-template-columns:48px 112px auto 112px 72px}}@media (min-width: 1280px){.inventory-grid{grid-template-columns:48px 112px auto 112px 96px 96px 72px}}
`],encapsulation:2,data:{animation:Me},changeDetection:0})}}return t})();var wi=[{path:"",pathMatch:"full",redirectTo:"inventory"},{path:"inventory",component:nt,children:[{path:"",component:ot,resolve:{brands:()=>M(T).getBrands(),categories:()=>M(T).getCategories(),products:()=>M(T).getProducts(),tags:()=>M(T).getTags(),vendors:()=>M(T).getVendors()}}]}];export{wi as default};
