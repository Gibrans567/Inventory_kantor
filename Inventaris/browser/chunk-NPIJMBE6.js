import{c as Re,d as Fe}from"./chunk-EEBZCIAS.js";import{a as Ie,s as De}from"./chunk-R2G5O2T3.js";import{a as Be}from"./chunk-WWD2L4QL.js";import{a as $}from"./chunk-33AQHTZ3.js";import{a as L}from"./chunk-G4K64THG.js";import"./chunk-KS76QDFS.js";import"./chunk-Y2TYLDF6.js";import"./chunk-ACKBNI47.js";import"./chunk-HC6MZPB3.js";import"./chunk-2QWWRY5H.js";import"./chunk-NMYJD6OP.js";import"./chunk-WIS6G6XT.js";import"./chunk-SV2ZKNWA.js";import"./chunk-U4MDP2GH.js";import"./chunk-RS5W3JWO.js";import"./chunk-BWQPWRAH.js";import"./chunk-OAQMJ7ML.js";import"./chunk-QDZ54ZJO.js";import"./chunk-OLKQPSEZ.js";import"./chunk-7D6K5XYM.js";import"./chunk-OBXDPQ3V.js";import"./chunk-XN53Y45H.js";import"./chunk-UYQ7EZNZ.js";import"./chunk-MCRJI3T3.js";import"./chunk-BAKMWPBW.js";import{a as P}from"./chunk-FDC45VUS.js";import{a as ge,b as _e,c as he,e as be,f as ve,h as Se,i as Ce,k as ye,l as we,n as xe,o as ke,p as Me}from"./chunk-QBWZ6CEK.js";import"./chunk-BRBHI7BQ.js";import"./chunk-OBBPMR2I.js";import"./chunk-AMQPVFGX.js";import"./chunk-KKCAABTQ.js";import"./chunk-B7J5UJF3.js";import"./chunk-F4H6ZFEG.js";import"./chunk-SV7S5NYR.js";import"./chunk-WTCPO44B.js";import{a as D}from"./chunk-4ZGOATSA.js";import{a as z,b as K,c as W,e as Z}from"./chunk-K6SJV66T.js";import"./chunk-AIL4DHVD.js";import"./chunk-56EIYY4C.js";import"./chunk-JIIP3X5D.js";import{d as ae}from"./chunk-6GRHLUW6.js";import"./chunk-YCUPTL4E.js";import"./chunk-DCIWF3NK.js";import"./chunk-N64NHRQD.js";import"./chunk-N34H76JM.js";import"./chunk-WCPJYO2Z.js";import{a as pe,b as fe}from"./chunk-7I5SQKLH.js";import{d as ue,e as ce}from"./chunk-BNZ6GVUN.js";import{a as J,b as X,i as Y,j as ee}from"./chunk-BVYLKFEF.js";import"./chunk-PPHX6Q7S.js";import{A as E,B as T,b as ie,d as F,f as re,g as ne,l as oe,m as le,o as me,r as se,y as de}from"./chunk-EMGI2SSV.js";import{e as te}from"./chunk-DPACH7O6.js";import{b as R,c as B}from"./chunk-IIOR2V55.js";import"./chunk-SFWQ4JHW.js";import"./chunk-DITXZIYA.js";import"./chunk-PTSJDPUO.js";import"./chunk-G5ULN3RC.js";import{f as Q,h as O}from"./chunk-HZDJ65MY.js";import"./chunk-OAD3FQTP.js";import{k as M,x as I}from"./chunk-MFIY2XVS.js";import{$b as x,Aa as U,Ba as H,Bb as u,Nb as i,Ob as r,Pb as c,Qb as h,Rb as b,Tb as q,Zb as g,db as s,dc as N,eb as d,ec as A,fc as V,hc as m,ic as y,na as w,rc as k,sc as G,ya as S,za as C,zb as p}from"./chunk-ULGM77ZI.js";import{i as v}from"./chunk-7EPSDV5K.js";function Ue(e,o){e&1&&(i(0,"div",11),c(1,"mat-spinner",12),r())}function He(e,o){e&1&&(i(0,"mat-error"),m(1," Status Barang wajib diisi "),r())}function Ge(e,o){e&1&&(i(0,"mat-error"),m(1," Kuantitas Barang wajib diisi "),r())}function Qe(e,o){e&1&&(i(0,"mat-error"),m(1," Kuantitas Barang tidak boleh kurang dari 0 "),r())}var Ee=(()=>{class e{constructor(a,n,t,l,_,f,j,Le,je){this.platform=a,this.fb=n,this._apiService=t,this.router=l,this.loadingController=_,this.fuseConfirmationService=f,this._tableUsersService=j,this.dialogRef=Le,this.data=je,this.isLoading=!1}ngOnInit(){this.barangStatusForm=this.fb.group({status:["Tersedia",F.required],qty_barang:[1,[F.required,F.min(0)]]}),this.platform.backButton.subscribeWithPriority(10,()=>{this.router.navigate(["/dashboard/inventaris"])})}onNoClick(){this.dialogRef.close()}onSubmit(){return v(this,null,function*(){if(!this.barangStatusForm.valid){console.warn("Form tidak valid");return}this.isLoading=!0;try{let a={status:this.barangStatusForm.value.status,qty_barang:this.barangStatusForm.value.qty_barang},n=yield this._apiService.put(`/barangStatus/${this.data.barangId}`,a);console.log(n),this.dialogRef.close("refresh"),this._tableUsersService.fetchData()}catch(a){console.error("Gagal update status barang",a)}finally{this.isLoading=!1}})}static{this.\u0275fac=function(n){return new(n||e)(d(Ie),d(de),d(L),d(O),d(De),d(D),d(Fe),d(z),d(K))}}static{this.\u0275cmp=w({type:e,selectors:[["app-update-status"]],standalone:!0,features:[k],decls:19,vars:5,consts:[[1,"h-full","w-full"],["class","loading-overlay",4,"ngIf"],[1,"w-full",3,"click"],["svgIcon","mat_solid:close",1,"self-end"],[1,"overflow-y-auto",2,"max-height","80vh","padding-right","10px"],[1,"bg-card","mt-2","flex","flex-col","overflow-hidden","rounded-2xl","p-8","pb-4",3,"formGroup"],["floatLabel","always",1,"w-full","mb-2"],["matInput","","formControlName","status","type","text","placeholder","Masukkan status barang"],[4,"ngIf"],["matInput","","formControlName","qty_barang","type","number","placeholder","Masukkan kuantitas barang"],[1,"bg-green-600","text-white","p-2","rounded","mt-4",3,"click"],[1,"loading-overlay"],["diameter","50","color","primary"]],template:function(n,t){if(n&1&&(i(0,"div",0),p(1,Ue,2,0,"div",1),i(2,"a",2),g("click",function(){return t.onNoClick()}),c(3,"mat-icon",3),r(),i(4,"div",4)(5,"form",5)(6,"mat-form-field",6)(7,"mat-label"),m(8,"Status Barang"),r(),c(9,"input",7),p(10,He,2,0,"mat-error",8),r(),i(11,"mat-form-field",6)(12,"mat-label"),m(13,"Kuantitas Barang"),r(),c(14,"input",9),p(15,Ge,2,0,"mat-error",8)(16,Qe,2,0,"mat-error",8),r(),i(17,"button",10),g("click",function(){return t.onSubmit()}),m(18," Perbarui Status "),r()()()()),n&2){let l,_,f;s(),u("ngIf",t.isLoading),s(4),u("formGroup",t.barangStatusForm),s(5),u("ngIf",(l=t.barangStatusForm.get("status"))==null?null:l.hasError("required")),s(5),u("ngIf",(_=t.barangStatusForm.get("qty_barang"))==null?null:_.hasError("required")),s(),u("ngIf",(f=t.barangStatusForm.get("qty_barang"))==null?null:f.hasError("min"))}},dependencies:[ee,Y,J,X,E,oe,ie,le,re,ne,ce,ue,I,M,T,me,se,B,R,fe,pe]})}}return e})();var Oe=()=>[5,10,20];function ze(e,o){e&1&&(i(0,"div",18),c(1,"div",19)(2,"div",19)(3,"div",19)(4,"div",19)(5,"div",19)(6,"div",20),r())}function Ke(e,o){e&1&&(i(0,"div")(1,"div",21),c(2,"img",22),i(3,"h1",23),m(4,"Data Tidak Ditemukan"),r()()())}function We(e,o){e&1&&(i(0,"mat-header-cell",35),m(1," Nama Barang "),r())}function Ze(e,o){if(e&1&&(i(0,"mat-cell",36)(1,"h1",37),m(2),r()()),e&2){let a=o.$implicit;s(2),y(a.nama_barang)}}function Je(e,o){e&1&&(i(0,"mat-header-cell",35),m(1," Qty "),r())}function Xe(e,o){if(e&1&&(i(0,"mat-cell",36)(1,"h1",37),m(2),r()()),e&2){let a=o.$implicit;s(2),y(a.qty_barang)}}function Ye(e,o){e&1&&(i(0,"mat-header-cell",35),m(1," Note "),r())}function et(e,o){if(e&1&&(i(0,"mat-cell",36)(1,"h1",37),m(2),r()()),e&2){let a=o.$implicit;s(2),y(a.note)}}function tt(e,o){e&1&&(i(0,"mat-header-cell",35),m(1," Status "),r())}function at(e,o){if(e&1&&(i(0,"mat-cell",36)(1,"h1",37),m(2),r()()),e&2){let a=o.$implicit;s(2),y(a.status)}}function it(e,o){e&1&&(i(0,"mat-header-cell",35),m(1," Action "),r())}function rt(e,o){if(e&1){let a=q();i(0,"mat-cell",38)(1,"a",39),g("click",function(){let t=S(a).$implicit,l=x(2);return C(l.deleteCategoryById(t.id,t.nama_barang,t.posisi_akhir,t.qty_barang))}),c(2,"mat-icon",40),r(),i(3,"a",41),g("click",function(){let t=S(a).$implicit,l=x(2);return C(l.PerbaruiStatus(t.id,t.qty_barang))}),c(4,"mat-icon",42),r()()}}function nt(e,o){e&1&&c(0,"mat-header-row")}function ot(e,o){e&1&&c(0,"mat-row")}function lt(e,o){if(e&1&&(i(0,"mat-table",24,2),h(2,25),p(3,We,2,0,"mat-header-cell",26)(4,Ze,3,1,"mat-cell",27),b(),h(5,28),p(6,Je,2,0,"mat-header-cell",26)(7,Xe,3,1,"mat-cell",27),b(),h(8,29),p(9,Ye,2,0,"mat-header-cell",26)(10,et,3,1,"mat-cell",27),b(),h(11,30),p(12,tt,2,0,"mat-header-cell",26)(13,at,3,1,"mat-cell",27),b(),h(14,31),p(15,it,2,0,"mat-header-cell",26)(16,rt,5,0,"mat-cell",32),b(),p(17,nt,1,0,"mat-header-row",33)(18,ot,1,0,"mat-row",34),r()),e&2){let a=x();u("dataSource",a.dataSource),s(17),u("matHeaderRowDef",a.displayedColumns),s(),u("matRowDefColumns",a.displayedColumns)}}var Te=(()=>{class e{constructor(a,n,t,l){this.apiService=a,this.route=n,this.matDialog=t,this.fuseConfirmationService=l,this.displayedColumns=["nama_barang","note","qty","status","action"],this.dataSource=new Me([]),this.isLoading=!1,this.isNotDataFound=!1,this.logAktivitas=[],this.kategoriItems=[]}ngOnInit(){this.route.paramMap.subscribe(()=>{this.getBarangStatus()})}getBarangStatus(){return v(this,null,function*(){this.isLoading=!1,this.isNotDataFound=!1;try{let n=(yield this.apiService.get("/barangStatus",!0))?.dataBarang??[];this.logAktivitas=n.map(t=>({id:t.id,nama_barang:t.nama_barang,note:t.note,status:t.status,posisi_akhir:t.posisi_akhir,qty_barang:t.qty_barang})),this.dataSource.data=this.logAktivitas,this.isNotDataFound=this.logAktivitas.length===0}catch(a){console.error("Failed to fetch data:",a),this.isNotDataFound=!0}finally{this.isLoading=!1}})}ngAfterViewInit(){this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort,this.dataSource.filterPredicate=(a,n)=>{let t=n.trim().toLowerCase();return a.nama_barang?.toLowerCase().includes(t)||a.note?.toLowerCase().includes(t)||a.status?.toLowerCase().includes(t)}}onPageChange(a){this.dataSource.paginator=this.paginator}applySearchFilter(a){this.dataSource.filter=a.trim().toLowerCase(),this.dataSource.paginator&&this.dataSource.paginator.firstPage()}deleteCategoryById(a,n,t,l){this.fuseConfirmationService.open({title:"Konfirmasi Hapus",message:`Apakah Anda yakin ingin menghapus "${n}" dari "${t}" dengan jumlah ${l} barang?`,actions:{confirm:{label:"Hapus"},cancel:{label:"Batal"}}}).afterClosed().subscribe(f=>v(this,null,function*(){if(f==="confirmed")try{yield this.apiService.delete(`/barangStatus/${a}`,!0),this.getBarangStatus(),console.log(`"${n}" dari "${t}" berhasil dihapus`)}catch(j){console.error("Gagal menghapus data",j)}}))}PerbaruiStatus(a){this.matDialog.open(Ee,{width:window.innerWidth<600?"90%":"50%",maxWidth:"100vw",data:{barangId:a}}).afterClosed().subscribe(t=>{t==="refresh"&&this.getBarangStatus()})}static{this.\u0275fac=function(n){return new(n||e)(d(L),d(Q),d(W),d(D))}}static{this.\u0275cmp=w({type:e,selectors:[["app-barang-rusak"]],viewQuery:function(n,t){if(n&1&&(N($,5),N(P,5)),n&2){let l;A(l=V())&&(t.paginator=l.first),A(l=V())&&(t.sort=l.first)}},standalone:!0,features:[k],decls:18,vars:9,consts:[["fuseCard",""],["paginator",""],["table",""],[1,"my-8","mb-10","w-full","mx-8"],[1,"flex","flex-col","shadow-md","border-[1px]"],[1,"truncate","text-lg","flex-col","sm:flex-row","font-medium","leading-6","tracking-tight","px-5","py-3","flex","items-start","sm:items-center","w-full","justify-between"],["for","table-search",1,"sr-only"],[1,"relative","my-2"],[1,"absolute","inset-y-0","rtl:inset-r-0","start-0","flex","items-center","ps-3","pointer-events-none"],["aria-hidden","true","xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 20 20",1,"w-4","h-4","text-gray-500","dark:text-gray-400"],["stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","m19 19-4-4m0-7A7 7 0 1 1 1 8a7 7 0 0 1 14 0Z"],["type","text","matInput","","placeholder","Cari Barang",1,"block","p-2","ps-10","text-sm","text-gray-900","border","border-gray-300","rounded-lg","bg-gray-50","focus:ring-blue-500","focus:border-blue-500","dark:bg-gray-700","dark:border-gray-600","dark:placeholder-gray-400","dark:text-white","dark:focus:ring-blue-500","dark:focus:border-blue-500",3,"keyup","disabled"],[1,"flex","flex-col","sm:flex-row","items-start","sm:items-center","gap-3"],["role","status","class","p-5 animate-pulse",4,"ngIf"],[4,"ngIf"],[1,"w-full","overflow-auto","whitespace-nowrap"],["matSort","","class","min-w-180",3,"dataSource",4,"ngIf"],[3,"page","pageSize","length","pageSizeOptions","showFirstLastButtons"],["role","status",1,"p-5","animate-pulse"],[1,"h-6","bg-gray-300","rounded-full","dark:bg-gray-700","w-full","mb-[22px]"],[1,"h-6","bg-gray-300","rounded-full","dark:bg-gray-700","w-full"],[1,"flex","flex-col","items-center"],["src","../../../../../assets/not-found.jpg","alt","not-found.jpg",1,"h-64","bg-cover","bg-center","object-scale-down"],[1,"mt-2","font-semibold","text-xl","-tracking-tighter"],["matSort","",1,"min-w-180",3,"dataSource"],["matColumnDef","nama_barang"],["mat-sort-header","",4,"matHeaderCellDef"],["class","py-2",4,"matCellDef"],["matColumnDef","qty"],["matColumnDef","note"],["matColumnDef","status"],["matColumnDef","action"],["class","px-2 sm:px-6 flex items-center",4,"matCellDef"],[4,"matHeaderRowDef"],[4,"matRowDef","matRowDefColumns"],["mat-sort-header",""],[1,"py-2"],[1,"text-base","font-medium"],[1,"px-2","sm:px-6","flex","items-center"],[1,"font-medium","mx-1","text-white","dark:text-white","bg-red-500","hover:cursor-pointer","hover:bg-red-600","rounded","hover:underline",3,"click"],["svgIcon","heroicons_solid:trash",1,"text-white",2,"transform","scale(0.7)"],[1,"font-medium","mx-1","text-white","dark:text-white","bg-blue-500","hover:bg-blue-600","rounded","hover:underline",3,"click"],["svgIcon","heroicons_solid:pencil-square",1,"text-white",2,"transform","scale(0.7)"]],template:function(n,t){if(n&1){let l=q();i(0,"main",3)(1,"fuse-card",4,0)(3,"div",5)(4,"label",6),m(5,"Search"),r(),i(6,"div",7)(7,"div",8),U(),i(8,"svg",9),c(9,"path",10),r()(),H(),i(10,"input",11),g("keyup",function(f){return S(l),C(t.applySearchFilter(f.target.value))}),r()(),c(11,"div",12),r(),p(12,ze,7,0,"div",13)(13,Ke,5,0,"div",14),i(14,"div",15),p(15,lt,19,3,"mat-table",16),r(),i(16,"mat-paginator",17,1),g("page",function(f){return S(l),C(t.onPageChange(f))}),r()()()}n&2&&(s(10),u("disabled",t.isLoading),s(2),u("ngIf",t.isLoading),s(),u("ngIf",t.isNotDataFound&&!t.isLoading),s(2),u("ngIf",!t.isLoading&&!t.isNotDataFound),s(),u("pageSize",10)("length",t.dataSource.data.length)("pageSizeOptions",G(8,Oe))("showFirstLastButtons",!0))},dependencies:[ke,ge,he,Ce,be,_e,ye,ve,Se,we,xe,$,P,B,R,I,M,Be,T,ae,Re,Z,E,te]})}}return e})();var Ut=[{path:"",component:Te}];export{Ut as default};
