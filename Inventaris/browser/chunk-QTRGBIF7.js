import{a as pe}from"./chunk-T6BJG2Z5.js";import{a as le,c as me}from"./chunk-DPAB5KPQ.js";import"./chunk-R2G5O2T3.js";import{a as de}from"./chunk-WWD2L4QL.js";import{a as M}from"./chunk-33AQHTZ3.js";import{a as ce}from"./chunk-RNLVHR5B.js";import"./chunk-KS76QDFS.js";import"./chunk-Y2TYLDF6.js";import"./chunk-ACKBNI47.js";import"./chunk-HC6MZPB3.js";import"./chunk-2QWWRY5H.js";import"./chunk-NMYJD6OP.js";import"./chunk-WIS6G6XT.js";import"./chunk-SV2ZKNWA.js";import"./chunk-U4MDP2GH.js";import"./chunk-RS5W3JWO.js";import"./chunk-BWQPWRAH.js";import"./chunk-OAQMJ7ML.js";import"./chunk-QDZ54ZJO.js";import"./chunk-OLKQPSEZ.js";import"./chunk-7D6K5XYM.js";import"./chunk-OBXDPQ3V.js";import"./chunk-XN53Y45H.js";import"./chunk-UYQ7EZNZ.js";import"./chunk-MCRJI3T3.js";import"./chunk-BAKMWPBW.js";import{a as k}from"./chunk-FDC45VUS.js";import{a as Z,b as J,c as X,e as Y,f as ee,h as te,i as ie,k as ae,l as re,n as oe,o as ne,p as se}from"./chunk-QBWZ6CEK.js";import"./chunk-BRBHI7BQ.js";import"./chunk-OBBPMR2I.js";import"./chunk-AMQPVFGX.js";import"./chunk-KKCAABTQ.js";import"./chunk-B7J5UJF3.js";import"./chunk-F4H6ZFEG.js";import"./chunk-SV7S5NYR.js";import"./chunk-WTCPO44B.js";import{a as W}from"./chunk-4ZGOATSA.js";import{c as P,e as Q}from"./chunk-K6SJV66T.js";import"./chunk-AIL4DHVD.js";import"./chunk-56EIYY4C.js";import"./chunk-JIIP3X5D.js";import{d as G}from"./chunk-6GRHLUW6.js";import"./chunk-YCUPTL4E.js";import"./chunk-DCIWF3NK.js";import"./chunk-N64NHRQD.js";import"./chunk-N34H76JM.js";import"./chunk-WCPJYO2Z.js";import"./chunk-7I5SQKLH.js";import"./chunk-BNZ6GVUN.js";import"./chunk-BVYLKFEF.js";import"./chunk-PPHX6Q7S.js";import{A as U,B as K}from"./chunk-EMGI2SSV.js";import{b as $,e as z}from"./chunk-DPACH7O6.js";import{b as q,c as O}from"./chunk-IIOR2V55.js";import"./chunk-SFWQ4JHW.js";import"./chunk-DITXZIYA.js";import"./chunk-PTSJDPUO.js";import"./chunk-G5ULN3RC.js";import{f as j,i as B}from"./chunk-HZDJ65MY.js";import"./chunk-OAD3FQTP.js";import{k as V,x as H}from"./chunk-MFIY2XVS.js";import{$b as y,Aa as L,Ba as A,Bb as l,Nb as a,Ob as o,Pb as d,Qb as w,Rb as b,Tb as C,Zb as v,db as s,dc as D,eb as g,ec as x,fc as S,hc as c,ic as T,na as F,rc as R,sc as E,tc as N,ya as u,za as f,zb as p}from"./chunk-ULGM77ZI.js";import{i as _}from"./chunk-7EPSDV5K.js";var fe=()=>[5,10,20],ge=i=>["edit-user",i];function ve(i,m){i&1&&(a(0,"div",22),d(1,"div",23)(2,"div",23)(3,"div",23)(4,"div",23)(5,"div",23)(6,"div",24),o())}function he(i,m){i&1&&(a(0,"div")(1,"div",25),d(2,"img",26),a(3,"h1",27),c(4,"Data Not Found"),o()()())}function _e(i,m){i&1&&(a(0,"mat-header-cell",36),c(1," Nama Divisi "),o())}function we(i,m){if(i&1&&(a(0,"mat-cell",37)(1,"h1",38),c(2),o()()),i&2){let e=m.$implicit;s(2),T(e.nama_divisi)}}function be(i,m){i&1&&(a(0,"mat-header-cell",36),c(1," Action "),o())}function Ce(i,m){if(i&1){let e=C();a(0,"mat-cell",39)(1,"a",40),v("click",function(){let t=u(e).$implicit,n=y(2);return f(n.deleteDivisiByName(t.nama_divisi))}),d(2,"mat-icon",41),o(),a(3,"a",42),d(4,"mat-icon",43),o()()}if(i&2){let e=m.$implicit;s(3),l("routerLink",N(1,ge,e.name))}}function ye(i,m){i&1&&d(0,"mat-header-row")}function De(i,m){i&1&&d(0,"mat-row")}function xe(i,m){if(i&1&&(a(0,"mat-table",28,2),w(2,29),p(3,_e,2,0,"mat-header-cell",30)(4,we,3,1,"mat-cell",31),b(),w(5,32),p(6,be,2,0,"mat-header-cell",30)(7,Ce,5,3,"mat-cell",33),b(),p(8,ye,1,0,"mat-header-row",34)(9,De,1,0,"mat-row",35),o()),i&2){let e=y();l("dataSource",e.dataSource),s(8),l("matHeaderRowDef",e.displayedColumns),s(),l("matRowDefColumns",e.displayedColumns)}}var ue=(()=>{class i{constructor(e,r,t,n){this.apiService=e,this.route=r,this.matDialog=t,this.fuseConfirmationService=n,this.displayedColumns=["nama_divisi","action"],this.dataSource=new se([]),this.isLoading=!1,this.isNotDataFound=!1,this.logAktivitas=[],this.divisiItems=[]}ngOnInit(){this.route.paramMap.subscribe(()=>{this.getDivisi()})}getDivisi(){return _(this,null,function*(){this.isLoading=!0,this.isNotDataFound=!1;try{let r=(yield this.apiService.get("/divisi",!0))?.data??[];this.logAktivitas=r.map(t=>({id:t.id,nama_divisi:t.nama_divisi,createdAt:t.CreatedAt,updatedAt:t.UpdatedAt})),this.dataSource.data=this.logAktivitas,this.isNotDataFound=this.logAktivitas.length===0}catch(e){console.error("Failed to fetch data:",e),this.isNotDataFound=!0}finally{this.isLoading=!1}})}ngAfterViewInit(){this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort,this.dataSource.filterPredicate=(e,r)=>{let t=r.trim().toLowerCase();return e.nama_divisi?.toLowerCase().includes(t)||e.createdAt?.toLowerCase().includes(t)||e.updatedAt?.toLowerCase().includes(t)}}onPageChange(e){this.dataSource.paginator=this.paginator}applySearchFilter(e){this.dataSource.filter=e.trim().toLowerCase(),this.dataSource.paginator&&this.dataSource.paginator.firstPage()}applyFilterUserProfile(){}addNewDivision(){this.matDialog.open(pe,{width:window.innerWidth<600?"90%":"50%",maxWidth:"100vw"}).afterClosed().subscribe(r=>{r==="refresh"&&this.getDivisi()})}deleteDivisiByName(e){this.fuseConfirmationService.open({title:"Konfirmasi Hapus",message:`Apakah Anda yakin ingin menghapus divisi "${e}"?`,actions:{confirm:{label:"Hapus"},cancel:{label:"Batal"}}}).afterClosed().subscribe(t=>_(this,null,function*(){if(t==="confirmed")try{yield this.apiService.delete(`/divisi/${e}`,!0),this.getDivisi(),console.log(`Divisi "${e}" berhasil dihapus`)}catch(n){console.error("Gagal menghapus divisi",n)}}))}static{this.\u0275fac=function(r){return new(r||i)(g(ce),g(j),g(P),g(W))}}static{this.\u0275cmp=F({type:i,selectors:[["app-divisi"]],viewQuery:function(r,t){if(r&1&&(D(M,5),D(k,5)),r&2){let n;x(n=S())&&(t.paginator=n.first),x(n=S())&&(t.sort=n.first)}},standalone:!0,features:[R],decls:23,vars:12,consts:[["fuseCard",""],["paginator",""],["table",""],[1,"my-8","mb-10","w-full","mx-8"],[1,"flex","flex-col","shadow-md","border-[1px]"],[1,"truncate","text-lg","flex-col","sm:flex-row","font-medium","leading-6","tracking-tight","px-5","py-3","flex","items-start","sm:items-center","w-full","justify-between"],["for","table-search",1,"sr-only"],[1,"relative","my-2"],[1,"absolute","inset-y-0","rtl:inset-r-0","start-0","flex","items-center","ps-3","pointer-events-none"],["aria-hidden","true","xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 20 20",1,"w-4","h-4","text-gray-500","dark:text-gray-400"],["stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","m19 19-4-4m0-7A7 7 0 1 1 1 8a7 7 0 0 1 14 0Z"],["type","text","matInput","","placeholder","Cari Divisi",1,"block","p-2","ps-10","text-sm","text-gray-900","border","border-gray-300","rounded-lg","bg-gray-50","focus:ring-blue-500","focus:border-blue-500","dark:bg-gray-700","dark:border-gray-600","dark:placeholder-gray-400","dark:text-white","dark:focus:ring-blue-500","dark:focus:border-blue-500",3,"keyup","disabled"],[1,"flex","flex-col","sm:flex-row","items-start","sm:items-center","gap-3"],[1,"flex","items-center","gap-2"],["mat-flat-button","",3,"click","disabled","color"],[1,"icon-size-5",3,"svgIcon"],[1,"block","ml-2"],["role","status","class","p-5 animate-pulse",4,"ngIf"],[4,"ngIf"],[1,"w-full","overflow-auto","whitespace-nowrap"],["matSort","","class","min-w-180",3,"dataSource",4,"ngIf"],[3,"page","pageSize","length","pageSizeOptions","showFirstLastButtons"],["role","status",1,"p-5","animate-pulse"],[1,"h-6","bg-gray-300","rounded-full","dark:bg-gray-700","w-full","mb-[22px]"],[1,"h-6","bg-gray-300","rounded-full","dark:bg-gray-700","w-full"],[1,"flex","flex-col","items-center"],["src","../../../../../assets/not-found.jpg","alt","not-found.jpg",1,"h-64","bg-cover","bg-center","object-scale-down"],[1,"mt-2","font-semibold","text-xl","-tracking-tighter"],["matSort","",1,"min-w-180",3,"dataSource"],["matColumnDef","nama_divisi"],["mat-sort-header","",4,"matHeaderCellDef"],["class","py-2",4,"matCellDef"],["matColumnDef","action"],["class","px-2 sm:px-6 flex items-center",4,"matCellDef"],[4,"matHeaderRowDef"],[4,"matRowDef","matRowDefColumns"],["mat-sort-header",""],[1,"py-2"],[1,"text-base","font-medium"],[1,"px-2","sm:px-6","flex","items-center"],[1,"font-medium","mx-1","text-white","dark:text-white","bg-red-500","hover:cursor-pointer","hover:bg-red-600","rounded","hover:underline",3,"click"],["svgIcon","heroicons_solid:trash",1,"text-white",2,"transform","scale(0.7)"],[1,"font-medium","mx-1","text-white","dark:text-white","bg-blue-500","hover:bg-blue-600","rounded","hover:underline",3,"routerLink"],["svgIcon","heroicons_solid:pencil-square",1,"text-white",2,"transform","scale(0.7)"]],template:function(r,t){if(r&1){let n=C();a(0,"main",3)(1,"fuse-card",4,0)(3,"div",5)(4,"label",6),c(5,"Search"),o(),a(6,"div",7)(7,"div",8),L(),a(8,"svg",9),d(9,"path",10),o()(),A(),a(10,"input",11),v("keyup",function(h){return u(n),f(t.applySearchFilter(h.target.value))}),o()(),a(11,"div",12)(12,"div",13)(13,"a",14),v("click",function(){return u(n),f(t.addNewDivision())}),d(14,"mat-icon",15),a(15,"span",16),c(16,"Tambahkan Divisi"),o()()()()(),p(17,ve,7,0,"div",17)(18,he,5,0,"div",18),a(19,"div",19),p(20,xe,10,3,"mat-table",20),o(),a(21,"mat-paginator",21,1),v("page",function(h){return u(n),f(t.onPageChange(h))}),o()()()}r&2&&(s(10),l("disabled",t.isLoading),s(3),l("disabled",t.isLoading)("color","primary"),s(),l("svgIcon","person_add_alt_1"),s(3),l("ngIf",t.isLoading),s(),l("ngIf",t.isNotDataFound&&!t.isLoading),s(2),l("ngIf",!t.isLoading&&!t.isNotDataFound),s(),l("pageSize",10)("length",t.dataSource.data.length)("pageSizeOptions",E(11,fe))("showFirstLastButtons",!0))},dependencies:[B,ne,Z,X,ie,Y,J,ae,ee,te,re,oe,M,k,O,q,H,V,de,K,G,me,le,Q,U,z,$]})}}return i})();var Je=[{path:"",component:ue}];export{Je as default};
