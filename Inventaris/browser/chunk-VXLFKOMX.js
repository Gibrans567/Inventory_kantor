import{a as De,c as Fe,d as Le}from"./chunk-JTDLBORC.js";import{a as Ie,s as Ae}from"./chunk-R2G5O2T3.js";import{a as Ke}from"./chunk-WWD2L4QL.js";import{a as V}from"./chunk-33AQHTZ3.js";import{a as F}from"./chunk-R7PCNJJG.js";import"./chunk-KS76QDFS.js";import"./chunk-Y2TYLDF6.js";import"./chunk-ACKBNI47.js";import"./chunk-HC6MZPB3.js";import"./chunk-2QWWRY5H.js";import"./chunk-NMYJD6OP.js";import"./chunk-WIS6G6XT.js";import"./chunk-SV2ZKNWA.js";import"./chunk-U4MDP2GH.js";import"./chunk-RS5W3JWO.js";import"./chunk-BWQPWRAH.js";import"./chunk-OAQMJ7ML.js";import"./chunk-QDZ54ZJO.js";import"./chunk-OLKQPSEZ.js";import"./chunk-7D6K5XYM.js";import"./chunk-OBXDPQ3V.js";import"./chunk-XN53Y45H.js";import"./chunk-UYQ7EZNZ.js";import"./chunk-MCRJI3T3.js";import"./chunk-BAKMWPBW.js";import{a as j}from"./chunk-FDC45VUS.js";import{a as ge,b as he,c as _e,e as ve,f as we,h as Ce,i as ye,k as be,l as Se,n as ke,o as xe,p as Me}from"./chunk-QBWZ6CEK.js";import"./chunk-BRBHI7BQ.js";import"./chunk-OBBPMR2I.js";import"./chunk-AMQPVFGX.js";import"./chunk-KKCAABTQ.js";import"./chunk-B7J5UJF3.js";import"./chunk-F4H6ZFEG.js";import"./chunk-SV7S5NYR.js";import"./chunk-WTCPO44B.js";import{a as M}from"./chunk-4ZGOATSA.js";import{a as O,c as U,e as W}from"./chunk-K6SJV66T.js";import"./chunk-AIL4DHVD.js";import"./chunk-56EIYY4C.js";import"./chunk-JIIP3X5D.js";import{d as ie}from"./chunk-6GRHLUW6.js";import"./chunk-YCUPTL4E.js";import"./chunk-DCIWF3NK.js";import"./chunk-N64NHRQD.js";import"./chunk-N34H76JM.js";import"./chunk-WCPJYO2Z.js";import{a as fe,b as ue}from"./chunk-7I5SQKLH.js";import{d as ce,e as pe}from"./chunk-BNZ6GVUN.js";import{a as Z,b as J,i as X,j as Y}from"./chunk-BVYLKFEF.js";import"./chunk-PPHX6Q7S.js";import{A as I,B as D,b as ae,d as oe,f as re,g as ne,l as le,o as me,r as se,y as de}from"./chunk-EMGI2SSV.js";import{b as ee,e as te}from"./chunk-DPACH7O6.js";import{b as k,c as x}from"./chunk-IIOR2V55.js";import"./chunk-SFWQ4JHW.js";import"./chunk-DITXZIYA.js";import"./chunk-PTSJDPUO.js";import"./chunk-G5ULN3RC.js";import{f as $,h as q,i as z}from"./chunk-HZDJ65MY.js";import"./chunk-OAD3FQTP.js";import{k as b,x as S}from"./chunk-MFIY2XVS.js";import{$b as E,Aa as H,Ba as P,Bb as m,Nb as o,Ob as r,Pb as d,Qb as K,Rb as A,Tb as L,Zb as u,db as l,dc as N,eb as s,ec as T,fc as R,hc as p,ic as B,na as C,rc as y,sc as G,tc as Q,ya as _,za as v,zb as f}from"./chunk-ULGM77ZI.js";import{i as h}from"./chunk-7EPSDV5K.js";function $e(i,c){i&1&&(o(0,"div",10),d(1,"mat-spinner",11),r())}function qe(i,c){i&1&&(o(0,"mat-error"),p(1," Nama Kategori wajib diisi "),r())}var Ee=(()=>{class i{constructor(e,a,t,n,w,g,Te,Re){this.platform=e,this.fb=a,this._apiService=t,this.router=n,this.loadingController=w,this.fuseConfirmationService=g,this._tableUsersService=Te,this.dialogRef=Re,this.isLoading=!1}ngOnInit(){this.categoryForm=this.fb.group({nama_kategori:["",oe.required]})}onNoClick(){this.dialogRef.close()}onSubmit(){return h(this,null,function*(){if(!this.categoryForm.valid){console.warn("Form tidak valid");return}this.isLoading=!0;try{let e={nama_kategori:this.categoryForm.value.nama_kategori},a=yield this._apiService.post("/kategori",e);console.log(a),this.dialogRef.close("refresh"),this._tableUsersService.fetchData()}catch(e){console.error("Gagal submit form",e)}finally{this.isLoading=!1}})}static{this.\u0275fac=function(a){return new(a||i)(s(Ie),s(de),s(F),s(q),s(Ae),s(M),s(Le),s(O))}}static{this.\u0275cmp=C({type:i,selectors:[["app-add-kategori"]],standalone:!0,features:[y],decls:13,vars:3,consts:[[1,"h-full","w-full"],["class","loading-overlay",4,"ngIf"],[1,"w-full",3,"click"],["svgIcon","mat_solid:close",1,"self-end"],[1,"overflow-y-auto",2,"max-height","80vh","padding-right","10px"],[1,"bg-card","mt-2","flex","flex-col","overflow-hidden","rounded-2xl","p-8","pb-4",3,"formGroup"],["floatLabel","always",1,"w-full","mb-2"],["matInput","","formControlName","nama_kategori","type","text","placeholder","Masukkan nama kategori"],[4,"ngIf"],[1,"bg-green-600","text-white","p-2","rounded","mt-4",3,"click"],[1,"loading-overlay"],["diameter","50","color","primary"]],template:function(a,t){if(a&1&&(o(0,"div",0),f(1,$e,2,0,"div",1),o(2,"a",2),u("click",function(){return t.onNoClick()}),d(3,"mat-icon",3),r(),o(4,"div",4)(5,"form",5)(6,"mat-form-field",6)(7,"mat-label"),p(8,"Nama Kategori"),r(),d(9,"input",7),f(10,qe,2,0,"mat-error",8),r(),o(11,"button",9),u("click",function(){return t.onSubmit()}),p(12," Simpan Divisi "),r()()()()),a&2){let n;l(),m("ngIf",t.isLoading),l(4),m("formGroup",t.categoryForm),l(5),m("ngIf",(n=t.categoryForm.get("nama_kategori"))==null?null:n.hasError("required"))}},dependencies:[Y,X,Z,J,I,le,ae,re,ne,pe,ce,S,b,D,me,se,x,k,ue,fe]})}}return i})();var ze=()=>[5,10,20],Oe=i=>["edit-kategori",i];function Ue(i,c){i&1&&(o(0,"div",22),d(1,"div",23)(2,"div",23)(3,"div",23)(4,"div",23)(5,"div",23)(6,"div",24),r())}function We(i,c){i&1&&(o(0,"div")(1,"div",25),d(2,"img",26),o(3,"h1",27),p(4,"Data Not Found"),r()()())}function Ze(i,c){i&1&&(o(0,"mat-header-cell",36),p(1," Nama Kategori "),r())}function Je(i,c){if(i&1&&(o(0,"mat-cell",37)(1,"h1",38),p(2),r()()),i&2){let e=c.$implicit;l(2),B(e.nama_kategori)}}function Xe(i,c){i&1&&(o(0,"mat-header-cell",36),p(1," Action "),r())}function Ye(i,c){if(i&1){let e=L();o(0,"mat-cell",39)(1,"a",40),u("click",function(){let t=_(e).$implicit,n=E(2);return v(n.deleteCategoryByName(t.nama_kategori))}),d(2,"mat-icon",41),r(),o(3,"a",42),d(4,"mat-icon",43),r()()}if(i&2){let e=c.$implicit;l(3),m("routerLink",Q(1,Oe,e.id))}}function et(i,c){i&1&&d(0,"mat-header-row")}function tt(i,c){i&1&&d(0,"mat-row")}function it(i,c){if(i&1&&(o(0,"mat-table",28,2),K(2,29),f(3,Ze,2,0,"mat-header-cell",30)(4,Je,3,1,"mat-cell",31),A(),K(5,32),f(6,Xe,2,0,"mat-header-cell",30)(7,Ye,5,3,"mat-cell",33),A(),f(8,et,1,0,"mat-header-row",34)(9,tt,1,0,"mat-row",35),r()),i&2){let e=E();m("dataSource",e.dataSource),l(8),m("matHeaderRowDef",e.displayedColumns),l(),m("matRowDefColumns",e.displayedColumns)}}var Ne=(()=>{class i{constructor(e,a,t,n){this.apiService=e,this.route=a,this.matDialog=t,this.fuseConfirmationService=n,this.displayedColumns=["nama_kategori","action"],this.dataSource=new Me([]),this.isLoading=!1,this.isNotDataFound=!1,this.logAktivitas=[],this.kategoriItems=[]}ngOnInit(){this.route.paramMap.subscribe(()=>{this.getKategori()})}getKategori(){return h(this,null,function*(){this.isLoading=!0,this.isNotDataFound=!1;try{let a=(yield this.apiService.get("/kategori",!0))?.data??[];this.logAktivitas=a.map(t=>({id:t.id,nama_kategori:t.nama_kategori,createdAt:t.CreatedAt,updatedAt:t.UpdatedAt})),this.dataSource.data=this.logAktivitas,this.isNotDataFound=this.logAktivitas.length===0}catch(e){console.error("Failed to fetch data:",e),this.isNotDataFound=!0}finally{this.isLoading=!1}})}ngAfterViewInit(){this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort,this.dataSource.filterPredicate=(e,a)=>{let t=a.trim().toLowerCase();return e.nama_kategori?.toLowerCase().includes(t)||e.createdAt?.toLowerCase().includes(t)||e.updatedAt?.toLowerCase().includes(t)}}onPageChange(e){this.dataSource.paginator=this.paginator}applySearchFilter(e){this.dataSource.filter=e.trim().toLowerCase(),this.dataSource.paginator&&this.dataSource.paginator.firstPage()}addNewCategory(){this.matDialog.open(Ee,{width:window.innerWidth<600?"90%":"50%",maxWidth:"100vw"}).afterClosed().subscribe(a=>{a==="refresh"&&this.getKategori()})}deleteCategoryByName(e){this.fuseConfirmationService.open({title:"Konfirmasi Hapus",message:`Apakah Anda yakin ingin menghapus kategori "${e}"?`,actions:{confirm:{label:"Hapus"},cancel:{label:"Batal"}}}).afterClosed().subscribe(t=>h(this,null,function*(){if(t==="confirmed")try{yield this.apiService.delete(`/kategori/${e}`,!0),this.getKategori(),console.log(`Kategori "${e}" berhasil dihapus`)}catch(n){console.error("Gagal menghapus kategori",n)}}))}static{this.\u0275fac=function(a){return new(a||i)(s(F),s($),s(U),s(M))}}static{this.\u0275cmp=C({type:i,selectors:[["app-kategori"]],viewQuery:function(a,t){if(a&1&&(N(V,5),N(j,5)),a&2){let n;T(n=R())&&(t.paginator=n.first),T(n=R())&&(t.sort=n.first)}},standalone:!0,features:[y],decls:23,vars:12,consts:[["fuseCard",""],["paginator",""],["table",""],[1,"my-8","mb-10","w-full","mx-8"],[1,"flex","flex-col","shadow-md","border-[1px]"],[1,"truncate","text-lg","flex-col","sm:flex-row","font-medium","leading-6","tracking-tight","px-5","py-3","flex","items-start","sm:items-center","w-full","justify-between"],["for","table-search",1,"sr-only"],[1,"relative","my-2"],[1,"absolute","inset-y-0","rtl:inset-r-0","start-0","flex","items-center","ps-3","pointer-events-none"],["aria-hidden","true","xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 20 20",1,"w-4","h-4","text-gray-500","dark:text-gray-400"],["stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","m19 19-4-4m0-7A7 7 0 1 1 1 8a7 7 0 0 1 14 0Z"],["type","text","matInput","","placeholder","Cari Kategori",1,"block","p-2","ps-10","text-sm","text-gray-900","border","border-gray-300","rounded-lg","bg-gray-50","focus:ring-blue-500","focus:border-blue-500","dark:bg-gray-700","dark:border-gray-600","dark:placeholder-gray-400","dark:text-white","dark:focus:ring-blue-500","dark:focus:border-blue-500",3,"keyup","disabled"],[1,"flex","flex-col","sm:flex-row","items-start","sm:items-center","gap-3"],[1,"flex","items-center","gap-2"],["mat-flat-button","",3,"click","disabled","color"],[1,"icon-size-5",3,"svgIcon"],[1,"block","ml-2"],["role","status","class","p-5 animate-pulse",4,"ngIf"],[4,"ngIf"],[1,"w-full","overflow-auto","whitespace-nowrap"],["matSort","","class","min-w-180",3,"dataSource",4,"ngIf"],[3,"page","pageSize","length","pageSizeOptions","showFirstLastButtons"],["role","status",1,"p-5","animate-pulse"],[1,"h-6","bg-gray-300","rounded-full","dark:bg-gray-700","w-full","mb-[22px]"],[1,"h-6","bg-gray-300","rounded-full","dark:bg-gray-700","w-full"],[1,"flex","flex-col","items-center"],["src","../../../../../assets/not-found.jpg","alt","not-found.jpg",1,"h-64","bg-cover","bg-center","object-scale-down"],[1,"mt-2","font-semibold","text-xl","-tracking-tighter"],["matSort","",1,"min-w-180",3,"dataSource"],["matColumnDef","nama_kategori"],["mat-sort-header","",4,"matHeaderCellDef"],["class","py-2",4,"matCellDef"],["matColumnDef","action"],["class","px-2 sm:px-6 flex items-center",4,"matCellDef"],[4,"matHeaderRowDef"],[4,"matRowDef","matRowDefColumns"],["mat-sort-header",""],[1,"py-2"],[1,"text-base","font-medium"],[1,"px-2","sm:px-6","flex","items-center"],[1,"font-medium","mx-1","text-white","dark:text-white","bg-red-500","hover:cursor-pointer","hover:bg-red-600","rounded","hover:underline",3,"click"],["svgIcon","heroicons_solid:trash",1,"text-white",2,"transform","scale(0.7)"],[1,"font-medium","mx-1","text-white","dark:text-white","bg-blue-500","hover:bg-blue-600","rounded","hover:underline",3,"routerLink"],["svgIcon","heroicons_solid:pencil-square",1,"text-white",2,"transform","scale(0.7)"]],template:function(a,t){if(a&1){let n=L();o(0,"main",3)(1,"fuse-card",4,0)(3,"div",5)(4,"label",6),p(5,"Search"),r(),o(6,"div",7)(7,"div",8),H(),o(8,"svg",9),d(9,"path",10),r()(),P(),o(10,"input",11),u("keyup",function(g){return _(n),v(t.applySearchFilter(g.target.value))}),r()(),o(11,"div",12)(12,"div",13)(13,"a",14),u("click",function(){return _(n),v(t.addNewCategory())}),d(14,"mat-icon",15),o(15,"span",16),p(16,"Tambahkan Kategori"),r()()()()(),f(17,Ue,7,0,"div",17)(18,We,5,0,"div",18),o(19,"div",19),f(20,it,10,3,"mat-table",20),r(),o(21,"mat-paginator",21,1),u("page",function(g){return _(n),v(t.onPageChange(g))}),r()()()}a&2&&(l(10),m("disabled",t.isLoading),l(3),m("disabled",t.isLoading)("color","primary"),l(),m("svgIcon","person_add_alt_1"),l(3),m("ngIf",t.isLoading),l(),m("ngIf",t.isNotDataFound&&!t.isLoading),l(2),m("ngIf",!t.isLoading&&!t.isNotDataFound),l(),m("pageSize",10)("length",t.dataSource.data.length)("pageSizeOptions",G(11,ze))("showFirstLastButtons",!0))},dependencies:[z,xe,ge,_e,ye,ve,he,be,we,Ce,Se,ke,V,j,x,k,S,b,Ke,D,ie,Fe,De,W,I,te,ee]})}}return i})();var jt=[{path:"",component:Ne}];export{jt as default};
